import{a as k}from"/build/_shared/chunk-SPIE36GA.js";import{a as F,b as D}from"/build/_shared/chunk-2AM5CV3C.js";import{a as H}from"/build/_shared/chunk-JCS7QHYQ.js";import{a as E}from"/build/_shared/chunk-EQO6UGTB.js";import"/build/_shared/chunk-WNM36PAG.js";import{G as I,a as w,b as y,g as L,n as S}from"/build/_shared/chunk-UL7U4PKM.js";import{a as m,b as c,c as d,d as u,e as p}from"/build/_shared/chunk-5V67YUFU.js";import{c as l}from"/build/_shared/chunk-6BTGMMR5.js";import{a as U}from"/build/_shared/chunk-PGOH7JLP.js";import{a as T,e as v,h as n,i as N,m as b,n as h,q as C}from"/build/_shared/chunk-2HORKBMA.js";import{c as i}from"/build/_shared/chunk-Q3IECNXJ.js";var f=i(T(),1),$=i(U(),1);var J=i(E(),1),M=i(H(),1);var e=i(C(),1);function V(){let{user:_,lists:R}=b(),r=h(),g=v().state==="submitting",[a,A]=(0,f.useState)(""),[o,q]=(0,f.useState)(!1);return(0,e.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,e.jsx)(F,{}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)(D,{user:_}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,e.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,e.jsxs)("div",{className:"flex items-center mb-8",children:[(0,e.jsx)(n,{to:"/lists",className:"mr-4",children:(0,e.jsxs)(l,{variant:"outline",size:"sm",children:[(0,e.jsx)(y,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Import Recipients from CSV"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Upload a CSV file to bulk import recipients into your lists."})]})]}),(0,e.jsxs)(m,{className:"mb-8",children:[(0,e.jsxs)(c,{children:[(0,e.jsxs)(d,{className:"flex items-center",children:[(0,e.jsx)(S,{className:"h-5 w-5 mr-2"}),"CSV Format Requirements"]}),(0,e.jsx)(u,{children:"Your CSV file should follow this format"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:(0,e.jsxs)("code",{className:"text-sm",children:["email,first_name,last_name",(0,e.jsx)("br",{}),"john@example.com,John,Doe",(0,e.jsx)("br",{}),"jane@example.com,Jane,Smith",(0,e.jsx)("br",{}),"bob@example.com,Bob,Johnson"]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Required Columns:"}),(0,e.jsx)("ul",{className:"space-y-1 text-gray-600",children:(0,e.jsxs)("li",{children:["\u2022 ",(0,e.jsx)("strong",{children:"email"})," - Must be a valid email address"]})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Optional Columns:"}),(0,e.jsxs)("ul",{className:"space-y-1 text-gray-600",children:[(0,e.jsxs)("li",{children:["\u2022 ",(0,e.jsx)("strong",{children:"first_name"})," - Recipient's first name"]}),(0,e.jsxs)("li",{children:["\u2022 ",(0,e.jsx)("strong",{children:"last_name"})," - Recipient's last name"]})]})]})]})]})]}),(0,e.jsxs)(m,{children:[(0,e.jsxs)(c,{children:[(0,e.jsxs)(d,{className:"flex items-center",children:[(0,e.jsx)(I,{className:"h-5 w-5 mr-2"}),"Upload CSV File"]}),(0,e.jsx)(u,{children:"Select your CSV file and choose the target list"})]}),(0,e.jsx)(p,{children:(0,e.jsxs)(N,{method:"post",className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV File"}),(0,e.jsx)("input",{type:"file",accept:".csv",onChange:t=>{let s=t.target.files?.[0];if(s&&s.type==="text/csv"){let x=new FileReader;x.onload=B=>{A(B.target?.result)},x.readAsText(s)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),(0,e.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a CSV file with your recipient data"})]}),a&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV Preview (first 5 lines)"}),(0,e.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-sm font-mono",children:[a.split(`
`).slice(0,5).map((t,s)=>(0,e.jsx)("div",{className:s===0?"font-bold":"",children:t},s)),a.split(`
`).length>5&&(0,e.jsxs)("div",{className:"text-gray-500 mt-2",children:["... and ",a.split(`
`).length-5," more rows"]})]})]}),(0,e.jsx)("input",{type:"hidden",name:"csvData",value:a}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target List"}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("input",{type:"checkbox",id:"createNewList",name:"createNewList",checked:o,onChange:t=>q(t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,e.jsx)("label",{htmlFor:"createNewList",className:"ml-2 text-sm text-gray-700",children:"Create new list"})]}),o?(0,e.jsx)(k,{name:"newListName",placeholder:"Enter new list name",required:o,className:"w-full"}):(0,e.jsxs)("select",{name:"listId",required:!o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,e.jsx)("option",{value:"",children:"Select existing list"}),R.map(t=>(0,e.jsx)("option",{value:t.id,children:t.name},t.id))]})]})]}),r?.error&&(0,e.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)(w,{className:"h-5 w-5 text-red-400"}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Import Failed"}),(0,e.jsx)("p",{className:"text-sm text-red-700 mt-1",children:r.error})]})]})}),r?.success&&(0,e.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)(L,{className:"h-5 w-5 text-green-400"}),(0,e.jsxs)("div",{className:"ml-3",children:[(0,e.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Import Successful"}),(0,e.jsx)("p",{className:"text-sm text-green-700 mt-1",children:r.success}),r.errors&&r.errors.length>0&&(0,e.jsxs)("div",{className:"mt-3",children:[(0,e.jsx)("h4",{className:"text-sm font-medium text-orange-800",children:"Warnings:"}),(0,e.jsx)("ul",{className:"text-sm text-orange-700 mt-1 list-disc list-inside",children:r.errors.map((t,s)=>(0,e.jsx)("li",{children:t},s))})]})]})]})}),(0,e.jsxs)("div",{className:"flex space-x-4",children:[(0,e.jsx)(l,{type:"submit",disabled:g||!a,className:"flex-1",children:g?"Importing...":"Import Recipients"}),(0,e.jsx)(n,{to:"/lists",className:"flex-1",children:(0,e.jsx)(l,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}export{V as default};
