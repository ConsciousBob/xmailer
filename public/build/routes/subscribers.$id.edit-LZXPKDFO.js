import{a as c}from"/build/_shared/chunk-SPIE36GA.js";import{a as C,b as S}from"/build/_shared/chunk-2AM5CV3C.js";import{a as F}from"/build/_shared/chunk-JCS7QHYQ.js";import{a as E}from"/build/_shared/chunk-EQO6UGTB.js";import"/build/_shared/chunk-WNM36PAG.js";import{a as d,b as w,y}from"/build/_shared/chunk-UL7U4PKM.js";import{a as o,b as _,c as L,d as I,e as l}from"/build/_shared/chunk-5V67YUFU.js";import{c as i}from"/build/_shared/chunk-6BTGMMR5.js";import{a as A}from"/build/_shared/chunk-PGOH7JLP.js";import{e as g,h as n,i as v,m as N,n as x,q as h}from"/build/_shared/chunk-2HORKBMA.js";import{c as a}from"/build/_shared/chunk-Q3IECNXJ.js";var k=a(A(),1);var O=a(E(),1),B=a(F(),1);var e=a(h(),1);function D(){let{user:q,subscriber:s,allLists:t,currentListIds:u,error:b}=N(),m=x(),f=g().state==="submitting";return console.log("Loader data:",{subscriber:s,allLists:t,currentListIds:u}),(0,e.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,e.jsx)(C,{}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)(S,{user:q}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,e.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,e.jsxs)("div",{className:"flex items-center mb-8",children:[(0,e.jsx)(n,{to:"/subscribers",className:"mr-4",children:(0,e.jsxs)(i,{variant:"outline",size:"sm",children:[(0,e.jsx)(w,{className:"h-4 w-4 mr-2"}),"Back to Subscribers"]})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Edit Subscriber"}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:"Update subscriber information and list memberships."})]})]}),b&&(0,e.jsx)(o,{className:"mb-6 border-red-200 bg-red-50",children:(0,e.jsxs)(l,{className:"p-4 flex items-center",children:[(0,e.jsx)(d,{className:"h-5 w-5 text-red-600 mr-2"}),(0,e.jsx)("p",{className:"text-red-800",children:b})]})}),m?.error&&(0,e.jsx)(o,{className:"mb-6 border-red-200 bg-red-50",children:(0,e.jsxs)(l,{className:"p-4 flex items-center",children:[(0,e.jsx)(d,{className:"h-5 w-5 text-red-600 mr-2"}),(0,e.jsx)("p",{className:"text-red-800",children:m.error})]})}),(0,e.jsxs)(o,{children:[(0,e.jsxs)(_,{children:[(0,e.jsx)(L,{children:"Subscriber Information"}),(0,e.jsx)(I,{children:"Update the subscriber's details and manage their list subscriptions."})]}),(0,e.jsx)(l,{children:(0,e.jsxs)(v,{method:"post",className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,e.jsx)(c,{name:"email",type:"email",defaultValue:s.email,required:!0,className:"w-full"})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),(0,e.jsx)(c,{name:"firstName",defaultValue:s.first_name||"",className:"w-full"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),(0,e.jsx)(c,{name:"lastName",defaultValue:s.last_name||"",className:"w-full"})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,e.jsxs)("select",{name:"status",defaultValue:s.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,e.jsx)("option",{value:"subscribed",children:"Subscribed"}),(0,e.jsx)("option",{value:"unsubscribed",children:"Unsubscribed"}),(0,e.jsx)("option",{value:"pending",children:"Pending"})]})]}),t&&t.length>0?(0,e.jsxs)("div",{children:[(0,e.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["List Memberships (",t.length," lists available)"]}),(0,e.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4 bg-gray-50",children:t.map(r=>{let p=u.includes(r.id);return(0,e.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border",children:[(0,e.jsx)("input",{type:"checkbox",id:`list-${r.id}`,name:"lists",value:r.id,defaultChecked:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,e.jsx)("label",{htmlFor:`list-${r.id}`,className:"flex-1 text-sm text-gray-700 cursor-pointer",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:r.color}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium",children:r.name}),r.description&&(0,e.jsx)("div",{className:"text-gray-500 text-xs",children:r.description})]})]})}),p&&(0,e.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Current Member"})]},r.id)})}),(0,e.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Select which lists this subscriber should be a member of."})]}):(0,e.jsx)(o,{className:"border-yellow-200 bg-yellow-50",children:(0,e.jsxs)(l,{className:"p-4",children:[(0,e.jsx)("p",{className:"text-yellow-800 mb-2",children:"No lists available"}),(0,e.jsx)("p",{className:"text-yellow-700 text-sm",children:"Create some lists first to organize your subscribers."}),(0,e.jsx)(n,{to:"/lists/new",className:"inline-block mt-2",children:(0,e.jsx)(i,{size:"sm",variant:"outline",children:"Create Your First List"})})]})}),!1,(0,e.jsxs)("div",{className:"flex space-x-4",children:[(0,e.jsxs)(i,{type:"submit",disabled:f,className:"flex-1",children:[(0,e.jsx)(y,{className:"h-4 w-4 mr-2"}),f?"Saving Changes...":"Save Changes"]}),(0,e.jsx)(n,{to:"/subscribers",className:"flex-1",children:(0,e.jsx)(i,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}export{D as default};
