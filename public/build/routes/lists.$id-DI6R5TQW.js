import{a as m}from"/build/_shared/chunk-SPIE36GA.js";import{a as g,b as N}from"/build/_shared/chunk-2AM5CV3C.js";import{a as G}from"/build/_shared/chunk-JCS7QHYQ.js";import{a as P}from"/build/_shared/chunk-EQO6UGTB.js";import"/build/_shared/chunk-WNM36PAG.js";import{H as B,I as k,K as n,b as I,w as S,z as q}from"/build/_shared/chunk-UL7U4PKM.js";import{a as r,b as h,c as y,d as w,e as i}from"/build/_shared/chunk-5V67YUFU.js";import{c as l}from"/build/_shared/chunk-6BTGMMR5.js";import{a as H}from"/build/_shared/chunk-PGOH7JLP.js";import{a as z,e as A,h as v,i as b,m as R,n as D,q as F}from"/build/_shared/chunk-2HORKBMA.js";import{c as o}from"/build/_shared/chunk-Q3IECNXJ.js";var V=o(H(),1);var J=o(P(),1),K=o(G(),1);var E=o(z(),1),e=o(F(),1);function T(){let{user:_,list:s,members:M,availableRecipients:j,error:c}=R(),u=D(),p=A().state==="submitting",[f,U]=(0,E.useState)(""),$=M||[],d=j||[];if(c&&!s)return(0,e.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,e.jsx)(g,{}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)(N,{user:_||{id:"",email:"",full_name:"Guest"}}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,e.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,e.jsx)(r,{className:"border-red-200 bg-red-50",children:(0,e.jsxs)(i,{className:"p-8 text-center",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-red-900 mb-4",children:"Database Configuration Required"}),(0,e.jsx)("p",{className:"text-red-800 mb-6",children:c}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("p",{className:"text-sm text-red-700",children:"To access this functionality, you need to set up your Supabase database."}),(0,e.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,e.jsx)(v,{to:"/demo",children:(0,e.jsx)(l,{variant:"outline",children:"View Demo Version"})}),(0,e.jsx)(l,{onClick:()=>window.open("/setup-demo.md","_blank"),children:"Setup Guide"})]})]})]})})})})]})]});let C=$.filter(t=>{if(!t||!t.subscribers)return!1;let a=t.subscribers,x=`${a.first_name||""} ${a.last_name||""}`.trim(),L=f.toLowerCase();return a.email?.toLowerCase().includes(L)||x.toLowerCase().includes(L)});return(0,e.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,e.jsx)(g,{}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)(N,{user:_}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,e.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,e.jsxs)("div",{className:"flex items-center mb-8",children:[(0,e.jsx)(v,{to:"/lists",className:"mr-4",children:(0,e.jsxs)(l,{variant:"outline",size:"sm",children:[(0,e.jsx)(I,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"w-6 h-6 rounded-full mr-3",style:{backgroundColor:s?.color||"#3B82F6"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:s?.name||"List"}),s?.description&&(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:s.description})]})]})}),(0,e.jsx)("div",{className:"flex items-center space-x-3",children:(0,e.jsx)("span",{className:`px-3 py-1 text-sm rounded-full ${s?.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s?.is_active?"Active":"Inactive"})})]}),c&&(0,e.jsx)(r,{className:"mb-6 border-red-200 bg-red-50",children:(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)("p",{className:"text-red-800",children:c})})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,e.jsx)(r,{children:(0,e.jsx)(i,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-blue-50",children:(0,e.jsx)(n,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s?.total_members||0})]})]})})}),(0,e.jsx)(r,{children:(0,e.jsx)(i,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-green-50",children:(0,e.jsx)(n,{className:"h-6 w-6 text-green-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Subscribed"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s?.subscribed_members||0})]})]})})}),(0,e.jsx)(r,{children:(0,e.jsx)(i,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-purple-50",children:(0,e.jsx)(n,{className:"h-6 w-6 text-purple-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Available to Add"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:d.length})]})]})})})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,e.jsx)("div",{className:"lg:col-span-1",children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(h,{children:[(0,e.jsxs)(y,{className:"flex items-center",children:[(0,e.jsx)(S,{className:"h-5 w-5 mr-2"}),"Add Recipients"]}),(0,e.jsx)(w,{children:"Add new recipients to this list"})]}),(0,e.jsxs)(i,{className:"space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Add New Recipient"}),(0,e.jsxs)(b,{method:"post",className:"space-y-3",children:[(0,e.jsx)("input",{type:"hidden",name:"_action",value:"add-by-email"}),(0,e.jsx)(m,{name:"email",type:"email",placeholder:"Email address",required:!0}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,e.jsx)(m,{name:"firstName",placeholder:"First name"}),(0,e.jsx)(m,{name:"lastName",placeholder:"Last name"})]}),(0,e.jsx)(l,{type:"submit",size:"sm",className:"w-full",disabled:p,children:p?"Adding...":"Add Recipient"})]})]}),d.length>0&&(0,e.jsxs)("div",{children:[(0,e.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Add Existing Recipients"}),(0,e.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[d.slice(0,10).map(t=>(0,e.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.email}),(t.first_name||t.last_name)&&(0,e.jsx)("p",{className:"text-xs text-gray-500",children:[t.first_name,t.last_name].filter(Boolean).join(" ")})]}),(0,e.jsxs)(b,{method:"post",className:"inline",children:[(0,e.jsx)("input",{type:"hidden",name:"_action",value:"add-recipient"}),(0,e.jsx)("input",{type:"hidden",name:"subscriberId",value:t.id}),(0,e.jsx)(l,{type:"submit",size:"sm",variant:"outline",disabled:p,children:(0,e.jsx)(k,{className:"h-3 w-3"})})]})]},t.id)),d.length>10&&(0,e.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["And ",d.length-10," more recipients..."]})]})]}),u?.error&&(0,e.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:u.error}),u?.success&&(0,e.jsx)("div",{className:"text-green-600 text-sm bg-green-50 p-3 rounded-md",children:u.success})]})]})}),(0,e.jsx)("div",{className:"lg:col-span-2",children:(0,e.jsxs)(r,{children:[(0,e.jsxs)(h,{children:[(0,e.jsx)(y,{children:"List Members"}),(0,e.jsx)(w,{children:"Manage recipients in this list"})]}),(0,e.jsxs)(i,{children:[(0,e.jsx)("div",{className:"mb-4",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,e.jsx)(m,{placeholder:"Search members...",value:f,onChange:t=>U(t.target.value),className:"pl-10"})]})}),C.length===0?(0,e.jsxs)("div",{className:"text-center py-8",children:[(0,e.jsx)(n,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,e.jsx)("p",{className:"text-gray-600",children:f?"No members match your search.":"No members in this list yet."})]}):(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)("table",{className:"w-full",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{className:"border-b",children:[(0,e.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Email"}),(0,e.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Name"}),(0,e.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),(0,e.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Added"}),(0,e.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),(0,e.jsx)("tbody",{children:C.map(t=>{let a=t.subscribers;return(0,e.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,e.jsx)("td",{className:"py-3 px-4 text-sm text-gray-900",children:a.email}),(0,e.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:[a.first_name,a.last_name].filter(Boolean).join(" ")||"-"}),(0,e.jsx)("td",{className:"py-3 px-4 text-sm",children:(0,e.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${a.status==="subscribed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.status==="subscribed"?"Subscribed":"Unsubscribed"})}),(0,e.jsx)("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(t.added_at).toLocaleDateString()}),(0,e.jsx)("td",{className:"py-3 px-4 text-sm",children:(0,e.jsxs)(b,{method:"post",className:"inline",children:[(0,e.jsx)("input",{type:"hidden",name:"_action",value:"remove-recipient"}),(0,e.jsx)("input",{type:"hidden",name:"membershipId",value:t.id}),(0,e.jsx)(l,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:p,onClick:x=>{confirm("Remove this recipient from the list?")||x.preventDefault()},children:(0,e.jsx)(B,{className:"h-4 w-4"})})]})})]},t.id)})})]})})]})]})})]})]})})]})]})}export{T as default};
