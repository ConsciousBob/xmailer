import{a as E}from"/build/_shared/chunk-SXEFWORF.js";import{a as S,b as L}from"/build/_shared/chunk-2AM5CV3C.js";import{a as j}from"/build/_shared/chunk-JCS7QHYQ.js";import{a as P}from"/build/_shared/chunk-EQO6UGTB.js";import"/build/_shared/chunk-WNM36PAG.js";import{K as _,b,d as C,h as y,s as o,v as h,x as w}from"/build/_shared/chunk-UL7U4PKM.js";import{a as t,b as c,c as g,e as s}from"/build/_shared/chunk-5V67YUFU.js";import{b as i,c as r}from"/build/_shared/chunk-6BTGMMR5.js";import{a as H}from"/build/_shared/chunk-PGOH7JLP.js";import{a as k,e as f,h as m,i as x,m as v,q as N}from"/build/_shared/chunk-2HORKBMA.js";import{c as n}from"/build/_shared/chunk-Q3IECNXJ.js";var $=n(H(),1);var q=n(P(),1),M=n(j(),1),U=n(E(),1);var l=n(k(),1),e=n(N(),1);function A(){let{user:D,campaign:a,sending:d}=v(),u=f(),[I,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(a.status==="sending"||d){let T=setInterval(()=>{R(!0),window.location.reload()},3e3);return()=>clearInterval(T)}},[a.status,d]);let p=a.total_recipients>0?Math.round(a.sent_count/a.total_recipients*100):0,F={draft:"bg-gray-100 text-gray-800",sending:"bg-blue-100 text-blue-800",sent:"bg-green-100 text-green-800",scheduled:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",partially_sent:"bg-orange-100 text-orange-800"}[a.status]||"bg-gray-100 text-gray-800",B=["draft","scheduled"].includes(a.status),z=["sending"].includes(a.status);return(0,e.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,e.jsx)(S,{}),(0,e.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,e.jsx)(L,{user:D}),(0,e.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,e.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,e.jsxs)("div",{className:"flex items-center mb-8",children:[(0,e.jsx)(m,{to:"/campaigns",className:"mr-4",children:(0,e.jsxs)(r,{variant:"outline",size:"sm",children:[(0,e.jsx)(b,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})}),(0,e.jsxs)("div",{className:"flex-1",children:[(0,e.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:a.name}),(0,e.jsx)("p",{className:"text-gray-600 mt-2",children:a.subject})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsxs)("span",{className:`px-3 py-1 text-sm rounded-full ${F}`,children:[a.status.replace("_"," "),I&&(0,e.jsx)(w,{className:"inline h-3 w-3 ml-1 animate-spin"})]}),B&&(0,e.jsx)(x,{method:"post",children:(0,e.jsxs)(r,{type:"submit",name:"_action",value:"send_now",className:"bg-green-600 hover:bg-green-700",disabled:u.state==="submitting",children:[(0,e.jsx)(h,{className:"h-4 w-4 mr-2"}),u.state==="submitting"?"Starting...":"Send Now"]})}),a.status==="draft"&&(0,e.jsx)(m,{to:`/campaigns/${a.id}/edit`,children:(0,e.jsx)(r,{variant:"outline",children:"Edit Campaign"})})]})]}),(a.status==="sending"||d)&&(0,e.jsx)(t,{className:"mb-8 border-blue-200 bg-blue-50",children:(0,e.jsx)(s,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"animate-pulse",children:(0,e.jsx)(o,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-blue-900",children:"Campaign is sending..."}),(0,e.jsxs)("p",{className:"text-blue-700",children:[a.sent_count," of ",a.total_recipients," emails sent"]})]})]})})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,e.jsx)(t,{children:(0,e.jsx)(s,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-blue-50",children:(0,e.jsx)(o,{className:"h-6 w-6 text-blue-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Emails Sent"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.sent_count})]})]})})}),(0,e.jsx)(t,{children:(0,e.jsx)(s,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-green-50",children:(0,e.jsx)(_,{className:"h-6 w-6 text-green-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Recipients"}),(0,e.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.total_recipients})]})]})})}),(0,e.jsx)(t,{children:(0,e.jsx)(s,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-purple-50",children:(0,e.jsx)(C,{className:"h-6 w-6 text-purple-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Delivery Rate"}),(0,e.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[p,"%"]})]})]})})}),(0,e.jsx)(t,{children:(0,e.jsx)(s,{className:"p-6",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("div",{className:"p-2 rounded-lg bg-orange-50",children:(0,e.jsx)(y,{className:"h-6 w-6 text-orange-600"})}),(0,e.jsxs)("div",{className:"ml-4",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),(0,e.jsx)("p",{className:"text-lg font-bold text-gray-900 capitalize",children:a.status.replace("_"," ")})]})]})})})]}),a.total_recipients>0&&(0,e.jsx)(t,{className:"mb-8",children:(0,e.jsxs)(s,{className:"p-6",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,e.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sending Progress"}),(0,e.jsxs)("span",{className:"text-sm text-gray-600",children:[a.sent_count," of ",a.total_recipients," sent"]})]}),(0,e.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,e.jsx)("div",{className:`h-3 rounded-full transition-all duration-300 ${a.status==="sending"?"bg-blue-600":a.status==="sent"?"bg-green-600":a.status==="failed"?"bg-red-600":"bg-gray-400"}`,style:{width:`${p}%`}})})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,e.jsxs)(t,{children:[(0,e.jsx)(c,{children:(0,e.jsx)(g,{children:"Campaign Information"})}),(0,e.jsxs)(s,{className:"space-y-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Campaign Name"}),(0,e.jsx)("p",{className:"text-gray-900",children:a.name})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Subject Line"}),(0,e.jsx)("p",{className:"text-gray-900",children:a.subject})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Created"}),(0,e.jsx)("p",{className:"text-gray-900",children:i(a.created_at)})]}),a.scheduled_at&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Scheduled For"}),(0,e.jsx)("p",{className:"text-gray-900",children:i(a.scheduled_at)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),(0,e.jsx)("p",{className:"text-gray-900",children:i(a.updated_at)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Targeting"}),(0,e.jsx)("p",{className:"text-gray-900",children:a.target_all_subscribers?"All Subscribers":"Selected Lists"})]})]})]}),(0,e.jsxs)(t,{children:[(0,e.jsx)(c,{children:(0,e.jsx)(g,{children:"Email Content Preview"})}),(0,e.jsx)(s,{children:(0,e.jsx)("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto",children:(0,e.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.html_content||"No content available"}})})})]})]})]})})]})]})}export{A as default};
