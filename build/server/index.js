var $i=Object.create;var De=Object.defineProperty;var Vi=Object.getOwnPropertyDescriptor;var Yi=Object.getOwnPropertyNames;var Ki=Object.getPrototypeOf,Gi=Object.prototype.hasOwnProperty;var S=(l=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(l,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):l)(function(l){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+l+'" is not supported')});var A=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),Qi=(l,e)=>{for(var t in e)De(l,t,{get:e[t],enumerable:!0})},Xi=(l,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Yi(e))!Gi.call(l,i)&&i!==t&&De(l,i,{get:()=>e[i],enumerable:!(a=Vi(e,i))||a.enumerable});return l};var Ji=(l,e,t)=>(t=l!=null?$i(Ki(l)):{},Xi(e||!l||!l.__esModule?De(t,"default",{value:l,enumerable:!0}):t,l));var $t=A((gc,Ft)=>{"use strict";var Ut=S("url"),Ht=1800,Pe=class{constructor(e){this.options=e||{},this.cookies=[]}set(e,t){let a=Ut.parse(t||""),i=this.parse(e),r;return i.domain?(r=i.domain.replace(/^\./,""),(a.hostname.length<r.length||("."+a.hostname).substr(-r.length+1)!=="."+r)&&(i.domain=a.hostname)):i.domain=a.hostname,i.path||(i.path=this.getPath(a.pathname)),i.expires||(i.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||Ht)||Ht)*1e3)),this.add(i)}get(e){return this.list(e).map(t=>t.name+"="+t.value).join("; ")}list(e){let t=[],a,i;for(a=this.cookies.length-1;a>=0;a--){if(i=this.cookies[a],this.isExpired(i)){this.cookies.splice(a,a);continue}this.match(i,e)&&t.unshift(i)}return t}parse(e){let t={};return(e||"").toString().split(";").forEach(a=>{let i=a.split("="),r=i.shift().trim().toLowerCase(),n=i.join("=").trim(),c;if(r)switch(r){case"expires":n=new Date(n),n.toString()!=="Invalid Date"&&(t.expires=n);break;case"path":t.path=n;break;case"domain":c=n.toLowerCase(),c.length&&c.charAt(0)!=="."&&(c="."+c),t.domain=c;break;case"max-age":t.expires=new Date(Date.now()+(Number(n)||0)*1e3);break;case"secure":t.secure=!0;break;case"httponly":t.httponly=!0;break;default:t.name||(t.name=r,t.value=n)}}),t}match(e,t){let a=Ut.parse(t||"");return!(a.hostname!==e.domain&&(e.domain.charAt(0)!=="."||("."+a.hostname).substr(-e.domain.length)!==e.domain)||this.getPath(a.pathname).substr(0,e.path.length)!==e.path||e.secure&&a.protocol!=="https:")}add(e){let t,a;if(!e||!e.name)return!1;for(t=0,a=this.cookies.length;t<a;t++)if(this.compare(this.cookies[t],e))return this.isExpired(e)?(this.cookies.splice(t,1),!1):(this.cookies[t]=e,!0);return this.isExpired(e)||this.cookies.push(e),!0}compare(e,t){return e.name===t.name&&e.path===t.path&&e.domain===t.domain&&e.secure===t.secure&&e.httponly===e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let t=(e||"/").split("/");return t.pop(),t=t.join("/").trim(),t.charAt(0)!=="/"&&(t="/"+t),t.substr(-1)!=="/"&&(t+="/"),t}};Ft.exports=Pe});var G=A((xc,Wi)=>{Wi.exports={name:"nodemailer",version:"6.10.1",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-ses":"3.731.1",bunyan:"1.8.15",c8:"10.1.3",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.6",libqp:"2.1.1","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.6"},engines:{node:">=6.0.0"}}});var fe=A((vc,qe)=>{"use strict";var Zi=S("http"),ea=S("https"),Vt=S("url"),ta=S("zlib"),sa=S("stream").PassThrough,Yt=$t(),ia=G(),aa=S("net"),ra=5;qe.exports=function(l,e){return Kt(l,e)};qe.exports.Cookies=Yt;function Kt(l,e){e=e||{},e.fetchRes=e.fetchRes||new sa,e.cookies=e.cookies||new Yt,e.redirects=e.redirects||0,e.maxRedirects=isNaN(e.maxRedirects)?ra:e.maxRedirects,e.cookie&&([].concat(e.cookie||[]).forEach(u=>{e.cookies.set(u,l)}),e.cookie=!1);let t=e.fetchRes,a=Vt.parse(l),i=(e.method||"").toString().trim().toUpperCase()||"GET",r=!1,n,c,d=a.protocol==="https:"?ea:Zi,p={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+ia.version};if(Object.keys(e.headers||{}).forEach(u=>{p[u.toLowerCase().trim()]=e.headers[u]}),e.userAgent&&(p["user-agent"]=e.userAgent),a.auth&&(p.Authorization="Basic "+Buffer.from(a.auth).toString("base64")),(n=e.cookies.get(l))&&(p.cookie=n),e.body){if(e.contentType!==!1&&(p["Content-Type"]=e.contentType||"application/x-www-form-urlencoded"),typeof e.body.pipe=="function")p["Transfer-Encoding"]="chunked",c=e.body,c.on("error",u=>{r||(r=!0,u.type="FETCH",u.sourceUrl=l,t.emit("error",u))});else{if(e.body instanceof Buffer)c=e.body;else if(typeof e.body=="object")try{c=Buffer.from(Object.keys(e.body).map(u=>{let g=e.body[u].toString().trim();return encodeURIComponent(u)+"="+encodeURIComponent(g)}).join("&"))}catch(u){if(r)return;r=!0,u.type="FETCH",u.sourceUrl=l,t.emit("error",u);return}else c=Buffer.from(e.body.toString().trim());p["Content-Type"]=e.contentType||"application/x-www-form-urlencoded",p["Content-Length"]=c.length}i=(e.method||"").toString().trim().toUpperCase()||"POST"}let m,f={method:i,host:a.hostname,path:a.path,port:a.port?a.port:a.protocol==="https:"?443:80,headers:p,rejectUnauthorized:!1,agent:!1};e.tls&&Object.keys(e.tls).forEach(u=>{f[u]=e.tls[u]}),a.protocol==="https:"&&a.hostname&&a.hostname!==f.host&&!aa.isIP(a.hostname)&&!f.servername&&(f.servername=a.hostname);try{m=d.request(f)}catch(u){return r=!0,setImmediate(()=>{u.type="FETCH",u.sourceUrl=l,t.emit("error",u)}),t}return e.timeout&&m.setTimeout(e.timeout,()=>{if(r)return;r=!0,m.abort();let u=new Error("Request Timeout");u.type="FETCH",u.sourceUrl=l,t.emit("error",u)}),m.on("error",u=>{r||(r=!0,u.type="FETCH",u.sourceUrl=l,t.emit("error",u))}),m.on("response",u=>{let g;if(!r){switch(u.headers["content-encoding"]){case"gzip":case"deflate":g=ta.createUnzip();break}if(u.headers["set-cookie"]&&[].concat(u.headers["set-cookie"]||[]).forEach(y=>{e.cookies.set(y,l)}),[301,302,303,307,308].includes(u.statusCode)&&u.headers.location){if(e.redirects++,e.redirects>e.maxRedirects){r=!0;let y=new Error("Maximum redirect count exceeded");y.type="FETCH",y.sourceUrl=l,t.emit("error",y),m.abort();return}return e.method="GET",e.body=!1,Kt(Vt.resolve(l,u.headers.location),e)}if(t.statusCode=u.statusCode,t.headers=u.headers,u.statusCode>=300&&!e.allowErrorResponse){r=!0;let y=new Error("Invalid status code "+u.statusCode);y.type="FETCH",y.sourceUrl=l,t.emit("error",y),m.abort();return}u.on("error",y=>{r||(r=!0,y.type="FETCH",y.sourceUrl=l,t.emit("error",y),m.abort())}),g?(u.pipe(g).pipe(t),g.on("error",y=>{r||(r=!0,y.type="FETCH",y.sourceUrl=l,t.emit("error",y),m.abort())})):u.pipe(t)}}),setImmediate(()=>{if(c)try{if(typeof c.pipe=="function")return c.pipe(m);m.write(c)}catch(u){r=!0,u.type="FETCH",u.sourceUrl=l,t.emit("error",u);return}m.end()}),t}});var H=A((bc,O)=>{"use strict";var na=S("url"),oa=S("util"),la=S("fs"),ca=fe(),W=S("dns"),da=S("net"),pa=S("os"),Me=5*60*1e3,Qt;try{Qt=pa.networkInterfaces()}catch{}O.exports.networkInterfaces=Qt;var Xt=(l,e)=>{let t=O.exports.networkInterfaces;return t?Object.keys(t).map(i=>t[i]).reduce((i,r)=>i.concat(r),[]).filter(i=>!i.internal||e).filter(i=>i.family==="IPv"+l||i.family===l).length>0:!0},Gt=(l,e,t,a)=>{if(t=t||{},!Xt(l,t.allowInternalNetworkInterfaces))return a(null,[]);(W.Resolver?new W.Resolver(t):W)["resolve"+l](e,(n,c)=>{if(n){switch(n.code){case W.NODATA:case W.NOTFOUND:case W.NOTIMP:case W.SERVFAIL:case W.CONNREFUSED:case W.REFUSED:case"EAI_AGAIN":return a(null,[])}return a(n)}return a(null,Array.isArray(c)?c:[].concat(c||[]))})},ge=O.exports.dnsCache=new Map,J=(l,e)=>l?Object.assign({servername:l.servername,host:!l.addresses||!l.addresses.length?null:l.addresses.length===1?l.addresses[0]:l.addresses[Math.floor(Math.random()*l.addresses.length)]},e||{}):Object.assign({},e||{});O.exports.resolveHostname=(l,e)=>{if(l=l||{},!l.host&&l.servername&&(l.host=l.servername),!l.host||da.isIP(l.host)){let a={addresses:[l.host],servername:l.servername||!1};return e(null,J(a,{cached:!1}))}let t;if(ge.has(l.host)&&(t=ge.get(l.host),!t.expires||t.expires>=Date.now()))return e(null,J(t.value,{cached:!0}));Gt(4,l.host,l,(a,i)=>{if(a)return t?e(null,J(t.value,{cached:!0,error:a})):e(a);if(i&&i.length){let r={addresses:i,servername:l.servername||l.host};return ge.set(l.host,{value:r,expires:Date.now()+(l.dnsTtl||Me)}),e(null,J(r,{cached:!1}))}Gt(6,l.host,l,(r,n)=>{if(r)return t?e(null,J(t.value,{cached:!0,error:r})):e(r);if(n&&n.length){let c={addresses:n,servername:l.servername||l.host};return ge.set(l.host,{value:c,expires:Date.now()+(l.dnsTtl||Me)}),e(null,J(c,{cached:!1}))}try{W.lookup(l.host,{all:!0},(c,d)=>{if(c)return t?e(null,J(t.value,{cached:!0,error:c})):e(c);let p=d?d.filter(f=>Xt(f.family)).map(f=>f.address).shift():!1;if(d&&d.length&&!p&&console.warn(`Failed to resolve IPv${d[0].family} addresses with current network`),!p&&t)return e(null,J(t.value,{cached:!0}));let m={addresses:p?[p]:[l.host],servername:l.servername||l.host};return ge.set(l.host,{value:m,expires:Date.now()+(l.dnsTtl||Me)}),e(null,J(m,{cached:!1}))})}catch(c){return t?e(null,J(t.value,{cached:!0,error:c})):e(c)}})})};O.exports.parseConnectionUrl=l=>{l=l||"";let e={};return[na.parse(l,!0)].forEach(t=>{let a;switch(t.protocol){case"smtp:":e.secure=!1;break;case"smtps:":e.secure=!0;break;case"direct:":e.direct=!0;break}!isNaN(t.port)&&Number(t.port)&&(e.port=Number(t.port)),t.hostname&&(e.host=t.hostname),t.auth&&(a=t.auth.split(":"),e.auth||(e.auth={}),e.auth.user=a.shift(),e.auth.pass=a.join(":")),Object.keys(t.query||{}).forEach(i=>{let r=e,n=i,c=t.query[i];switch(isNaN(c)||(c=Number(c)),c){case"true":c=!0;break;case"false":c=!1;break}if(i.indexOf("tls.")===0)n=i.substr(4),e.tls||(e.tls={}),r=e.tls;else if(i.indexOf(".")>=0)return;n in r||(r[n]=c)})}),e};O.exports._logFunc=(l,e,t,a,i,...r)=>{let n={};Object.keys(t||{}).forEach(c=>{c!=="level"&&(n[c]=t[c])}),Object.keys(a||{}).forEach(c=>{c!=="level"&&(n[c]=a[c])}),l[e](n,i,...r)};O.exports.getLogger=(l,e)=>{l=l||{};let t={},a=["trace","debug","info","warn","error","fatal"];if(!l.logger)return a.forEach(r=>{t[r]=()=>!1}),t;let i=l.logger;return l.logger===!0&&(i=ma(a)),a.forEach(r=>{t[r]=(n,c,...d)=>{O.exports._logFunc(i,r,e,n,c,...d)}}),t};O.exports.callbackPromise=(l,e)=>function(){let t=Array.from(arguments),a=t.shift();a?e(a):l(...t)};O.exports.parseDataURI=l=>{let e=l,t=e.indexOf(",");if(!t)return l;let a=e.substring(t+1),i=e.substring(5,t),r,n=i.split(";"),c=n.length>1?n[n.length-1]:!1;c&&c.indexOf("=")<0&&(r=c.toLowerCase(),n.pop());let d=n.shift()||"application/octet-stream",p={};for(let m of n){let f=m.indexOf("=");if(f>=0){let u=m.substring(0,f),g=m.substring(f+1);p[u]=g}}switch(r){case"base64":a=Buffer.from(a,"base64");break;case"utf8":a=Buffer.from(a);break;default:try{a=Buffer.from(decodeURIComponent(a))}catch{a=Buffer.from(a)}a=Buffer.from(a)}return{data:a,encoding:r,contentType:d,params:p}};O.exports.resolveContent=(l,e,t)=>{let a;t||(a=new Promise((c,d)=>{t=O.exports.callbackPromise(c,d)}));let i=l&&l[e]&&l[e].content||l[e],r,n=(typeof l[e]=="object"&&l[e].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!i)return t(null,i);if(typeof i=="object"){if(typeof i.pipe=="function")return Be(i,(c,d)=>{if(c)return t(c);l[e].content?l[e].content=d:l[e]=d,t(null,d)});if(/^https?:\/\//i.test(i.path||i.href))return r=ca(i.path||i.href),Be(r,t);if(/^data:/i.test(i.path||i.href)){let c=O.exports.parseDataURI(i.path||i.href);return!c||!c.data?t(null,Buffer.from(0)):t(null,c.data)}else if(i.path)return Be(la.createReadStream(i.path),t)}return typeof l[e].content=="string"&&!["utf8","usascii","ascii"].includes(n)&&(i=Buffer.from(l[e].content,n)),setImmediate(()=>t(null,i)),a};O.exports.assign=function(){let l=Array.from(arguments),e=l.shift()||{};return l.forEach(t=>{Object.keys(t||{}).forEach(a=>{["tls","auth"].includes(a)&&t[a]&&typeof t[a]=="object"?(e[a]||(e[a]={}),Object.keys(t[a]).forEach(i=>{e[a][i]=t[a][i]})):e[a]=t[a]})}),e};O.exports.encodeXText=l=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(l))return l;let e=Buffer.from(l),t="";for(let a=0,i=e.length;a<i;a++){let r=e[a];r<33||r>126||r===43||r===61?t+="+"+(r<16?"0":"")+r.toString(16).toUpperCase():t+=String.fromCharCode(r)}return t};function Be(l,e){let t=!1,a=[],i=0;l.on("error",r=>{t||(t=!0,e(r))}),l.on("readable",()=>{let r;for(;(r=l.read())!==null;)a.push(r),i+=r.length}),l.on("end",()=>{if(t)return;t=!0;let r;try{r=Buffer.concat(a,i)}catch(n){return e(n)}e(null,r)})}function ma(l){let e=0,t=new Map;l.forEach(r=>{r.length>e&&(e=r.length)}),l.forEach(r=>{let n=r.toUpperCase();n.length<e&&(n+=" ".repeat(e-n.length)),t.set(r,n)});let a=(r,n,c,...d)=>{let p="";n&&(n.tnx==="server"?p="S: ":n.tnx==="client"&&(p="C: "),n.sid&&(p="["+n.sid+"] "+p),n.cid&&(p="[#"+n.cid+"] "+p)),c=oa.format(c,...d),c.split(/\r?\n/).forEach(m=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),t.get(r),p+m)})},i={};return l.forEach(r=>{i[r]=a.bind(null,r)}),i}});var Re=A((yc,es)=>{"use strict";var ua=S("path"),Jt="application/octet-stream",ha="bin",Wt=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/geo+json","geojson"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),Zt=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);es.exports={detectMimeType(l){if(!l)return Jt;let e=ua.parse(l),t=(e.ext.substr(1)||e.name||"").split("?").shift().trim().toLowerCase(),a=Jt;return Zt.has(t)&&(a=Zt.get(t)),Array.isArray(a)?a[0]:a},detectExtension(l){if(!l)return ha;let e=(l||"").toLowerCase().trim().split("/"),t=e.shift().trim(),a=e.join("/").trim();if(Wt.has(t+"/"+a)){let i=Wt.get(t+"/"+a);return Array.isArray(i)?i[0]:i}switch(t){case"text":return"txt";default:return"bin"}}}});var Ue=A((wc,ls)=>{"use strict";var ss="-",fa=/^xn--/,ga=/[^\0-\x7F]/,xa=/[\x2E\u3002\uFF0E\uFF61]/g,va={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ze=36-1,Z=Math.floor,Oe=String.fromCharCode;function oe(l){throw new RangeError(va[l])}function ba(l,e){let t=[],a=l.length;for(;a--;)t[a]=e(l[a]);return t}function is(l,e){let t=l.split("@"),a="";t.length>1&&(a=t[0]+"@",l=t[1]),l=l.replace(xa,".");let i=l.split("."),r=ba(i,e).join(".");return a+r}function as(l){let e=[],t=0,a=l.length;for(;t<a;){let i=l.charCodeAt(t++);if(i>=55296&&i<=56319&&t<a){let r=l.charCodeAt(t++);(r&64512)==56320?e.push(((i&1023)<<10)+(r&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}var ya=l=>String.fromCodePoint(...l),wa=function(l){return l>=48&&l<58?26+(l-48):l>=65&&l<91?l-65:l>=97&&l<123?l-97:36},ts=function(l,e){return l+22+75*(l<26)-((e!=0)<<5)},rs=function(l,e,t){let a=0;for(l=t?Z(l/700):l>>1,l+=Z(l/e);l>ze*26>>1;a+=36)l=Z(l/ze);return Z(a+(ze+1)*l/(l+38))},ns=function(l){let e=[],t=l.length,a=0,i=128,r=72,n=l.lastIndexOf(ss);n<0&&(n=0);for(let c=0;c<n;++c)l.charCodeAt(c)>=128&&oe("not-basic"),e.push(l.charCodeAt(c));for(let c=n>0?n+1:0;c<t;){let d=a;for(let m=1,f=36;;f+=36){c>=t&&oe("invalid-input");let u=wa(l.charCodeAt(c++));u>=36&&oe("invalid-input"),u>Z((2147483647-a)/m)&&oe("overflow"),a+=u*m;let g=f<=r?1:f>=r+26?26:f-r;if(u<g)break;let y=36-g;m>Z(2147483647/y)&&oe("overflow"),m*=y}let p=e.length+1;r=rs(a-d,p,d==0),Z(a/p)>2147483647-i&&oe("overflow"),i+=Z(a/p),a%=p,e.splice(a++,0,i)}return String.fromCodePoint(...e)},os=function(l){let e=[];l=as(l);let t=l.length,a=128,i=0,r=72;for(let d of l)d<128&&e.push(Oe(d));let n=e.length,c=n;for(n&&e.push(ss);c<t;){let d=2147483647;for(let m of l)m>=a&&m<d&&(d=m);let p=c+1;d-a>Z((2147483647-i)/p)&&oe("overflow"),i+=(d-a)*p,a=d;for(let m of l)if(m<a&&++i>2147483647&&oe("overflow"),m===a){let f=i;for(let u=36;;u+=36){let g=u<=r?1:u>=r+26?26:u-r;if(f<g)break;let y=f-g,_=36-g;e.push(Oe(ts(g+y%_,0))),f=Z(y/_)}e.push(Oe(ts(f,0))),r=rs(i,p,c===n),i=0,++c}++i,++a}return e.join("")},Na=function(l){return is(l,function(e){return fa.test(e)?ns(e.slice(4).toLowerCase()):e})},_a=function(l){return is(l,function(e){return ga.test(e)?"xn--"+os(e):e})},Sa={version:"2.3.1",ucs2:{decode:as,encode:ya},decode:ns,encode:os,toASCII:_a,toUnicode:Na};ls.exports=Sa});var Ve=A((Nc,cs)=>{"use strict";var Ca=S("stream").Transform;function He(l){return typeof l=="string"&&(l=Buffer.from(l,"utf-8")),l.toString("base64")}function Fe(l,e){if(l=(l||"").toString(),e=e||76,l.length<=e)return l;let t=[],a=0,i=e*1024;for(;a<l.length;){let r=l.substr(a,i).replace(new RegExp(".{"+e+"}","g"),`$&\r
`).trim();t.push(r),a+=i}return t.join(`\r
`).trim()}var $e=class extends Ca{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,t,a){if(t!=="buffer"&&(e=Buffer.from(e,t)),!e||!e.length)return setImmediate(a);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let i=this._curLine+He(e);if(this.options.lineLength){i=Fe(i,this.options.lineLength);let r=i.lastIndexOf(`
`);r<0?(this._curLine=i,i=""):r===i.length-1?this._curLine="":(this._curLine=i.substr(r+1),i=i.substr(0,r+1))}i&&(this.outputBytes+=i.length,this.push(Buffer.from(i,"ascii"))),setImmediate(a)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=He(this._remainingBytes)),this._curLine&&(this._curLine=Fe(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}};cs.exports={encode:He,wrap:Fe,Encoder:$e}});var Ge=A((_c,ps)=>{"use strict";var Ea=S("stream").Transform;function Ye(l){typeof l=="string"&&(l=Buffer.from(l,"utf-8"));let e=[[9],[10],[13],[32,60],[62,126]],t="",a;for(let i=0,r=l.length;i<r;i++){if(a=l[i],ja(a,e)&&!((a===32||a===9)&&(i===r-1||l[i+1]===10||l[i+1]===13))){t+=String.fromCharCode(a);continue}t+="="+(a<16?"0":"")+a.toString(16).toUpperCase()}return t}function ds(l,e){if(l=(l||"").toString(),e=e||76,l.length<=e)return l;let t=0,a=l.length,i,r,n,c=Math.floor(e/3),d="";for(;t<a;){if(n=l.substr(t,e),i=n.match(/\r\n/)){n=n.substr(0,i.index+i[0].length),d+=n,t+=n.length;continue}if(n.substr(-1)===`
`){d+=n,t+=n.length;continue}else if(i=n.substr(-c).match(/\n.*?$/)){n=n.substr(0,n.length-(i[0].length-1)),d+=n,t+=n.length;continue}else if(n.length>e-c&&(i=n.substr(-c).match(/[ \t.,!?][^ \t.,!?]*$/)))n=n.substr(0,n.length-(i[0].length-1));else if(n.match(/[=][\da-f]{0,2}$/i))for((i=n.match(/[=][\da-f]{0,1}$/i))&&(n=n.substr(0,n.length-i[0].length));n.length>3&&n.length<a-t&&!n.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(i=n.match(/[=][\da-f]{2}$/gi))&&(r=parseInt(i[0].substr(1,2),16),!(r<128||(n=n.substr(0,n.length-3),r>=192))););t+n.length<a&&n.substr(-1)!==`
`?(n.length===e&&n.match(/[=][\da-f]{2}$/i)?n=n.substr(0,n.length-3):n.length===e&&(n=n.substr(0,n.length-1)),t+=n.length,n+=`=\r
`):t+=n.length,d+=n}return d}function ja(l,e){for(let t=e.length-1;t>=0;t--)if(e[t].length&&(e[t].length===1&&l===e[t][0]||e[t].length===2&&l>=e[t][0]&&l<=e[t][1]))return!0;return!1}var Ke=class extends Ea{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,t,a){let i;if(t!=="buffer"&&(e=Buffer.from(e,t)),!e||!e.length)return a();this.inputBytes+=e.length,this.options.lineLength?(i=this._curLine+Ye(e),i=ds(i,this.options.lineLength),i=i.replace(/(^|\n)([^\n]*)$/,(r,n,c)=>(this._curLine=c,n)),i&&(this.outputBytes+=i.length,this.push(i))):(i=Ye(e),this.outputBytes+=i.length,this.push(i,"ascii")),a()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}};ps.exports={encode:Ye,wrap:ds,Encoder:Ke}});var ve=A((Sc,us)=>{"use strict";var xe=Ve(),ka=Ge(),ms=Re();us.exports={isPlainText(l,e){return!(typeof l!="string"||(e?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(l))},hasLongerLines(l,e){return l.length>128*1024?!0:new RegExp("^.{"+(e+1)+",}","m").test(l)},encodeWord(l,e,t){e=(e||"Q").toString().toUpperCase().trim().charAt(0),t=t||0;let a,i="UTF-8";if(t&&t>7+i.length&&(t-=7+i.length),e==="Q"?a=ka.encode(l).replace(/[^a-z0-9!*+\-/=]/gi,r=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return r===" "?"_":"="+(n.length===1?"0"+n:n)}):e==="B"&&(a=typeof l=="string"?l:xe.encode(l),t=t?Math.max(3,(t-t%4)/4*3):0),t&&(e!=="B"?a:xe.encode(l)).length>t)if(e==="Q")a=this.splitMimeEncodedString(a,t).join("?= =?"+i+"?"+e+"?");else{let r=[],n="";for(let c=0,d=a.length;c<d;c++){let p=a.charAt(c);/[\ud83c\ud83d\ud83e]/.test(p)&&c<d-1&&(p+=a.charAt(++c)),Buffer.byteLength(n+p)<=t||c===0?n+=p:(r.push(xe.encode(n)),n=p)}n&&r.push(xe.encode(n)),r.length>1?a=r.join("?= =?"+i+"?"+e+"?"):a=r.join("")}else e==="B"&&(a=xe.encode(l));return"=?"+i+"?"+e+"?"+a+(a.substr(-2)==="?="?"":"?=")},encodeWords(l,e,t,a){t=t||0;let i,r=l.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!r)return l;if(a)return this.encodeWord(l,e,t);let n=l.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!n)return l;let c=r.index+(r[0].match(/[^\s]/)||{index:0}).index,d=n.index+(n[1]||"").length;return i=(c?l.substr(0,c):"")+this.encodeWord(l.substring(c,d),e||"Q",t)+(d<l.length?l.substr(d):""),i},buildHeaderValue(l){let e=[];return Object.keys(l.params||{}).forEach(t=>{let a=l.params[t];!this.isPlainText(a,!0)||a.length>=75?this.buildHeaderParam(t,a,50).forEach(i=>{!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(i.value)||i.key.substr(-1)==="*"?e.push(i.key+"="+i.value):e.push(i.key+"="+JSON.stringify(i.value))}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(a)?e.push(t+"="+JSON.stringify(a)):e.push(t+"="+a)}),l.value+(e.length?"; "+e.join("; "):"")},buildHeaderParam(l,e,t){let a=[],i=typeof e=="string"?e:(e||"").toString(),r,n,c,d,p=0,m,f;if(t=t||50,this.isPlainText(e,!0)){if(i.length<=t)return[{key:l,value:i}];i=i.replace(new RegExp(".{"+t+"}","g"),u=>(a.push({line:u}),"")),i&&a.push({line:i})}else{if(/[\uD800-\uDBFF]/.test(i)){for(r=[],m=0,f=i.length;m<f;m++)n=i.charAt(m),c=n.charCodeAt(0),c>=55296&&c<=56319&&m<f-1?(n+=i.charAt(m+1),r.push(n),m++):r.push(n);i=r}d="utf-8''";let u=!0;for(p=0,m=0,f=i.length;m<f;m++){if(n=i[m],u)n=this.safeEncodeURIComponent(n);else if(n=n===" "?n:this.safeEncodeURIComponent(n),n!==i[m])if((this.safeEncodeURIComponent(d)+n).length>=t)a.push({line:d,encoded:u}),d="",p=m-1;else{u=!0,m=p,d="";continue}(d+n).length>=t?(a.push({line:d,encoded:u}),d=n=i[m]===" "?" ":this.safeEncodeURIComponent(i[m]),n===i[m]?(u=!1,p=m-1):u=!0):d+=n}d&&a.push({line:d,encoded:u})}return a.map((u,g)=>({key:l+"*"+g+(u.encoded?"*":""),value:u.line}))},parseHeaderValue(l){let e={value:!1,params:{}},t=!1,a="",i="value",r=!1,n=!1,c;for(let d=0,p=l.length;d<p;d++)if(c=l.charAt(d),i==="key"){if(c==="="){t=a.trim().toLowerCase(),i="value",a="";continue}a+=c}else{if(n)a+=c;else if(c==="\\"){n=!0;continue}else r&&c===r?r=!1:!r&&c==='"'?r=c:!r&&c===";"?(t===!1?e.value=a.trim():e.params[t]=a.trim(),i="key",a=""):a+=c;n=!1}return i==="value"?t===!1?e.value=a.trim():e.params[t]=a.trim():a.trim()&&(e.params[a.trim().toLowerCase()]=""),Object.keys(e.params).forEach(d=>{let p,m,f,u;(f=d.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(p=d.substr(0,f.index),m=Number(f[2]||f[3])||0,(!e.params[p]||typeof e.params[p]!="object")&&(e.params[p]={charset:!1,values:[]}),u=e.params[d],m===0&&f[0].substr(-1)==="*"&&(f=u.match(/^([^']*)'[^']*'(.*)$/))&&(e.params[p].charset=f[1]||"iso-8859-1",u=f[2]),e.params[p].values[m]=u,delete e.params[d])}),Object.keys(e.params).forEach(d=>{let p;e.params[d]&&Array.isArray(e.params[d].values)&&(p=e.params[d].values.map(m=>m||"").join(""),e.params[d].charset?e.params[d]="=?"+e.params[d].charset+"?Q?"+p.replace(/[=?_\s]/g,m=>{let f=m.charCodeAt(0).toString(16);return m===" "?"_":"%"+(f.length<2?"0":"")+f}).replace(/%/g,"=")+"?=":e.params[d]=p)}),e},detectExtension:l=>ms.detectExtension(l),detectMimeType:l=>ms.detectMimeType(l),foldLines(l,e,t){l=(l||"").toString(),e=e||76;let a=0,i=l.length,r="",n,c;for(;a<i;){if(n=l.substr(a,e),n.length<e){r+=n;break}if(c=n.match(/^[^\n\r]*(\r?\n|\r)/)){n=c[0],r+=n,a+=n.length;continue}else(c=n.match(/(\s+)[^\s]*$/))&&c[0].length-(t?(c[1]||"").length:0)<n.length?n=n.substr(0,n.length-(c[0].length-(t?(c[1]||"").length:0))):(c=l.substr(a+n.length).match(/^[^\s]+(\s*)/))&&(n=n+c[0].substr(0,c[0].length-(t?0:(c[1]||"").length)));r+=n,a+=n.length,a<i&&(r+=`\r
`)}return r},splitMimeEncodedString:(l,e)=>{let t,a,i,r,n=[];for(e=Math.max(e||0,12);l.length;){for(t=l.substr(0,e),(a=t.match(/[=][0-9A-F]?$/i))&&(t=t.substr(0,a.index)),r=!1;!r;)r=!0,(a=l.substr(t.length).match(/^[=]([0-9A-F]{2})/i))&&(i=parseInt(a[1],16),i<194&&i>127&&(t=t.substr(0,t.length-3),r=!1));t.length&&n.push(t),l=l.substr(t.length)}return n},encodeURICharComponent:l=>{let e="",t=l.charCodeAt(0).toString(16).toUpperCase();if(t.length%2&&(t="0"+t),t.length>2)for(let a=0,i=t.length/2;a<i;a++)e+="%"+t.substr(a,2);else e+="%"+t;return e},safeEncodeURIComponent(l){l=(l||"").toString();try{l=encodeURIComponent(l)}catch{return l.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return l.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,e=>this.encodeURICharComponent(e))}}});var gs=A((Cc,fs)=>{"use strict";function Aa(l){let e=!1,t="text",a,i=[],r={address:[],comment:[],group:[],text:[]},n,c;for(n=0,c=l.length;n<c;n++){let d=l[n],p=n?l[n-1]:null;if(d.type==="operator")switch(d.value){case"<":t="address";break;case"(":t="comment";break;case":":t="group",e=!0;break;default:t="text";break}else d.value&&(t==="address"&&(d.value=d.value.replace(/^[^<]*<\s*/,"")),p&&p.noBreak&&r[t].length?r[t][r[t].length-1]+=d.value:r[t].push(d.value))}if(!r.text.length&&r.comment.length&&(r.text=r.comment,r.comment=[]),e)r.text=r.text.join(" "),i.push({name:r.text||a&&a.name,group:r.group.length?hs(r.group.join(",")):[]});else{if(!r.address.length&&r.text.length){for(n=r.text.length-1;n>=0;n--)if(r.text[n].match(/^[^@\s]+@[^@\s]+$/)){r.address=r.text.splice(n,1);break}let d=function(p){return r.address.length?p:(r.address=[p.trim()]," ")};if(!r.address.length)for(n=r.text.length-1;n>=0&&(r.text[n]=r.text[n].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,d).trim(),!r.address.length);n--);}if(!r.text.length&&r.comment.length&&(r.text=r.comment,r.comment=[]),r.address.length>1&&(r.text=r.text.concat(r.address.splice(1))),r.text=r.text.join(" "),r.address=r.address.join(" "),!r.address&&e)return[];a={address:r.address||r.text||"",name:r.text||r.address||""},a.address===a.name&&((a.address||"").match(/@/)?a.name="":a.address=""),i.push(a)}return i}var Qe=class{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e=[];for(let t=0,a=this.str.length;t<a;t++){let i=this.str.charAt(t),r=t<a-1?this.str.charAt(t+1):null;this.checkChar(i,r)}return this.list.forEach(t=>{t.value=(t.value||"").toString().trim(),t.value&&e.push(t)}),e}checkChar(e,t){if(!this.escaped){if(e===this.operatorExpecting){this.node={type:"operator",value:e},t&&![" ","	","\r",`
`,",",";"].includes(t)&&(this.node.noBreak=!0),this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&e in this.operators){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&e==="\\"){this.escaped=!0;return}}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),e===`
`&&(e=" "),(e.charCodeAt(0)>=33||[" ","	"].includes(e))&&(this.node.value+=e),this.escaped=!1}};function hs(l,e){e=e||{};let a=new Qe(l).tokenize(),i=[],r=[],n=[];if(a.forEach(c=>{c.type==="operator"&&(c.value===","||c.value===";")?(r.length&&i.push(r),r=[]):r.push(c)}),r.length&&i.push(r),i.forEach(c=>{c=Aa(c),c.length&&(n=n.concat(c))}),e.flatten){let c=[],d=p=>{p.forEach(m=>{if(m.group)return d(m.group);c.push(m)})};return d(n),c}return n}fs.exports=hs});var vs=A((Ec,xs)=>{"use strict";var Ta=S("stream").Transform,Xe=class extends Ta{constructor(){super(),this.lastByte=!1}_transform(e,t,a){e.length&&(this.lastByte=e[e.length-1]),this.push(e),a()}_flush(e){return this.lastByte===10?e():this.lastByte===13?(this.push(Buffer.from(`
`)),e()):(this.push(Buffer.from(`\r
`)),e())}};xs.exports=Xe});var We=A((jc,bs)=>{"use strict";var Ia=S("stream"),La=Ia.Transform,Je=class extends La{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,t,a){let i,r=0;for(let n=0,c=e.length;n<c;n++)e[n]===10&&(n&&e[n-1]!==13||!n&&this.lastByte!==13)&&(n>r&&(i=e.slice(r,n),this.push(i)),this.push(Buffer.from(`\r
`)),r=n+1);r&&r<e.length?(i=e.slice(r),this.push(i)):r||this.push(e),this.lastByte=e[e.length-1],a()}};bs.exports=Je});var ws=A((kc,ys)=>{"use strict";var Da=S("stream"),Pa=Da.Transform,Ze=class extends Pa{constructor(e){super(e),this.options=e||{}}_transform(e,t,a){let i,r=0;for(let n=0,c=e.length;n<c;n++)e[n]===13&&(i=e.slice(r,n),r=n+1,this.push(i));r&&r<e.length?(i=e.slice(r),this.push(i)):r||this.push(e),a()}};ys.exports=Ze});var tt=A((Ac,Ns)=>{"use strict";var et=S("crypto"),qa=S("fs"),Ma=Ue(),be=S("stream").PassThrough,Ba=H(),Q=ve(),Ra=Ge(),za=Ve(),Oa=gs(),Ua=fe(),Ha=vs(),Fa=We(),$a=ws(),ye=class{constructor(e,t){this.nodeCounter=0,t=t||{},this.baseBoundary=t.baseBoundary||et.randomBytes(8).toString("hex"),this.boundaryPrefix=t.boundaryPrefix||"--_NmP",this.disableFileAccess=!!t.disableFileAccess,this.disableUrlAccess=!!t.disableUrlAccess,this.normalizeHeaderKey=t.normalizeHeaderKey,this.date=new Date,this.rootNode=t.rootNode||this,this.keepBcc=!!t.keepBcc,t.filename&&(this.filename=t.filename,e||(e=Q.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(t.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=t.parentNode,this.hostname=t.hostname,this.newline=t.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],e&&this.setHeader("Content-Type",e)}createChild(e,t){!t&&typeof e=="object"&&(t=e,e=void 0);let a=new ye(e,t);return this.appendChild(a),a}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach((t,a)=>{t===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[a]=e)}),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,t){let a=!1,i;if(!t&&e&&typeof e=="object")return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach(r=>{this.setHeader(r.key,r.value)}):Object.keys(e).forEach(r=>{this.setHeader(r,e[r])}),this;e=this._normalizeHeaderKey(e),i={key:e,value:t};for(let r=0,n=this._headers.length;r<n;r++)this._headers[r].key===e&&(a?(this._headers.splice(r,1),r--,n--):(this._headers[r]=i,a=!0));return a||this._headers.push(i),this}addHeader(e,t){return!t&&e&&typeof e=="object"?(e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach(a=>{this.addHeader(a.key,a.value)}):Object.keys(e).forEach(a=>{this.addHeader(a,e[a])}),this):Array.isArray(t)?(t.forEach(a=>{this.addHeader(e,a)}),this):(this._headers.push({key:this._normalizeHeaderKey(e),value:t}),this)}getHeader(e){e=this._normalizeHeaderKey(e);for(let t=0,a=this._headers.length;t<a;t++)if(this._headers[t].key===e)return this._headers[t].value}setContent(e){return this.content=e,typeof this.content.pipe=="function"?(this._contentErrorHandler=t=>{this.content.removeListener("error",this._contentErrorHandler),this.content=t},this.content.once("error",this._contentErrorHandler)):typeof this.content=="string"&&(this._isPlainText=Q.isPlainText(this.content),this._isPlainText&&Q.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let t;e||(t=new Promise((c,d)=>{e=Ba.callbackPromise(c,d)}));let a=this.createReadStream(),i=[],r=0,n=!1;return a.on("readable",()=>{let c;for(;(c=a.read())!==null;)i.push(c),r+=c.length}),a.once("error",c=>{if(!n)return n=!0,e(c)}),a.once("end",c=>{if(!n)return n=!0,c&&c.length&&(i.push(c),r+=c.length),e(null,Buffer.concat(i,r))}),t}getTransferEncoding(){let e=!1,t=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),(!e||!["base64","quoted-printable"].includes(e))&&(/^text\//i.test(t)?this._isPlainText&&!this._hasLongLines?e="7bit":typeof this.content=="string"||this.content instanceof Buffer?e=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64":e=this.textEncoding==="B"?"base64":"quoted-printable":/^(multipart|message)\//i.test(t)||(e=e||"base64"))),e}buildHeaders(){let e=this.getTransferEncoding(),t=[];if(e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let a=this._headers.length-2;a>=0;a--){let i=this._headers[a];i.key==="Content-Type"&&(this._headers.splice(a,1),this._headers.push(i))}}return this._headers.forEach(a=>{let i=a.key,r=a.value,n,c,d={};if(!(r&&typeof r=="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(i)&&(Object.keys(r).forEach(m=>{m!=="value"&&(d[m]=r[m])}),r=(r.value||"").toString(),!r.trim()))){if(d.prepared){d.foldLines?t.push(Q.foldLines(i+": "+r)):t.push(i+": "+r);return}switch(a.key){case"Content-Disposition":n=Q.parseHeaderValue(r),this.filename&&(n.params.filename=this.filename),r=Q.buildHeaderValue(n);break;case"Content-Type":n=Q.parseHeaderValue(r),this._handleContentType(n),n.value.match(/^text\/plain\b/)&&typeof this.content=="string"&&/[\u0080-\uFFFF]/.test(this.content)&&(n.params.charset="utf-8"),r=Q.buildHeaderValue(n),this.filename&&(c=this._encodeWords(this.filename),(c!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(c))&&(c='"'+c+'"'),r+="; name="+c);break;case"Bcc":if(!this.keepBcc)return;break}if(r=this._encodeHeaderValue(i,r),!!(r||"").toString().trim()){if(typeof this.normalizeHeaderKey=="function"){let m=this.normalizeHeaderKey(i,r);m&&typeof m=="string"&&m.length&&(i=m)}t.push(Q.foldLines(i+": "+r,76))}}}),t.join(`\r
`)}createReadStream(e){e=e||{};let t=new be(e),a=t,i;this.stream(t,e,r=>{if(r){a.emit("error",r);return}t.end()});for(let r=0,n=this._transforms.length;r<n;r++)i=typeof this._transforms[r]=="function"?this._transforms[r]():this._transforms[r],a.once("error",c=>{i.emit("error",c)}),a=a.pipe(i);i=new Ha,a.once("error",r=>{i.emit("error",r)}),a=a.pipe(i);for(let r=0,n=this._processFuncs.length;r<n;r++)i=this._processFuncs[r],a=i(a);if(this.newline){let n=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new Fa:new $a,c=a.pipe(n);return a.on("error",d=>c.emit("error",d)),c}return a}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,t,a){let i=this.getTransferEncoding(),r,n,c=!1,d=f=>{c||(c=!0,a(f))},p=()=>{let f=0,u=()=>{if(f>=this.childNodes.length)return e.write(`\r
--`+this.boundary+`--\r
`),d();let g=this.childNodes[f++];e.write((f>1?`\r
`:"")+"--"+this.boundary+`\r
`),g.stream(e,t,y=>{if(y)return d(y);setImmediate(u)})};if(this.multipart)setImmediate(u);else return d()},m=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return d(this.content);typeof this.content.pipe=="function"&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=u=>d(u),this.content.once("error",this._contentErrorHandler));let f=()=>{["quoted-printable","base64"].includes(i)?(r=new(i==="base64"?za:Ra).Encoder(t),r.pipe(e,{end:!1}),r.once("end",p),r.once("error",u=>d(u)),n=this._getStream(this.content),n.pipe(r)):(n=this._getStream(this.content),n.pipe(e,{end:!1}),n.once("end",p)),n.once("error",u=>d(u))};if(this.content._resolve){let u=[],g=0,y=!1,_=this._getStream(this.content);_.on("error",D=>{y||(y=!0,d(D))}),_.on("readable",()=>{let D;for(;(D=_.read())!==null;)u.push(D),g+=D.length}),_.on("end",()=>{y||(y=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(u,g),setImmediate(f))})}else setImmediate(f);return}else return setImmediate(p)};this._raw?setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return d(this._raw);typeof this._raw.pipe=="function"&&this._raw.removeListener("error",this._contentErrorHandler);let f=this._getStream(this._raw);f.pipe(e,{end:!1}),f.on("error",u=>e.emit("error",u)),f.on("end",p)}):(e.write(this.buildHeaders()+`\r
\r
`),setImmediate(m))}setEnvelope(e){let t;this._envelope={from:!1,to:[]},e.from&&(t=[],this._convertAddresses(this._parseAddresses(e.from),t),t=t.filter(i=>i&&i.address),t.length&&t[0]&&(this._envelope.from=t[0].address)),["to","cc","bcc"].forEach(i=>{e[i]&&this._convertAddresses(this._parseAddresses(e[i]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(i=>i.address).filter(i=>i);let a=["to","cc","bcc","from"];return Object.keys(e).forEach(i=>{a.includes(i)||(this._envelope[i]=e[i])}),this}getAddresses(){let e={};return this._headers.forEach(t=>{let a=t.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(a)&&(Array.isArray(e[a])||(e[a]=[]),this._convertAddresses(this._parseAddresses(t.value),e[a]))}),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach(t=>{let a=[];t.key==="From"||!e.from&&["Reply-To","Sender"].includes(t.key)?(this._convertAddresses(this._parseAddresses(t.value),a),a.length&&a[0]&&(e.from=a[0].address)):["To","Cc","Bcc"].includes(t.key)&&this._convertAddresses(this._parseAddresses(t.value),e.to)}),e.to=e.to.map(t=>t.address),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&typeof this._raw.pipe=="function"&&(this._contentErrorHandler=t=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=t},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let t;return e._resolvedValue?(t=new be,setImmediate(()=>{try{t.end(e._resolvedValue)}catch(a){t.emit("error",a)}}),t):typeof e.pipe=="function"?e:e&&typeof e.path=="string"&&!e.href?this.disableFileAccess?(t=new be,setImmediate(()=>t.emit("error",new Error("File access rejected for "+e.path))),t):qa.createReadStream(e.path):e&&typeof e.href=="string"?this.disableUrlAccess?(t=new be,setImmediate(()=>t.emit("error",new Error("Url access rejected for "+e.href))),t):Ua(e.href,{headers:e.httpHeaders}):(t=new be,setImmediate(()=>{try{t.end(e||"")}catch(a){t.emit("error",a)}}),t)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map(t=>t&&t.address?(t.address=this._normalizeAddress(t.address),t.name=t.name||"",[t]):Oa(t)))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,t=>t.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),e}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,t){switch(e=this._normalizeHeaderKey(e),e){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(t));case"Message-ID":case"In-Reply-To":case"Content-Id":return t=(t||"").toString().replace(/\r?\n|\r/g," "),t.charAt(0)!=="<"&&(t="<"+t),t.charAt(t.length-1)!==">"&&(t=t+">"),t;case"References":return t=[].concat.apply([],[].concat(t||"").map(a=>(a=(a||"").toString().replace(/\r?\n|\r/g," ").trim(),a.replace(/<[^>]*>/g,i=>i.replace(/\s/g,"")).split(/\s+/)))).map(a=>(a.charAt(0)!=="<"&&(a="<"+a),a.charAt(a.length-1)!==">"&&(a=a+">"),a)),t.join(" ").trim();case"Date":return Object.prototype.toString.call(t)==="[object Date]"?t.toUTCString().replace(/GMT/,"+0000"):(t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t));case"Content-Type":case"Content-Disposition":return(t||"").toString().replace(/\r?\n|\r/g," ");default:return t=(t||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(t)}}_convertAddresses(e,t){let a=[];return t=t||[],[].concat(e||[]).forEach(i=>{if(i.address)i.address=this._normalizeAddress(i.address),i.name?i.name&&a.push(`${this._encodeAddressName(i.name)} <${i.address}>`):a.push(i.address.indexOf(" ")>=0?`<${i.address}>`:`${i.address}`),i.address&&(t.filter(r=>r.address===i.address).length||t.push(i));else if(i.group){let r=(i.group.length?this._convertAddresses(i.group,t):"").trim();a.push(`${this._encodeAddressName(i.name)}:${r};`)}}),a.join(", ")}_normalizeAddress(e){e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let t=e.lastIndexOf("@");if(t<0)return e;let a=e.substr(0,t),i=e.substr(t+1),r;try{r=Ma.toASCII(i.toLowerCase())}catch{}return a.indexOf(" ")>=0&&(a.charAt(0)!=='"'&&(a='"'+a),a.substr(-1)!=='"'&&(a=a+'"')),`${a}@${r}`}_encodeAddressName(e){return/^[\w ]*$/.test(e)?e:/^[\x20-\x7e]*$/.test(e)?'"'+e.replace(/([\\"])/g,"\\$1")+'"':Q.encodeWord(e,this._getTextEncoding(e),52)}_encodeWords(e){return Q.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let t=this.textEncoding,a,i;return t||(i=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,a=(e.match(/[a-z]/gi)||[]).length,t=i<a?"Q":"B"),t}_generateMessageId(){return"<"+[2,2,2,6].reduce((e,t)=>e+"-"+et.randomBytes(t).toString("hex"),et.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}};Ns.exports=ye});var Ss=A((Tc,_s)=>{"use strict";var we=tt(),st=ve(),Va=H().parseDataURI,it=class{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(e=>/^text\/html\b/i.test(e.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw?this.message=new we("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(e=>{let t=e.replace(/-(\w)/g,(a,i)=>i.toUpperCase());this.mail[t]&&this.message.setHeader(e,this.mail[t])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let t,a,i=[].concat(this.mail.attachments||[]).map((r,n)=>{let c,d=/^message\//i.test(r.contentType);/^data:/i.test(r.path||r.href)&&(r=this._processDataUrl(r));let p=r.contentType||st.detectMimeType(r.filename||r.path||r.href||"bin"),m=/^image\//i.test(p),f=r.contentDisposition||(d||m&&r.cid?"inline":"attachment");return c={contentType:p,contentDisposition:f,contentTransferEncoding:"contentTransferEncoding"in r?r.contentTransferEncoding:"base64"},r.filename?c.filename=r.filename:!d&&r.filename!==!1&&(c.filename=(r.path||r.href||"").split("/").pop().split("?").shift()||"attachment-"+(n+1),c.filename.indexOf(".")<0&&(c.filename+="."+st.detectExtension(c.contentType))),/^https?:\/\//i.test(r.path)&&(r.href=r.path,r.path=void 0),r.cid&&(c.cid=r.cid),r.raw?c.raw=r.raw:r.path?c.content={path:r.path}:r.href?c.content={href:r.href,httpHeaders:r.httpHeaders}:c.content=r.content||"",r.encoding&&(c.encoding=r.encoding),r.headers&&(c.headers=r.headers),c});return this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?t=this.mail.icalEvent:t={content:this.mail.icalEvent},a={},Object.keys(t).forEach(r=>{a[r]=t[r]}),a.contentType="application/ics",a.headers||(a.headers={}),a.filename=a.filename||"invite.ics",a.headers["Content-Disposition"]="attachment",a.headers["Content-Transfer-Encoding"]="base64"),e?{attached:i.filter(r=>!r.cid).concat(a||[]),related:i.filter(r=>!!r.cid)}:{attached:i.concat(a||[]),related:[]}}getAlternatives(){let e=[],t,a,i,r,n,c;return this.mail.text&&(typeof this.mail.text=="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?t=this.mail.text:t={content:this.mail.text},t.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(typeof this.mail.watchHtml=="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?i=this.mail.watchHtml:i={content:this.mail.watchHtml},i.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(typeof this.mail.amp=="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?r=this.mail.amp:r={content:this.mail.amp},r.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?n=this.mail.icalEvent:n={content:this.mail.icalEvent},c={},Object.keys(n).forEach(d=>{c[d]=n[d]}),c.content&&typeof c.content=="object"&&(c.content._resolve=!0),c.filename=!1,c.contentType="text/calendar; charset=utf-8; method="+(c.method||"PUBLISH").toString().trim().toUpperCase(),c.headers||(c.headers={})),this.mail.html&&(typeof this.mail.html=="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?a=this.mail.html:a={content:this.mail.html},a.contentType="text/html; charset=utf-8"),[].concat(t||[]).concat(i||[]).concat(r||[]).concat(a||[]).concat(c||[]).concat(this.mail.alternatives||[]).forEach(d=>{let p;/^data:/i.test(d.path||d.href)&&(d=this._processDataUrl(d)),p={contentType:d.contentType||st.detectMimeType(d.filename||d.path||d.href||"txt"),contentTransferEncoding:d.contentTransferEncoding},d.filename&&(p.filename=d.filename),/^https?:\/\//i.test(d.path)&&(d.href=d.path,d.path=void 0),d.raw?p.raw=d.raw:d.path?p.content={path:d.path}:d.href?p.content={href:d.href}:p.content=d.content||"",d.encoding&&(p.encoding=d.encoding),d.headers&&(p.headers=d.headers),e.push(p)}),e}_createMixed(e){let t;return e?t=e.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):t=new we("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(t):this._useRelated&&this._createRelated(t),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(a=>{(!this._useRelated||a!==this._htmlNode)&&this._createContentNode(t,a)}),t}_createAlternative(e){let t;return e?t=e.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):t=new we("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(a=>{this._useRelated&&this._htmlNode===a?this._createRelated(t):this._createContentNode(t,a)}),t}_createRelated(e){let t;return e?t=e.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):t=new we('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(t,this._htmlNode),this._attachments.related.forEach(a=>this._createContentNode(t,a)),t}_createContentNode(e,t){t=t||{},t.content=t.content||"";let a,i=(t.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return e?a=e.createChild(t.contentType,{filename:t.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):a=new we(t.contentType,{filename:t.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),t.headers&&a.addHeader(t.headers),t.cid&&a.setHeader("Content-Id","<"+t.cid.replace(/[<>]/g,"")+">"),t.contentTransferEncoding?a.setHeader("Content-Transfer-Encoding",t.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(t.contentType)&&a.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(t.contentType)||t.contentDisposition)&&a.setHeader("Content-Disposition",t.contentDisposition||(t.cid&&/^image\//i.test(t.contentType)?"inline":"attachment")),typeof t.content=="string"&&!["utf8","usascii","ascii"].includes(i)&&(t.content=Buffer.from(t.content,i)),t.raw?a.setRaw(t.raw):a.setContent(t.content),a}_processDataUrl(e){let t;return(e.path||e.href).match(/^data:/)&&(t=Va(e.path||e.href)),t&&(e.content=t.data,e.contentType=e.contentType||t.contentType,"path"in e&&(e.path=!1),"href"in e&&(e.href=!1)),e}};_s.exports=it});var Es=A((Ic,Cs)=>{"use strict";var Ya=S("stream").Transform,at=class extends Ya{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let t=this.lastBytes.length,a=Math.min(e.length,t);for(let i=0,r=t-a;i<r;i++)this.lastBytes[i]=this.lastBytes[i+a];for(let i=1;i<=a;i++)this.lastBytes[t-i]=e[e.length-i]}checkHeaders(e){if(this.headersParsed)return!0;let t=this.lastBytes.length,a=0;this.curLinePos=0;for(let i=0,r=this.lastBytes.length+e.length;i<r;i++){let n;if(i<t?n=this.lastBytes[i]:n=e[i-t],n===10&&i){let c=i-1<t?this.lastBytes[i-1]:e[i-1-t],d=i>1?i-2<t?this.lastBytes[i-2]:e[i-2-t]:!1;if(c===10){this.headersParsed=!0,a=i-t+1,this.headerBytes+=a;break}else if(c===13&&d===10){this.headersParsed=!0,a=i-t+1,this.headerBytes+=a;break}}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,a)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>a){let i=e.slice(a);this.bodySize+=i.length,setImmediate(()=>this.push(i))}return!1}else this.headerBytes+=e.length,this.headerChunks.push(e);return this.updateLastBytes(e),!1}_transform(e,t,a){if(!e||!e.length)return a();typeof e=="string"&&(e=Buffer.from(e,t));let i;try{i=this.checkHeaders(e)}catch(r){return a(r)}i&&(this.bodySize+=e.length,this.push(e)),setImmediate(a)}_flush(e){if(this.headerChunks){let t=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=t.length,this.push(t),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let t=e.length-1;t>0;t--)/^\s/.test(e[t])&&(e[t-1]+=`
`+e[t],e.splice(t,1));return e.filter(t=>t.trim()).map(t=>({key:t.substr(0,t.indexOf(":")).trim().toLowerCase(),line:t}))}};Cs.exports=at});var ks=A((Lc,js)=>{"use strict";var Ka=S("stream").Transform,Ga=S("crypto"),rt=class extends Ka{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=Ga.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=e.debug?[]:!1}updateHash(e){let t,a="",i="file";for(let n=e.length-1;n>=0;n--){let c=e[n];if(!(i==="file"&&(c===10||c===13))){if(i==="file"&&(c===9||c===32))i="line";else if(!(i==="line"&&(c===9||c===32))){if((i==="file"||i==="line")&&(i="body",n===e.length-1))break}}if(n===0){if(i==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||i==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=e.toString("binary");return}else if(i==="line"||i==="file"){a=e.toString("binary"),e=!1;break}}if(i==="body"){a=e.slice(n+1).toString("binary"),e=e.slice(0,n+1);break}}let r=!!this.remainder;if(e&&!r){for(let n=0,c=e.length;n<c;n++)if(n&&e[n]===10&&e[n-1]!==13){r=!0;break}else if(n&&e[n]===13&&e[n-1]===32){r=!0;break}else if(n&&e[n]===32&&e[n-1]===32){r=!0;break}else if(e[n]===9){r=!0;break}}r?(t=this.remainder+(e?e.toString("binary"):""),this.remainder=a,t=t.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),e=Buffer.from(t,"binary")):a&&(this.remainder=a),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,t,a){if(!e||!e.length)return a();typeof e=="string"&&(e=Buffer.from(e,t)),this.updateHash(e),this.byteLength+=e.length,this.push(e),a()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from(`\r
`)),this.byteLength||this.push(Buffer.from(`\r
`)),this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),e()}};js.exports=rt});var Is=A((Dc,nt)=>{"use strict";var Qa=Ue(),Xa=ve(),Ja=S("crypto");nt.exports=(l,e,t,a)=>{a=a||{};let i="From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",r=a.headerFieldNames||i,n=As(l,r,a.skipFields),c=Wa(a.domainName,a.keySelector,n.fieldNames,e,t),d,p;n.headers+="dkim-signature:"+Ts(c),d=Ja.createSign(("rsa-"+e).toUpperCase()),d.update(n.headers);try{p=d.sign(a.privateKey,"base64")}catch{return!1}return c+p.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()};nt.exports.relaxedHeaders=As;function Wa(l,e,t,a,i){let r=["v=1","a=rsa-"+a,"c=relaxed/relaxed","d="+Qa.toASCII(l),"q=dns/txt","s="+e,"bh="+i,"h="+t].join("; ");return Xa.foldLines("DKIM-Signature: "+r,76)+`;\r
 b=`}function As(l,e,t){let a=new Set,i=new Set,r=new Map;(t||"").toLowerCase().split(":").forEach(d=>{i.add(d.trim())}),(e||"").toLowerCase().split(":").filter(d=>!i.has(d.trim())).forEach(d=>{a.add(d.trim())});for(let d=l.length-1;d>=0;d--){let p=l[d];a.has(p.key)&&!r.has(p.key)&&r.set(p.key,Ts(p.line))}let n=[],c=[];return a.forEach(d=>{r.has(d)&&(c.push(d),n.push(d+":"+r.get(d)))}),{headers:n.join(`\r
`)+`\r
`,fieldNames:c.join(":")}}function Ts(l){return l.substr(l.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}});var Ds=A((Pc,Ls)=>{"use strict";var Za=Es(),er=ks(),tr=Is(),ot=S("stream").PassThrough,lt=S("fs"),sr=S("path"),ir=S("crypto"),ar="sha256",rr=128*1024,ct=class{constructor(e,t,a,i){this.options=e||{},this.keys=t,this.cacheTreshold=Number(this.options.cacheTreshold)||rr,this.hashAlgo=this.options.hashAlgo||ar,this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?sr.join(this.cacheDir,"message."+Date.now()+"-"+ir.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=a,this.output=i,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",r=>{this.hasErrored=!0,this.cleanup(),i.emit("error",r)})}cleanup(){!this.cache||!this.cachePath||lt.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=lt.createReadStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.output.emit("error",e)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(this.output.write(e)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let e=0,t=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let a=this.keys[e++],i=tr(this.headers,this.hashAlgo,this.bodyHash,{domainName:a.domainName,keySelector:a.keySelector,privateKey:a.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return i&&this.output.write(Buffer.from(i+`\r
`)),setImmediate(t)};if(this.bodyHash&&this.headers)return t();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=lt.createWriteStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;this.relaxedBody.read()!==null;);}),this.hasErrored=!0,this.output.emit("error",e)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new Za,this.relaxedBody=new er({hashAlgo:this.hashAlgo}),this.parser.on("headers",e=>{this.headers=e}),this.relaxedBody.on("hash",e=>{this.bodyHash=e}),this.relaxedBody.on("readable",()=>{let e;if(!this.cache){for(;(e=this.relaxedBody.read())!==null;)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}},dt=class{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,t){let a=new ot,i=e,r=!1;Buffer.isBuffer(e)?(r=e,i=new ot):typeof e=="string"&&(r=Buffer.from(e),i=new ot);let n=this.options;t&&Object.keys(t).length&&(n={},Object.keys(this.options||{}).forEach(d=>{n[d]=this.options[d]}),Object.keys(t||{}).forEach(d=>{d in n||(n[d]=t[d])}));let c=new ct(n,this.keys,i,a);return setImmediate(()=>{c.signStream(),r&&setImmediate(()=>{i.end(r)})}),a}};Ls.exports=dt});var Rs=A((qc,Bs)=>{"use strict";var Ps=S("net"),qs=S("tls"),nr=S("url");function Ms(l,e,t,a){let i=nr.parse(l),r,n,c;r={host:i.hostname,port:Number(i.port)?Number(i.port):i.protocol==="https:"?443:80},i.protocol==="https:"?(r.rejectUnauthorized=!1,n=qs.connect.bind(qs)):n=Ps.connect.bind(Ps);let d=!1,p=f=>{if(!d){d=!0;try{c.destroy()}catch{}a(f)}},m=()=>{let f=new Error("Proxy socket timed out");f.code="ETIMEDOUT",p(f)};c=n(r,()=>{if(d)return;let f={Host:t+":"+e,Connection:"close"};i.auth&&(f["Proxy-Authorization"]="Basic "+Buffer.from(i.auth).toString("base64")),c.write("CONNECT "+t+":"+e+` HTTP/1.1\r
`+Object.keys(f).map(y=>y+": "+f[y]).join(`\r
`)+`\r
\r
`);let u="",g=y=>{let _,D;if(!d&&(u+=y.toString("binary"),_=u.match(/\r\n\r\n/))){if(c.removeListener("data",g),D=u.substr(_.index+_[0].length),u=u.substr(0,_.index),D&&c.unshift(Buffer.from(D,"binary")),d=!0,_=u.match(/^HTTP\/\d+\.\d+ (\d+)/i),!_||(_[1]||"").charAt(0)!=="2"){try{c.destroy()}catch{}return a(new Error("Invalid response from proxy"+(_&&": "+_[1]||"")))}return c.removeListener("error",p),c.removeListener("timeout",m),c.setTimeout(0),a(null,c)}};c.on("data",g)}),c.setTimeout(Ms.timeout||30*1e3),c.on("timeout",m),c.once("error",p)}Bs.exports=Ms});var Us=A((Mc,Os)=>{"use strict";var zs=H(),or=tt(),pe=ve(),pt=class{constructor(e,t){this.mailer=e,this.data={},this.message=null,t=t||{};let a=e.options||{},i=e._defaults||{};Object.keys(t).forEach(r=>{this.data[r]=t[r]}),this.data.headers=this.data.headers||{},Object.keys(i).forEach(r=>{r in this.data?r==="headers"&&Object.keys(i.headers).forEach(n=>{n in this.data.headers||(this.data.headers[n]=i.headers[n])}):this.data[r]=i[r]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(r=>{r in a&&(this.data[r]=a[r])})}resolveContent(...e){return zs.resolveContent(...e)}resolveAll(e){let t=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((d,p)=>{t.push([this.data.alternatives,p])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((d,p)=>{d.filename||(d.filename=(d.path||d.href||"").split("/").pop().split("?").shift()||"attachment-"+(p+1),d.filename.indexOf(".")<0&&(d.filename+="."+pe.detectExtension(d.contentType))),d.contentType||(d.contentType=pe.detectMimeType(d.filename||d.path||d.href||"bin")),t.push([this.data.attachments,p])});let a=new or;["from","to","cc","bcc","sender","replyTo"].forEach(d=>{let p;this.message?p=[].concat(a._parseAddresses(this.message.getHeader(d==="replyTo"?"reply-to":d))||[]):this.data[d]&&(p=[].concat(a._parseAddresses(this.data[d])||[])),p&&p.length?this.data[d]=p:d in this.data&&(this.data[d]=null)}),["from","sender"].forEach(d=>{this.data[d]&&(this.data[d]=this.data[d].shift())});let n=0,c=()=>{if(n>=t.length)return e(null,this.data);let d=t[n++];if(!d[0]||!d[0][d[1]])return c();zs.resolveContent(...d,(p,m)=>{if(p)return e(p);let f={content:m};d[0][d[1]]&&typeof d[0][d[1]]=="object"&&!Buffer.isBuffer(d[0][d[1]])&&Object.keys(d[0][d[1]]).forEach(u=>{!(u in f)&&!["content","path","href","raw"].includes(u)&&(f[u]=d[0][d[1]][u])}),d[0][d[1]]=f,c()})};setImmediate(()=>c())}normalize(e){let t=this.data.envelope||this.message.getEnvelope(),a=this.message.messageId();this.resolveAll((i,r)=>i?e(i):(r.envelope=t,r.messageId=a,["html","text","watchHtml","amp"].forEach(n=>{r[n]&&r[n].content&&(typeof r[n].content=="string"?r[n]=r[n].content:Buffer.isBuffer(r[n].content)&&(r[n]=r[n].content.toString()))}),r.icalEvent&&Buffer.isBuffer(r.icalEvent.content)&&(r.icalEvent.content=r.icalEvent.content.toString("base64"),r.icalEvent.encoding="base64"),r.alternatives&&r.alternatives.length&&r.alternatives.forEach(n=>{n&&n.content&&Buffer.isBuffer(n.content)&&(n.content=n.content.toString("base64"),n.encoding="base64")}),r.attachments&&r.attachments.length&&r.attachments.forEach(n=>{n&&n.content&&Buffer.isBuffer(n.content)&&(n.content=n.content.toString("base64"),n.encoding="base64")}),r.normalizedHeaders={},Object.keys(r.headers||{}).forEach(n=>{let c=[].concat(r.headers[n]||[]).shift();c=c&&c.value||c,c&&(["references","in-reply-to","message-id","content-id"].includes(n)&&(c=this.message._encodeHeaderValue(n,c)),r.normalizedHeaders[n]=c)}),r.list&&typeof r.list=="object"&&this._getListHeaders(r.list).forEach(c=>{r.normalizedHeaders[c.key]=c.value.map(d=>d&&d.value||d).join(", ")}),r.references&&(r.normalizedHeaders.references=this.message._encodeHeaderValue("references",r.references)),r.inReplyTo&&(r.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",r.inReplyTo)),e(null,r)))}setMailerHeader(){!this.message||!this.data.xMailer||this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!(!this.message||!this.data.priority))switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break;default:}}setListHeaders(){!this.message||!this.data.list||typeof this.data.list!="object"||this.data.list&&typeof this.data.list=="object"&&this._getListHeaders(this.data.list).forEach(e=>{e.value.forEach(t=>{this.message.addHeader(e.key,t)})})}_getListHeaders(e){return Object.keys(e).map(t=>({key:"list-"+t.toLowerCase().trim(),value:[].concat(e[t]||[]).map(a=>({prepared:!0,foldLines:!0,value:[].concat(a||[]).map(i=>{if(typeof i=="string"&&(i={url:i}),i&&i.url){if(t.toLowerCase().trim()==="id"){let n=i.comment||"";return pe.isPlainText(n)?n='"'+n+'"':n=pe.encodeWord(n),(i.comment?n+" ":"")+this._formatListUrl(i.url).replace(/^<[^:]+\/{,2}/,"")}let r=i.comment||"";return pe.isPlainText(r)||(r=pe.encodeWord(r)),this._formatListUrl(i.url)+(i.comment?" ("+r+")":"")}return""}).filter(i=>i).join(", ")}))}))}_formatListUrl(e){return e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e)?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}};Os.exports=pt});var Vs=A((Bc,$s)=>{"use strict";var lr=S("events"),Hs=H(),cr=Re(),dr=Ss(),Fs=Ds(),pr=Rs(),mr=S("util"),ur=S("url"),mt=G(),hr=Us(),fr=S("net"),gr=S("dns"),xr=S("crypto"),ut=class extends lr{constructor(e,t,a){super(),this.options=t||{},this._defaults=a||{},this._defaultPlugins={compile:[(...i)=>this._convertDataImages(...i)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new Fs(this.options.dkim):!1,this.transporter=e,this.transporter.mailer=this,this.logger=Hs.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on=="function"&&(this.transporter.on("log",i=>{this.logger.debug({tnx:"transport"},"%s: %s",i.type,i.message)}),this.transporter.on("error",i=>{this.logger.error({err:i,tnx:"transport"},"Transport Error: %s",i.message),this.emit("error",i)}),this.transporter.on("idle",(...i)=>{this.emit("idle",...i)})),["close","isIdle","verify"].forEach(i=>{this[i]=(...r)=>typeof this.transporter[i]=="function"?(i==="verify"&&typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[i](...r)):(this.logger.warn({tnx:"transport",methodName:i},"Non existing method %s called for transport",i),!1)}),this.options.proxy&&typeof this.options.proxy=="string"&&this.setupProxy(this.options.proxy)}use(e,t){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(t):this._userPlugins[e]=[t],this}sendMail(e,t=null){let a;t||(a=new Promise((r,n)=>{t=Hs.callbackPromise(r,n)})),typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let i=new hr(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",i,r=>{if(r)return this.logger.error({err:r,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",r.message),t(r);i.message=new dr(i.data).compile(),i.setMailerHeader(),i.setPriorityHeaders(),i.setListHeaders(),this._processPlugins("stream",i,n=>{if(n)return this.logger.error({err:n,tnx:"plugin",action:"stream"},"PluginStream Error: %s",n.message),t(n);(i.data.dkim||this.dkim)&&i.message.processFunc(c=>{let d=i.data.dkim?new Fs(i.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:i.message.messageId(),dkimDomains:d.keys.map(p=>p.keySelector+"."+p.domainName).join(", ")},"Signing outgoing message with %s keys",d.keys.length),d.sign(c,i.data._dkim)}),this.transporter.send(i,(...c)=>{c[0]&&this.logger.error({err:c[0],tnx:"transport",action:"send"},"Send Error: %s",c[0].message),t(...c)})})}),a}getVersionString(){return mr.format("%s (%s; +%s; %s/%s)",mt.name,mt.version,mt.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,t,a){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return a();let i=this._userPlugins[e]||[],r=this._defaultPlugins[e]||[];if(i.length&&this.logger.debug({tnx:"transaction",pluginCount:i.length,step:e},"Using %s plugins for %s",i.length,e),i.length+r.length===0)return a();let n=0,c="default",d=()=>{let p=c==="default"?r:i;if(n>=p.length)if(c==="default"&&i.length)c="user",n=0,p=i;else return a();let m=p[n++];m(t,f=>{if(f)return a(f);d()})};d()}setupProxy(e){let t=ur.parse(e);this.getSocket=(a,i)=>{let r=t.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+r))return this.meta.get("proxy_handler_"+r)(t,a,i);switch(r){case"http":case"https":pr(t.href,a.port,a.host,(n,c)=>n?i(n):i(null,{connection:c}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return i(new Error("Socks module not loaded"));let n=c=>{let d=!!this.meta.get("proxy_socks_module").SocksClient,p=d?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),m=Number(t.protocol.replace(/\D/g,""))||5,f={proxy:{ipaddress:c,port:Number(t.port),type:m},[d?"destination":"target"]:{host:a.host,port:a.port},command:"connect"};if(t.auth){let u=decodeURIComponent(t.auth.split(":").shift()),g=decodeURIComponent(t.auth.split(":").pop());d?(f.proxy.userId=u,f.proxy.password=g):m===4?f.userid=u:f.authentication={username:u,password:g}}p.createConnection(f,(u,g)=>u?i(u):i(null,{connection:g.socket||g}))};return fr.isIP(t.hostname)?n(t.hostname):gr.resolve(t.hostname,(c,d)=>{if(c)return i(c);n(Array.isArray(d)?d[0]:d)})}}i(new Error("Unknown proxy configuration"))}}_convertDataImages(e,t){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return t();e.resolveContent(e.data,"html",(a,i)=>{if(a)return t(a);let r=0;i=(i||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(n,c,d,p)=>{let m=xr.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:d,cid:m,filename:"image-"+ ++r+"."+cr.detectExtension(p)}),c+"cid:"+m}),e.data.html=i,t()})}set(e,t){return this.meta.set(e,t)}get(e){return this.meta.get(e)}};$s.exports=ut});var Ks=A((Rc,Ys)=>{"use strict";var vr=S("stream"),br=vr.Transform,ht=class extends br{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,t,a){let i=[],r=0,n,c,d=0,p;if(!e||!e.length)return a();for(typeof e=="string"&&(e=Buffer.from(e)),this.inByteCount+=e.length,n=0,c=e.length;n<c;n++)e[n]===46?(n&&e[n-1]===10||!n&&(!this.lastByte||this.lastByte===10))&&(p=e.slice(d,n+1),i.push(p),i.push(Buffer.from(".")),r+=p.length+1,d=n+1):e[n]===10&&(n&&e[n-1]!==13||!n&&this.lastByte!==13)&&(n>d?(p=e.slice(d,n),i.push(p),r+=p.length+2):r+=2,i.push(Buffer.from(`\r
`)),d=n+1);r?(d<e.length&&(p=e.slice(d),i.push(p),r+=p.length),this.outByteCount+=r,this.push(Buffer.concat(i,r))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],a()}_flush(e){let t;this.lastByte===10?t=Buffer.from(`.\r
`):this.lastByte===13?t=Buffer.from(`
.\r
`):t=Buffer.from(`\r
.\r
`),this.outByteCount+=t.length,this.push(t),e()}};Ys.exports=ht});var Ee=A((zc,Zs)=>{"use strict";var yr=G(),wr=S("events").EventEmitter,Gs=S("net"),Qs=S("tls"),Nr=S("os"),Xs=S("crypto"),_r=Ks(),Js=S("stream").PassThrough,se=H(),Sr=2*60*1e3,Ws=10*60*1e3,Cr=30*1e3,Er=30*1e3,ft=class extends wr{constructor(e){super(e),this.id=Xs.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=e||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:Gs.isIP(this.host)?!1:this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure>"u"&&this.port===465&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=se.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(t=>{let a=(t||"").toString().trim().toUpperCase();a&&this.customAuth.set(a,this.options.customAuth[t])}),this.version=yr.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=t=>this._onData(t),this._onSocketError=t=>this._onError(t,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if(typeof e=="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()});let i=this._isDestroyedMessage("connect");if(i)return e(this._formatError(i,"ECONNECTION",!1,"CONN"))}let t={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||Er};this.options.localAddress&&(t.localAddress=this.options.localAddress);let a=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||Sr),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,a(),this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(i=>{if(i){this._onError(new Error("Error initiating TLS - "+(i.message||i)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}else return this.options.socket?(this._socket=this.options.socket,se.resolveHostname(t,(i,r)=>{if(i)return setImmediate(()=>this._onError(i,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:r.host,cached:!!r.cached},"Resolved %s as %s [cache %s]",t.host,r.host,r.cached?"hit":"miss"),Object.keys(r).forEach(n=>{n.charAt(0)!=="_"&&r[n]&&(t[n]=r[n])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),a()}catch(n){return setImmediate(()=>this._onError(n,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(i=>{t[i]=this.options.tls[i]}),this.servername&&!t.servername&&(t.servername=this.servername),se.resolveHostname(t,(i,r)=>{if(i)return setImmediate(()=>this._onError(i,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:r.host,cached:!!r.cached},"Resolved %s as %s [cache %s]",t.host,r.host,r.cached?"hit":"miss"),Object.keys(r).forEach(n=>{n.charAt(0)!=="_"&&r[n]&&(t[n]=r[n])});try{this._socket=Qs.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),a()}catch(n){return setImmediate(()=>this._onError(n,"ECONNECTION",!1,"CONN"))}})):se.resolveHostname(t,(i,r)=>{if(i)return setImmediate(()=>this._onError(i,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:t.host,resolved:r.host,cached:!!r.cached},"Resolved %s as %s [cache %s]",t.host,r.host,r.cached?"hit":"miss"),Object.keys(r).forEach(n=>{n.charAt(0)!=="_"&&r[n]&&(t[n]=r[n])});try{this._socket=Gs.connect(t,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),a()}catch(n){return setImmediate(()=>this._onError(n,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";this.stage==="init"&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let t=this._socket&&this._socket.socket||this._socket;if(t&&!t.destroyed)try{t[e]()}catch{}this._destroy()}login(e,t){let a=this._isDestroyedMessage("login");if(a)return t(this._formatError(a,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials?this._authMethod="XOAUTH2":(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)&&(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()),this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod))this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return t(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let i=this.customAuth.get(this._authMethod),r,n=!1,c=()=>{n||(n=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0))},d=m=>{n||(n=!0,t(this._formatError(m,"EAUTH",r,"AUTH "+this._authMethod)))},p=i({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(m,f)=>{let u;return f||(u=new Promise((g,y)=>{f=se.callbackPromise(g,y)})),this._responseActions.push(g=>{r=g;let y=g.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),_={command:m,response:g};y?(_.status=Number(y[1])||0,y[2]&&(_.code=y[2]),_.text=g.substr(y[0].length)):(_.text=g,_.status=0),f(null,_)}),setImmediate(()=>this._sendCommand(m)),u},resolve:c,reject:d});p&&typeof p.catch=="function"&&p.then(c).catch(d);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,t);return;case"LOGIN":this._responseActions.push(i=>{this._actionAUTH_LOGIN_USER(i,t)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(i=>{this._actionAUTHComplete(i,t)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(i=>{this._actionAUTH_CRAM_MD5(i,t)}),this._sendCommand("AUTH CRAM-MD5");return}return t(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(e,t,a){if(!t)return a(this._formatError("Empty message","EMESSAGE",!1,"API"));let i=this._isDestroyedMessage("send message");if(i)return a(this._formatError(i,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate(()=>{a(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let r=!1,n=function(){r||(r=!0,a(...arguments))};typeof t.on=="function"&&t.on("error",d=>n(this._formatError(d,"ESTREAM",!1,"API")));let c=Date.now();this._setEnvelope(e,(d,p)=>{if(d){let u=new Js;return typeof t.pipe=="function"?t.pipe(u):(u.write(t),u.end()),n(d)}let m=Date.now(),f=this._createSendStream((u,g)=>u?n(u):(p.envelopeTime=m-c,p.messageTime=Date.now()-m,p.messageSize=f.outByteCount,p.response=g,n(null,p)));typeof t.pipe=="function"?t.pipe(f):(f.write(t),f.end())})}reset(e){this._sendCommand("RSET"),this._responseActions.push(t=>t.charAt(0)!=="2"?e(this._formatError("Could not reset session state. response="+t,"EPROTOCOL",t,"RSET")):(this._envelope=!1,e(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Ws),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||Cr),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(e){if(this._destroyed||!e||!e.length)return;let t=(e||"").toString("binary"),a=(this._remainder+t).split(/\r?\n/),i;this._remainder=a.pop();for(let r=0,n=a.length;r<n;r++){if(this._responseQueue.length&&(i=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(i.split(`
`).pop()))){this._responseQueue[this._responseQueue.length-1]+=`
`+a[r];continue}this._responseQueue.push(a[r])}this._responseQueue.length&&(i=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(i.split(`
`).pop()))||this._processResponse()}_onError(e,t,a,i){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),!this._destroyed&&(e=this._formatError(e,t,a,i),this.logger.error(a,e.message),this.emit("error",e),this.close())}_formatError(e,t,a,i){let r;/Error\]$/i.test(Object.prototype.toString.call(e))?r=e:r=new Error(e),t&&t!=="Error"&&(r.code=t),a&&(r.response=a,r.message+=": "+a);let n=typeof a=="string"&&Number((a.match(/^\d+/)||[])[0])||!1;return n&&(r.responseCode=n),i&&(r.command=i),r}_onClose(){let e=!1;if(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",e,"CONN");if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");if(/^[45]\d{2}\b/.test(e))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let t=this._socket,a={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(i=>{a[i]=this.options.tls[i]}),this.servername&&!a.servername&&(a.servername=this.servername),this.upgrading=!0;try{this._socket=Qs.connect(a,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),t.removeListener("close",this._onSocketClose),t.removeListener("end",this._onSocketEnd),e(null,!0)))}catch(i){return e(i)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Ws),this._socket.on("timeout",this._onSocketTimeout),t.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split(`
`).pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate(()=>this._processResponse());let t=this._responseActions.shift();if(typeof t=="function")t.call(this,e),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",e,"CONN")}_sendCommand(e,t){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(t||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+`\r
`,"utf-8"))}}_setEnvelope(e,t){let a=[],i=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(r=>(r&&r.address||r||"").toString().trim()),!this._envelope.to.length)return t(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return t(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(i=!0);for(let r=0,n=this._envelope.to.length;r<n;r++){if(!this._envelope.to[r]||/[\r\n<>]/.test(this._envelope.to[r]))return t(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[r]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[r])&&(i=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(r){return t(this._formatError("Invalid DSN "+r.message,"EENVELOPE",!1,"API"))}this._responseActions.push(r=>{this._actionMAIL(r,t)}),i&&this._supportedExtensions.includes("SMTPUTF8")&&(a.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(a.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&a.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&a.push("RET="+se.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&a.push("ENVID="+se.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(a.length?" "+a.join(" "):""))}_setDsnEnvelope(e){let t=(e.ret||e.return||"").toString().toUpperCase()||null;if(t)switch(t){case"HDRS":case"HEADERS":t="HDRS";break;case"FULL":case"BODY":t="FULL";break}if(t&&!["FULL","HDRS"].includes(t))throw new Error("ret: "+JSON.stringify(t));let a=(e.envid||e.id||"").toString()||null,i=e.notify||null;if(i){typeof i=="string"&&(i=i.split(",")),i=i.map(d=>d.trim().toUpperCase());let n=["NEVER","SUCCESS","FAILURE","DELAY"];if(i.filter(d=>!n.includes(d)).length||i.length>1&&i.includes("NEVER"))throw new Error("notify: "+JSON.stringify(i.join(",")));i=i.join(",")}let r=(e.recipient||e.orcpt||"").toString()||null;return r&&r.indexOf(";")<0&&(r="rfc822;"+r),{ret:t,envid:a,notify:i,orcpt:r}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+se.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+se.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let t=new _r,a;return this.options.lmtp?this._envelope.accepted.forEach((i,r)=>{let n=r===this._envelope.accepted.length-1;this._responseActions.push(c=>{this._actionLMTPStream(i,n,c,e)})}):this._responseActions.push(i=>{this._actionSMTPStream(i,e)}),t.pipe(this._socket,{end:!1}),this.options.debug&&(a=new Js,a.on("readable",()=>{let i;for(;i=a.read();)this.logger.debug({tnx:"message"},i.toString("binary").replace(/\r?\n$/,""))}),t.pipe(a)),t.once("end",()=>{this.logger.info({tnx:"message",inByteCount:t.inByteCount,outByteCount:t.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",t.outByteCount,t.inByteCount)}),t}_actionGreeting(e){if(clearTimeout(this._greetingTimeout),e.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO");return}this._actionEHLO(e)}_actionEHLO(e){let t;if(e.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO");return}if(e.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=e.split(/\r?\n/).map(a=>a.replace(/^\d+[ -]/,"").trim()).filter(a=>a).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(t=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(t[1])||0),this.emit("connect")}_actionHELO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(e){if(e.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");return}this._upgradeConnection((t,a)=>{if(t){this._onError(new Error("Error initiating TLS - "+(t.message||t)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),a?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(e,t){if(!/^334[ -]/.test(e)){t(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"));return}this._responseActions.push(a=>{this._actionAUTH_LOGIN_PASS(a,t)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(e,t){let a=e.match(/^334\s+(.+)$/),i="";if(a)i=a[1];else return t(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));let r=Buffer.from(i,"base64").toString("ascii"),n=Xs.createHmac("md5",this._auth.credentials.pass);n.update(r);let c=this._auth.credentials.user+" "+n.digest("hex");this._responseActions.push(d=>{this._actionAUTH_CRAM_MD5_PASS(d,t)}),this._sendCommand(Buffer.from(c).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,t){if(!e.match(/^235\s+/))return t(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,t(null,!0)}_actionAUTH_LOGIN_PASS(e,t){if(!/^334[ -]/.test(e))return t(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(a=>{this._actionAUTHComplete(a,t)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,t,a){if(!a&&typeof t=="function"&&(a=t,t=!1),e.substr(0,3)==="334"){this._responseActions.push(i=>{t||this._authMethod!=="XOAUTH2"?this._actionAUTHComplete(i,!0,a):setImmediate(()=>this._handleXOauth2Token(!0,a))}),this._sendCommand("");return}if(e.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),a(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,a(null,!0)}_actionMAIL(e,t){let a,i;if(Number(e.charAt(0))!==2)return this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?a="Internationalized mailbox name not allowed":a="Mail command failed",t(this._formatError(a,"EENVELOPE",e,"MAIL FROM"));if(this._envelope.rcptQueue.length)if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)i=this._envelope.rcptQueue.shift(),this._recipientQueue.push(i),this._responseActions.push(r=>{this._actionRCPT(r,t)}),this._sendCommand("RCPT TO:<"+i+">"+this._getDsnRcptToArgs());else i=this._envelope.rcptQueue.shift(),this._recipientQueue.push(i),this._responseActions.push(r=>{this._actionRCPT(r,t)}),this._sendCommand("RCPT TO:<"+i+">"+this._getDsnRcptToArgs());else return t(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"))}_actionRCPT(e,t){let a,i,r=this._recipientQueue.shift();if(Number(e.charAt(0))!==2?(this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(r)?a="Internationalized mailbox name not allowed":a="Recipient command failed",this._envelope.rejected.push(r),i=this._formatError(a,"EENVELOPE",e,"RCPT TO"),i.recipient=r,this._envelope.rejectedErrors.push(i)):this._envelope.accepted.push(r),!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push(n=>{this._actionDATA(n,t)}),this._sendCommand("DATA");else return i=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO"),i.rejected=this._envelope.rejected,i.rejectedErrors=this._envelope.rejectedErrors,t(i);else this._envelope.rcptQueue.length&&(r=this._envelope.rcptQueue.shift(),this._recipientQueue.push(r),this._responseActions.push(n=>{this._actionRCPT(n,t)}),this._sendCommand("RCPT TO:<"+r+">"+this._getDsnRcptToArgs()))}_actionDATA(e,t){if(!/^[23]/.test(e))return t(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let a={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(a.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(a.rejectedErrors=this._envelope.rejectedErrors),t(null,a)}_actionSMTPStream(e,t){return Number(e.charAt(0))!==2?t(this._formatError("Message failed","EMESSAGE",e,"DATA")):t(null,e)}_actionLMTPStream(e,t,a,i){let r;if(Number(a.charAt(0))!==2){r=this._formatError("Message failed for recipient "+e,"EMESSAGE",a,"DATA"),r.recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(r);for(let n=0,c=this._envelope.accepted.length;n<c;n++)this._envelope.accepted[n]===e&&this._envelope.accepted.splice(n,1)}if(t)return i(null,a)}_handleXOauth2Token(e,t){this._auth.oauth2.getToken(e,(a,i)=>{if(a)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),t(this._formatError(a,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(r=>{this._actionAUTHComplete(r,e,t)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(i),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=Nr.hostname()||""}catch{e="localhost"}return(!e||e.indexOf(".")<0)&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}};Zs.exports=ft});var xt=A((Oc,ei)=>{"use strict";var jr=S("stream").Stream,kr=fe(),Ar=S("crypto"),Tr=H(),gt=class extends jr{constructor(e,t){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let a=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=a||5*60}if(this.logger=Tr.getLogger({logger:t},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback=="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let a=Math.max(Number(this.options.timeout)||0,0);this.expires=a&&Date.now()+a*1e3||0}}getToken(e,t){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return t(null,this.accessToken);let a=(...i)=>{i[0]?this.logger.error({err:i[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),t(...i)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,(i,r,n)=>{!i&&r&&(this.accessToken=r,this.expires=n||0),a(i,r)}):this.generateToken(a)}updateToken(e,t){this.accessToken=e,t=Math.max(Number(t)||0,0),this.expires=t&&Date.now()+t*1e3||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let t,a;if(this.options.serviceClient){let i=Math.floor(Date.now()/1e3),r={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:i,exp:i+this.options.serviceRequestTimeout},n;try{n=this.jwtSignRS256(r)}catch{return e(new Error("Can't generate token. Check your auth options"))}t={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:n},a={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:r}}else{if(!this.options.refreshToken)return e(new Error("Can't create new access token for user"));t={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},a={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(i=>{t[i]=this.options.customParams[i],a[i]=this.options.customParams[i]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(a)),this.postRequest(this.options.accessUrl,t,this.options,(i,r)=>{let n;if(i)return e(i);try{n=JSON.parse(r.toString())}catch(d){return e(d)}if(!n||typeof n!="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(r||"").toString()),e(new Error("Invalid authentication response"));let c={};if(Object.keys(n).forEach(d=>{d!=="access_token"?c[d]=n[d]:c[d]=(n[d]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(c)),n.error){let d=n.error;return n.error_description&&(d+=": "+n.error_description),n.error_uri&&(d+=" ("+n.error_uri+")"),e(new Error(d))}return n.access_token?(this.updateToken(n.access_token,n.expires_in),e(null,this.accessToken)):e(new Error("No access token"))})}buildXOAuth2Token(e){let t=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(t.join(""),"utf-8").toString("base64")}postRequest(e,t,a,i){let r=!1,n=[],c=0,d=kr(e,{method:"post",headers:a.customHeaders,body:t,allowErrorResponse:!0});d.on("readable",()=>{let p;for(;(p=d.read())!==null;)n.push(p),c+=p.length}),d.once("error",p=>{if(!r)return r=!0,i(p)}),d.once("end",()=>{if(!r)return r=!0,i(null,Buffer.concat(n,c))})}toBase64URL(e){return typeof e=="string"&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map(a=>this.toBase64URL(a)).join(".");let t=Ar.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(t)}};ei.exports=gt});var si=A((Uc,ti)=>{"use strict";var Ir=Ee(),Lr=H().assign,Dr=xt(),Pr=S("events"),vt=class extends Pr{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let t=new Dr(this.options.auth,this.logger);t.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||t.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:t,method:"XOAUTH2"},t.on("token",a=>this.pool.mailer.emit("token",a)),t.on("error",a=>this.emit("error",a));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(e){this.pool.getSocket(this.options,(t,a)=>{if(t)return e(t);let i=!1,r=this.options;a&&a.connection&&(this.logger.info({tnx:"proxy",remoteAddress:a.connection.remoteAddress,remotePort:a.connection.remotePort,destHost:r.host||"",destPort:r.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",a.connection.remoteAddress,a.connection.remotePort,r.host||"",r.port||""),r=Lr(!1,r),Object.keys(a).forEach(n=>{r[n]=a[n]})),this.connection=new Ir(r),this.connection.once("error",n=>{if(this.emit("error",n),!i)return i=!0,e(n)}),this.connection.once("end",()=>{if(this.close(),i)return;i=!0;let n=setTimeout(()=>{if(i)return;let c=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(c.code="ETLS"),e(c)},1e3);try{n.unref()}catch{}}),this.connection.connect(()=>{if(!i)if(this.auth&&(this.connection.allowsAuth||r.forceAuth))this.connection.login(this.auth,n=>{if(!i){if(i=!0,n)return this.connection.close(),this.emit("error",n),e(n);this._connected=!0,e(null,!0)}});else return i=!0,this._connected=!0,e(null,!0)})})}send(e,t){if(!this._connected)return this.connect(n=>n?t(n):this.send(e,t));let a=e.message.getEnvelope(),i=e.message.messageId(),r=[].concat(a.to||[]);r.length>3&&r.push("...and "+r.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i,cid:this.id},"Sending message %s using #%s to <%s>",i,this.id,r.join(", ")),e.data.dsn&&(a.dsn=e.data.dsn),this.connection.send(a,e.message.createReadStream(),(n,c)=>{if(this.messages++,n)return this.connection.close(),this.emit("error",n),t(n);c.envelope={from:a.from,to:a.to},c.messageId=i,setImmediate(()=>{let d;this.messages>=this.options.maxMessages?(d=new Error("Resource exhausted"),d.code="EMAXLIMIT",this.connection.close(),this.emit("error",d)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),t(null,c)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}};ti.exports=vt});var ii=A((Hc,qr)=>{qr.exports={"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:{domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},AOL:{domains:["aol.com"],host:"smtp.aol.com",port:587},Bluewin:{host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},DebugMail:{host:"debugmail.io",port:25},DynectEmail:{aliases:["Dynect"],host:"smtp.dynect.net",port:25},Ethereal:{aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},FastMail:{domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:{aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Gmail:{aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},Godaddy:{host:"smtpout.secureserver.net",port:25},GodaddyAsia:{host:"smtp.asia.secureserver.net",port:25},GodaddyEurope:{host:"smtp.europe.secureserver.net",port:25},"hot.ee":{host:"mail.hot.ee"},Hotmail:{aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},iCloud:{aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},Infomaniak:{host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Loopia:{host:"mailcluster.loopia.se",port:465},"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:{port:1025,ignoreTLS:!0},Mailgun:{host:"smtp.mailgun.org",port:465,secure:!0},Mailjet:{host:"in.mailjet.com",port:587},Mailosaur:{host:"mailosaur.io",port:25},Mailtrap:{host:"live.smtp.mailtrap.io",port:587},Mandrill:{host:"smtp.mandrillapp.com",port:587},Naver:{host:"smtp.naver.com",port:587},One:{host:"send.one.com",port:465,secure:!0},OpenMailBox:{aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Outlook365:{host:"smtp.office365.com",port:587,secure:!1},OhMySMTP:{host:"smtp.ohmysmtp.com",port:587,secure:!1},Postmark:{aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},Proton:{aliases:["ProtonMail","Proton.me","Protonmail.com","Protonmail.ch"],domains:["proton.me","protonmail.com","pm.me","protonmail.ch"],host:"smtp.protonmail.ch",port:587,requireTLS:!0},"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:{domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},QQex:{aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},SendCloud:{host:"smtp.sendcloud.net",port:2525},SendGrid:{host:"smtp.sendgrid.net",port:587},SendinBlue:{aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},SendPulse:{host:"smtp-pulse.com",port:465,secure:!0},SES:{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Seznam:{aliases:["Seznam Email"],domains:["seznam.cz","email.cz","post.cz","spoluzaci.cz"],host:"smtp.seznam.cz",port:465,secure:!0},Sparkpost:{aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Tipimail:{host:"smtp.tipimail.com",port:587},Yahoo:{domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},Yandex:{domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Zoho:{host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},"126":{host:"smtp.126.com",port:465,secure:!0},"163":{host:"smtp.163.com",port:465,secure:!0}}});var yt=A((Fc,ri)=>{"use strict";var ai=ii(),je={};Object.keys(ai).forEach(l=>{let e=ai[l];je[ke(l)]=bt(e),[].concat(e.aliases||[]).forEach(t=>{je[ke(t)]=bt(e)}),[].concat(e.domains||[]).forEach(t=>{je[ke(t)]=bt(e)})});function ke(l){return l.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function bt(l){let e=["domains","aliases"],t={};return Object.keys(l).forEach(a=>{e.indexOf(a)<0&&(t[a]=l[a])}),t}ri.exports=function(l){return l=ke(l.split("@").pop()),je[l]||!1}});var ci=A(($c,li)=>{"use strict";var Mr=S("events"),ni=si(),oi=Ee(),Br=yt(),Ne=H(),Rr=G(),wt=class extends Mr{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let t,a=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(t=Ne.parseConnectionUrl(e.url),a=a||t.service),this.options=Ne.assign(!1,e,t,a&&Br(a)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=Ne.getLogger(this.options,{component:this.options.component||"smtp-pool"});let i=new oi(this.options);this.name="SMTP (pool)",this.version=Rr.version+"[client:"+i.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(e,t){return setImmediate(()=>t(null,!1))}send(e,t){return this._closed?!1:(this._queue.push({mail:e,requeueAttempts:0,callback:t}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let e,t=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!t&&!this._queue.length)return;for(let i=t-1;i>=0;i--)this._connections[i]&&this._connections[i].available&&(e=this._connections[i],e.close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(t&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let a=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let i=this._queue.shift();if(i&&typeof i.callback=="function")try{i.callback(new Error("Connection pool was closed"))}catch(r){this.logger.error({err:r,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,r.message)}setImmediate(a)};setImmediate(a)}_processMessages(){let e,t,a;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(t=0,a=this._connections.length;t<a;t++)if(this._connections[t].available){e=this._connections[t];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let i=e.queueEntry=this._queue.shift();i.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:i.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",i.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(i.mail,(r,n)=>{if(i===e.queueEntry){try{i.callback(r,n)}catch(c){this.logger.error({err:c,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,c.message)}e.queueEntry=!1}})}_createConnection(){let e=new ni(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()}),e.once("error",t=>{if(t.code!=="EMAXLIMIT"?this.logger.error({err:t,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,t.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(t)}catch(a){this.logger.error({err:a,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,a.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()}),e.once("close",()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout(()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return this.options.maxRequeues===void 0||this.options.maxRequeues<0?!0:e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(t){this.logger.error({err:t,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,t.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(e){let t=this._connections.indexOf(e);t!==-1&&this._connections.splice(t,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let t=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return e();if(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=t-this._rateLimit.delta)return this._clearRateLimit();this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(t-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=t)}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let e=this._rateLimit.waiting.shift();setImmediate(e)}}isIdle(){return this.idling}verify(e){let t;e||(t=new Promise((i,r)=>{e=Ne.callbackPromise(i,r)}));let a=new ni(this).auth;return this.getSocket(this.options,(i,r)=>{if(i)return e(i);let n=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:n.host||"",destPort:n.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,n.host||"",n.port||""),n=Ne.assign(!1,n),Object.keys(r).forEach(m=>{n[m]=r[m]}));let c=new oi(n),d=!1;c.once("error",m=>{if(!d)return d=!0,c.close(),e(m)}),c.once("end",()=>{if(!d)return d=!0,e(new Error("Connection closed"))});let p=()=>{if(!d)return d=!0,c.quit(),e(null,!0)};c.connect(()=>{if(!d)if(a&&(c.allowsAuth||n.forceAuth))c.login(a,m=>{if(!d){if(m)return d=!0,c.close(),e(m);p()}});else if(!a&&c.allowsAuth&&n.forceAuth){let m=new Error("Authentication info was not provided");return m.code="NoAuth",d=!0,c.close(),e(m)}else p()})}),t}};li.exports=wt});var pi=A((Vc,di)=>{"use strict";var zr=S("events"),Nt=Ee(),Or=yt(),me=H(),Ur=xt(),Hr=G(),_t=class extends zr{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let t,a=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(t=me.parseConnectionUrl(e.url),a=a||t.service),this.options=me.assign(!1,e,t,a&&Or(a)),this.logger=me.getLogger(this.options,{component:this.options.component||"smtp-transport"});let i=new Nt(this.options);this.name="SMTP",this.version=Hr.version+"[client:"+i.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,t){return setImmediate(()=>t(null,!1))}getAuth(e){if(!e)return this.auth;let t=!1,a={};if(this.options.auth&&typeof this.options.auth=="object"&&Object.keys(this.options.auth).forEach(i=>{t=!0,a[i]=this.options.auth[i]}),e&&typeof e=="object"&&Object.keys(e).forEach(i=>{t=!0,a[i]=e[i]}),!t)return!1;switch((a.type||"").toString().toUpperCase()){case"OAUTH2":{if(!a.service&&!a.user)return!1;let i=new Ur(a,this.logger);return i.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||i.provisionCallback,i.on("token",r=>this.mailer.emit("token",r)),i.on("error",r=>this.emit("error",r)),{type:"OAUTH2",user:a.user,oauth2:i,method:"XOAUTH2"}}default:return{type:(a.type||"").toString().toUpperCase()||"LOGIN",user:a.user,credentials:{user:a.user||"",pass:a.pass,options:a.options},method:(a.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(e,t){this.getSocket(this.options,(a,i)=>{if(a)return t(a);let r=!1,n=this.options;i&&i.connection&&(this.logger.info({tnx:"proxy",remoteAddress:i.connection.remoteAddress,remotePort:i.connection.remotePort,destHost:n.host||"",destPort:n.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",i.connection.remoteAddress,i.connection.remotePort,n.host||"",n.port||""),n=me.assign(!1,n),Object.keys(i).forEach(p=>{n[p]=i[p]}));let c=new Nt(n);c.once("error",p=>{if(!r)return r=!0,c.close(),t(p)}),c.once("end",()=>{if(r)return;let p=setTimeout(()=>{if(r)return;r=!0;let m=new Error("Unexpected socket close");c&&c._socket&&c._socket.upgrading&&(m.code="ETLS"),t(m)},1e3);try{p.unref()}catch{}});let d=()=>{let p=e.message.getEnvelope(),m=e.message.messageId(),f=[].concat(p.to||[]);f.length>3&&f.push("...and "+f.splice(2).length+" more"),e.data.dsn&&(p.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:m},"Sending message %s to <%s>",m,f.join(", ")),c.send(p,e.message.createReadStream(),(u,g)=>{if(r=!0,c.close(),u)return this.logger.error({err:u,tnx:"send"},"Send error for %s: %s",m,u.message),t(u);g.envelope={from:p.from,to:p.to},g.messageId=m;try{return t(null,g)}catch(y){this.logger.error({err:y,tnx:"callback"},"Callback error for %s: %s",m,y.message)}})};c.connect(()=>{if(r)return;let p=this.getAuth(e.data.auth);p&&(c.allowsAuth||n.forceAuth)?c.login(p,m=>{if(p&&p!==this.auth&&p.oauth2&&p.oauth2.removeAllListeners(),!r){if(m)return r=!0,c.close(),t(m);d()}}):d()})})}verify(e){let t;return e||(t=new Promise((a,i)=>{e=me.callbackPromise(a,i)})),this.getSocket(this.options,(a,i)=>{if(a)return e(a);let r=this.options;i&&i.connection&&(this.logger.info({tnx:"proxy",remoteAddress:i.connection.remoteAddress,remotePort:i.connection.remotePort,destHost:r.host||"",destPort:r.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",i.connection.remoteAddress,i.connection.remotePort,r.host||"",r.port||""),r=me.assign(!1,r),Object.keys(i).forEach(p=>{r[p]=i[p]}));let n=new Nt(r),c=!1;n.once("error",p=>{if(!c)return c=!0,n.close(),e(p)}),n.once("end",()=>{if(!c)return c=!0,e(new Error("Connection closed"))});let d=()=>{if(!c)return c=!0,n.quit(),e(null,!0)};n.connect(()=>{if(c)return;let p=this.getAuth({});if(p&&(n.allowsAuth||r.forceAuth))n.login(p,m=>{if(!c){if(m)return c=!0,n.close(),e(m);d()}});else if(!p&&n.allowsAuth&&r.forceAuth){let m=new Error("Authentication info was not provided");return m.code="NoAuth",c=!0,n.close(),e(m)}else d()})}),t}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}};di.exports=_t});var ui=A((Yc,mi)=>{"use strict";var Fr=S("child_process").spawn,$r=G(),Vr=H(),St=class{constructor(e){e=e||{},this._spawn=Fr,this.options=e||{},this.name="Sendmail",this.version=$r.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=Vr.getLogger(this.options,{component:this.options.component||"sendmail"}),e&&(typeof e=="string"?this.path=e:typeof e=="object"&&(e.path&&(this.path=e.path),Array.isArray(e.args)&&(this.args=e.args),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())))}send(e,t){e.message.keepBcc=!0;let a=e.data.envelope||e.message.getEnvelope(),i=e.message.messageId(),r,n,c;if([].concat(a.from||[]).concat(a.to||[]).some(m=>/^-/.test(m)))return t(new Error("Can not send mail. Invalid envelope addresses."));this.args?r=["-i"].concat(this.args).concat(a.to):r=["-i"].concat(a.from?["-f",a.from]:[]).concat(a.to);let p=m=>{if(!c&&(c=!0,typeof t=="function"))return m?t(m):t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:i,response:"Messages queued for delivery"})};try{n=this._spawn(this.path,r)}catch(m){return this.logger.error({err:m,tnx:"spawn",messageId:i},"Error occurred while spawning sendmail. %s",m.message),p(m)}if(n){n.on("error",u=>{this.logger.error({err:u,tnx:"spawn",messageId:i},"Error occurred when sending message %s. %s",i,u.message),p(u)}),n.once("exit",u=>{if(!u)return p();let g;u===127?g=new Error("Sendmail command not found, process exited with code "+u):g=new Error("Sendmail exited with code "+u),this.logger.error({err:g,tnx:"stdin",messageId:i},"Error sending message %s to sendmail. %s",i,g.message),p(g)}),n.once("close",p),n.stdin.on("error",u=>{this.logger.error({err:u,tnx:"stdin",messageId:i},"Error occurred when piping message %s to sendmail. %s",i,u.message),p(u)});let m=[].concat(a.to||[]);m.length>3&&m.push("...and "+m.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Sending message %s to <%s>",i,m.join(", "));let f=e.message.createReadStream();f.once("error",u=>{this.logger.error({err:u,tnx:"stdin",messageId:i},"Error occurred when generating message %s. %s",i,u.message),n.kill("SIGINT"),p(u)}),f.pipe(n.stdin)}else return p(new Error("sendmail was not found"))}};mi.exports=St});var fi=A((Kc,hi)=>{"use strict";var Yr=G(),Kr=H(),Ct=class{constructor(e){e=e||{},this.options=e||{},this.name="StreamTransport",this.version=Yr.version,this.logger=Kr.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())}send(e,t){e.message.keepBcc=!0;let a=e.data.envelope||e.message.getEnvelope(),i=e.message.messageId(),r=[].concat(a.to||[]);r.length>3&&r.push("...and "+r.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Sending message %s to <%s> using %s line breaks",i,r.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let n;try{n=e.message.createReadStream()}catch(p){return this.logger.error({err:p,tnx:"send",messageId:i},"Creating send stream failed for %s. %s",i,p.message),t(p)}if(!this.options.buffer)return n.once("error",p=>{this.logger.error({err:p,tnx:"send",messageId:i},"Failed creating message for %s. %s",i,p.message)}),t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:i,message:n});let c=[],d=0;n.on("readable",()=>{let p;for(;(p=n.read())!==null;)c.push(p),d+=p.length}),n.once("error",p=>(this.logger.error({err:p,tnx:"send",messageId:i},"Failed creating message for %s. %s",i,p.message),t(p))),n.on("end",()=>t(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:i,message:Buffer.concat(c,d)}))})}};hi.exports=Ct});var xi=A((Gc,gi)=>{"use strict";var Gr=G(),Qr=H(),Et=class{constructor(e){e=e||{},this.options=e||{},this.name="JSONTransport",this.version=Gr.version,this.logger=Qr.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,t){e.message.keepBcc=!0;let a=e.data.envelope||e.message.getEnvelope(),i=e.message.messageId(),r=[].concat(a.to||[]);r.length>3&&r.push("...and "+r.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:i},"Composing JSON structure of %s to <%s>",i,r.join(", ")),setImmediate(()=>{e.normalize((n,c)=>n?(this.logger.error({err:n,tnx:"send",messageId:i},"Failed building JSON structure for %s. %s",i,n.message),t(n)):(delete c.envelope,delete c.normalizedHeaders,t(null,{envelope:a,messageId:i,message:this.options.skipEncoding?c:JSON.stringify(c)})))})}};gi.exports=Et});var yi=A((Qc,bi)=>{"use strict";var Xr=S("events"),Jr=G(),vi=H(),Wr=We(),jt=class extends Xr{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=Jr.version,this.logger=vi.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(e,t){if(this.connections>=this.maxConnections)return this.idling=!1,this.pending.push({mail:e,callback:t});if(!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:e,callback:t});this._send(e,(...a)=>{setImmediate(()=>t(...a)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let e=this.pending.shift();this._send(e.mail,(...t)=>{setImmediate(()=>e.callback(...t)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),t=!1;for(let i=this.rateMessages.length-1;i>=0;i--)this.rateMessages[i].ts>=e-this.rateInterval&&(!t||this.rateMessages[i].ts<t)&&(t=this.rateMessages[i].ts),this.rateMessages[i].ts<e-this.rateInterval&&!this.rateMessages[i].pending&&this.rateMessages.splice(i,1);if(this.rateMessages.length<this.sendingRate)return!0;let a=Math.max(t+1001,e+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),e-a);try{this.sendingRateTTL.unref()}catch{}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,t){let a={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(a);let i=e.data.envelope||e.message.getEnvelope(),r=e.message.messageId(),n=[].concat(i.to||[]);n.length>3&&n.push("...and "+n.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:r},"Sending message %s to <%s>",r,n.join(", "));let c=d=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&typeof e.data._dkim.skipFields=="string"?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let p=e.message.createReadStream(),m=p.pipe(new Wr),f=[],u=0;m.on("readable",()=>{let g;for(;(g=m.read())!==null;)f.push(g),u+=g.length}),p.once("error",g=>m.emit("error",g)),m.once("error",g=>{d(g)}),m.once("end",()=>d(null,Buffer.concat(f,u)))};setImmediate(()=>c((d,p)=>{if(d)return this.logger.error({err:d,tnx:"send",messageId:r},"Failed creating message for %s. %s",r,d.message),a.pending=!1,t(d);let m={RawMessage:{Data:p},Source:i.from,Destinations:i.to};Object.keys(e.data.ses||{}).forEach(y=>{m[y]=e.data.ses[y]});let f=(this.ses.aws?this.ses.ses:this.ses)||{},u=this.ses.aws||{};(y=>f.config&&typeof f.config.region=="function"?f.config.region().then(_=>y(null,_)).catch(_=>y(_)):y(null,f.config&&f.config.region||"us-east-1"))((y,_)=>{(y||!_)&&(_="us-east-1");let D;typeof f.send=="function"&&u.SendRawEmailCommand?D=f.send(new u.SendRawEmailCommand(m)):D=f.sendRawEmail(m).promise(),D.then(T=>{_==="us-east-1"&&(_="email"),a.pending=!1,t(null,{envelope:{from:i.from,to:i.to},messageId:"<"+T.MessageId+(/@/.test(T.MessageId)?"":"@"+_+".amazonses.com")+">",response:T.MessageId,raw:p})}).catch(T=>{this.logger.error({err:T,tnx:"send"},"Send error for %s: %s",r,T.message),a.pending=!1,t(T)})})}))}verify(e){let t,a=(this.ses.aws?this.ses.ses:this.ses)||{},i=this.ses.aws||{},r={RawMessage:{Data:`From: invalid@invalid\r
To: invalid@invalid\r
 Subject: Invalid\r
\r
Invalid`},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(t=new Promise((c,d)=>{e=vi.callbackPromise(c,d)}));let n=c=>c&&(c.code||c.Code)!=="InvalidParameterValue"?e(c):e(null,!0);return typeof a.send=="function"&&i.SendRawEmailCommand?(r.RawMessage.Data=Buffer.from(r.RawMessage.Data),a.send(new i.SendRawEmailCommand(r),n)):a.sendRawEmail(r,n),t}};bi.exports=jt});var Si=A((Xc,Ae)=>{"use strict";var Zr=Vs(),_i=H(),en=ci(),tn=pi(),sn=ui(),an=fi(),rn=xi(),nn=yi(),on=fe(),wi=G(),ln=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),cn=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),Ni=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,dn=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),_e=!1;Ae.exports.createTransport=function(l,e){let t,a,i;return(typeof l=="object"&&typeof l.send!="function"||typeof l=="string"&&/^(smtps?|direct):/i.test(l))&&((t=typeof l=="string"?l:l.url)?a=_i.parseConnectionUrl(t):a=l,a.pool?l=new en(a):a.sendmail?l=new sn(a):a.streamTransport?l=new an(a):a.jsonTransport?l=new rn(a):a.SES?l=new nn(a):l=new tn(a)),i=new Zr(l,a,e),i};Ae.exports.createTestAccount=function(l,e){let t;if(!e&&typeof l=="function"&&(e=l,l=!1),e||(t=new Promise((d,p)=>{e=_i.callbackPromise(d,p)})),dn&&_e)return setImmediate(()=>e(null,_e)),t;l=l||ln;let a=[],i=0,r={},n={requestor:wi.name,version:wi.version};Ni&&(r.Authorization="Bearer "+Ni);let c=on(l+"/user",{contentType:"application/json",method:"POST",headers:r,body:Buffer.from(JSON.stringify(n))});return c.on("readable",()=>{let d;for(;(d=c.read())!==null;)a.push(d),i+=d.length}),c.once("error",d=>e(d)),c.once("end",()=>{let d=Buffer.concat(a,i),p,m;try{p=JSON.parse(d.toString())}catch(f){m=f}if(m)return e(m);if(p.status!=="success"||p.error)return e(new Error(p.error||"Request failed"));delete p.status,_e=p,e(null,_e)}),t};Ae.exports.getTestMessageUrl=function(l){if(!l||!l.response)return!1;let e=new Map;return l.response.replace(/\[([^\]]+)\]$/,(t,a)=>{a.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(i,r,n)=>{e.set(r,n)})}),e.has("STATUS")&&e.has("MSGID")?(_e.web||cn)+"/message/"+e.get("MSGID"):!1}});import{createRequestHandler as uc}from"@remix-run/node";var Ot={};Qi(Ot,{assets:()=>ac,assetsBuildDirectory:()=>nc,basename:()=>oc,entry:()=>pc,future:()=>lc,isSpaMode:()=>cc,mode:()=>rc,publicPath:()=>dc,routes:()=>mc});var ki=Ji(Si(),1);import{jsx as s,jsxs as o,Fragment as pn}from"react/jsx-runtime";import{RemixServer as mn,Outlet as un,Meta as hn,Links as fn,ScrollRestoration as gn,Scripts as xn,useLocation as vn,Link as N,Form as L,useLoaderData as q,useActionData as $,useNavigation as U,useParams as bn,useSearchParams as yn}from"@remix-run/react";import{renderToString as wn}from"react-dom/server";import{createCookieSessionStorage as Nn,redirect as F,json as h}from"@remix-run/node";import{createClient as _n}from"@supabase/supabase-js";import{Mail as Y,Settings as Dt,Server as Pt,Home as Sn,Users as M,List as ue,Send as ie,BarChart3 as le,User as qt,LogOut as Cn,ArrowLeft as ee,AlertCircle as At,Save as Ai,Plus as K,Search as Ti,ExternalLink as En,Zap as Te,Trash2 as Mt,Upload as Ii,Download as jn,TrendingUp as Tt,Calendar as Ce,Bell as kn,Shield as Li,CreditCard as An,Edit as Ci,UserPlus as Di,EyeOff as It,Eye as Lt,RefreshCw as Tn,Play as In,Clock as Pi,MoreHorizontal as Ln,FileText as Dn,CheckCircle as qi,XCircle as Pn,UserMinus as qn,Globe as Mn,ArrowRight as Bn}from"lucide-react";import{clsx as Rn}from"clsx";import{twMerge as zn}from"tailwind-merge";import*as te from"react";import{useState as ce,useEffect as Mi}from"react";async function On(l,e,t,a,i){let r=wn(s(mn,{context:a,url:l.url}));return t.set("Content-Type","text/html"),new Response("<!DOCTYPE html>"+r,{headers:t,status:e})}var Un=Object.freeze(Object.defineProperty({__proto__:null,default:On},Symbol.toStringTag,{value:"Module"})),Hn=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function Fn({children:l}){return o("html",{lang:"en",children:[o("head",{children:[s("meta",{charSet:"utf-8"}),s("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),s("title",{children:"xMailer - Professional Email Marketing Platform"}),s("meta",{name:"description",content:"xMailer - The ultimate email marketing platform for businesses. Create campaigns, manage recipients, and track performance with ease."}),s(hn,{}),s(fn,{})]}),o("body",{children:[l,s(gn,{}),s(xn,{})]})]})}function $n(){return s(un,{})}var Vn=Object.freeze(Object.defineProperty({__proto__:null,Layout:Fn,default:$n,links:Hn},Symbol.toStringTag,{value:"Module"})),Ei={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!0,VITE_USER_NODE_ENV:"development"},Yn=(l,e)=>{var t,a;let i;try{i=process.env[l]}catch{i=((a=(t=globalThis.process)==null?void 0:t.env)==null?void 0:a[l])||Ei?.[l]}return i||e},Kn=Yn("SESSION_SECRET","xmailer-default-session-secret-change-in-production");console.log("\u2705 Session configuration loaded");var{getSession:de,commitSession:Bt,destroySession:Gn}=Nn({cookie:{name:"__xmailer_session",httpOnly:!0,maxAge:60*60*24*30,path:"/",sameSite:"lax",secrets:[Kn],secure:!1}}),ji={BASE_URL:"/",DEV:!0,MODE:"production",PROD:!1,SSR:!0,VITE_USER_NODE_ENV:"development"},Bi=l=>{var e,t;let a;try{a=process.env[l]}catch{a=((t=(e=globalThis.process)==null?void 0:e.env)==null?void 0:t[l])||ji?.[l]}if(!a)throw console.error(`Missing environment variable: ${l}`),console.error("Available process.env keys:",Object.keys(process.env||{}).filter(i=>i.includes("SUPABASE"))),new Error(`${l} environment variable is missing. Please check your .env file and restart the server.`);return a},Qn=Bi("SUPABASE_URL"),Xn=Bi("SUPABASE_SERVICE_ROLE_KEY");console.log("\u2705 Supabase configuration loaded successfully");var w=_n(Qn,Xn,{auth:{autoRefreshToken:!1,persistSession:!1}});w.from("profiles").select("count",{count:"exact",head:!0}).then(()=>console.log("\u2705 Supabase connection test successful")).catch(l=>console.error("\u274C Supabase connection test failed:",l.message));async function I(l){let t=(await de(l.headers.get("Cookie"))).get("userId");if(!t)throw F("/auth/login");let{data:a,error:i}=await w.from("profiles").select("*").eq("id",t).single();if(i||!a)throw F("/auth/login");return a}async function Jn(l){let t=(await de(l.headers.get("Cookie"))).get("userId");if(!t)return null;try{let{data:a,error:i}=await w.from("profiles").select("*").eq("id",t).single();return i||!a?null:a}catch{return null}}async function Ie(l,e,t){let{data:{user:a},error:i}=await w.auth.getUser(l);if(i||!a)throw F("/login?error=Invalid session");let r=await de();return r.set("userId",a.id),r.set("userEmail",a.email),r.set("accessToken",l),r.set("refreshToken",e),F(t,{headers:{"Set-Cookie":await Bt(r)}})}async function Wn(l){let e=await de(l.headers.get("Cookie")),t=e.get("accessToken");if(t)try{await w.auth.admin.signOut(t)}catch(a){console.error("Error signing out from Supabase:",a)}return F("/login",{headers:{"Set-Cookie":await Gn(e)}})}function Rt(l){return l&&typeof l.host=="string"&&typeof l.port=="number"&&l.auth&&typeof l.auth.user=="string"&&typeof l.auth.pass=="string"}async function Zn(l,e,t){try{let a=await fetch("https://api.postmarkapp.com/email",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Postmark-Server-Token":l},body:JSON.stringify({From:t,To:e.to,Subject:e.subject,HtmlBody:e.html,TextBody:e.text||e.html.replace(/<[^>]*>/g,""),MessageStream:"outbound"})}),i=await a.json();return a.ok?{success:!0,messageId:i.MessageID}:{success:!1,error:i.Message||"Failed to send email via Postmark API"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Network error"}}}async function eo(l){try{let e=await fetch("https://api.postmarkapp.com/server",{method:"GET",headers:{Accept:"application/json","X-Postmark-Server-Token":l}});if(e.ok){let t=await e.json();return{success:!0}}else return{success:!1,error:(await e.json()).Message||"Invalid API token or server error"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Network error"}}}function Ri(l){if(!Rt(l))throw new Error("Invalid email configuration: missing required fields (host, port, auth.user, auth.pass)");let e={host:l.host,port:l.port,secure:l.port===465,auth:{user:l.auth.user,pass:l.auth.pass},connectionTimeout:5e3,greetingTimeout:3e3,socketTimeout:5e3,pool:!1,tls:{rejectUnauthorized:!1,ciphers:"SSLv3"},disableFileAccess:!0,disableUrlAccess:!0};return ki.default.createTransport(e)}async function zi(l,e,t){if(l.host==="smtp.postmarkapp.com"){console.log("Attempting to send via Postmark API...");let i=await Zn(l.auth.user,e,t);if(i.success)return i;console.log("Postmark API failed, falling back to SMTP:",i.error)}let a=null;try{if(!Rt(l))throw new Error("Invalid email configuration");if(!e.to||!e.subject||!e.html)throw new Error("Missing required email fields: to, subject, or content");a=Ri(l),console.log("Sending email via SMTP...");let i=await a.sendMail({from:t,to:e.to,subject:e.subject,html:e.html,text:e.text||e.html.replace(/<[^>]*>/g,"")});return console.log("Email sent successfully via SMTP:",i.messageId),{success:!0,messageId:i.messageId}}catch(i){return console.error("Failed to send email via SMTP:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error occurred"}}finally{a&&a.close()}}async function to(l){if(l.host==="smtp.postmarkapp.com")return console.log("Testing Postmark API connection..."),await eo(l.auth.user);let e=null;try{if(!Rt(l))return{success:!1,error:"Invalid configuration: missing required fields"};e=Ri(l);let t=e.verify(),a=new Promise((i,r)=>{setTimeout(()=>r(new Error("Connection timeout after 8 seconds")),8e3)});return await Promise.race([t,a]),{success:!0}}catch(t){console.error("SMTP connection test failed:",t);let a="Connection failed";return t instanceof Error&&(t.message.includes("ETIMEDOUT")||t.message.includes("Greeting never received")?a="Connection timeout - this may be due to network restrictions in the current environment":a=t.message),{success:!1,error:a}}finally{e&&e.close()}}async function so(l,e,t){let a={to:t,subject:"Test Email from xMailer",html:`
      <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
        <h2 style="color: #333;">Test Email from xMailer</h2>
        <p>This is a test email sent from xMailer to verify your email configuration.</p>
        <p>If you received this email, your email settings are working correctly! \u{1F389}</p>
        <hr style="border: 1px solid #eee; margin: 20px 0;">
        <p style="color: #666; font-size: 14px;">
          <strong>Sent at:</strong> ${new Date().toISOString()}<br>
          <strong>From:</strong> ${e}<br>
          <strong>To:</strong> ${t}
        </p>
      </div>
    `,text:`Test Email from xMailer

This is a test email sent from xMailer to verify your email configuration.

If you received this email, your email settings are working correctly!

Sent at: ${new Date().toISOString()}
From: ${e}
To: ${t}`};return await zi(l,a,e)}async function Oi(l,e,t){console.log(`Starting campaign processing for: ${e.name} (${l})`);let a=0,i=0,r=[];if(!e.recipients||e.recipients.length===0)return{success:!1,sentCount:0,failedCount:0,errors:["No recipients found for campaign"]};if(!e.subject||!e.content)return{success:!1,sentCount:0,failedCount:0,errors:["Campaign subject or content is missing"]};for(let c of e.recipients)try{if(!c||!c.includes("@")){i++,r.push(`Invalid email address: ${c}`);continue}let d={to:c,subject:e.subject,html:e.content,text:e.content.replace(/<[^>]*>/g,"")},p=await zi(t,d,e.fromEmail);p.success?(a++,console.log(`Email sent successfully to ${c}: ${p.messageId}`)):(i++,r.push(`Failed to send to ${c}: ${p.error}`),console.error(`Failed to send to ${c}:`,p.error)),await new Promise(m=>setTimeout(m,100))}catch(d){i++;let p=d instanceof Error?d.message:"Unknown error";r.push(`Error sending to ${c}: ${p}`),console.error(`Error sending to ${c}:`,d)}let n=a>0&&i===0;return console.log(`Campaign processing completed: ${a} sent, ${i} failed`),{success:n,sentCount:a,failedCount:i,errors:r}}async function io({request:l,params:e}){if(l.method!=="POST")return h({error:"Method not allowed"},{status:405});await I(l);let t=e.id;if(!t)return h({error:"Campaign ID required"},{status:400});try{return Oi(t).catch(console.error),h({success:!0,message:"Campaign sending started"})}catch(a){return console.error("Error starting campaign:",a),h({error:"Failed to start campaign"},{status:500})}}var ao=Object.freeze(Object.defineProperty({__proto__:null,action:io},Symbol.toStringTag,{value:"Module"}));function V(...l){return zn(Rn(l))}function Se(l){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(l))}var ro=[{name:"Dashboard",href:"/dashboard",icon:Sn},{name:"Subscribers",href:"/subscribers",icon:M},{name:"Lists",href:"/lists",icon:ue},{name:"Campaigns",href:"/campaigns",icon:ie},{name:"Analytics",href:"/analytics",icon:le},{name:"Settings",href:"/settings",icon:Dt}],no=[{name:"General",href:"/settings",icon:Dt},{name:"SMTP Config",href:"/settings/smtp",icon:Pt}];function R(){let l=vn(),t=l.pathname.startsWith("/settings")?no:ro;return s("div",{className:"w-64 bg-gray-800 flex flex-col",children:s("div",{className:"flex-1 flex flex-col min-h-0",children:o("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[o("div",{className:"flex items-center flex-shrink-0 px-4",children:[s(Y,{className:"h-8 w-8 text-white"}),s("span",{className:"ml-2 text-xl font-bold text-white",children:"xMailer"})]}),s("nav",{className:"mt-8 flex-1 px-2 space-y-1",children:t.map(a=>{let i=l.pathname===a.href;return o(N,{to:a.href,className:V(i?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","group flex items-center px-2 py-2 text-sm font-medium rounded-md"),children:[s(a.icon,{className:V(i?"text-gray-300":"text-gray-400 group-hover:text-gray-300","mr-3 flex-shrink-0 h-6 w-6"),"aria-hidden":"true"}),a.name]},a.name)})})]})})})}var b=te.forwardRef(({className:l,variant:e="default",size:t="default",...a},i)=>s("button",{className:V("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":e==="default","bg-destructive text-destructive-foreground hover:bg-destructive/90":e==="destructive","border border-input bg-background hover:bg-accent hover:text-accent-foreground":e==="outline","bg-secondary text-secondary-foreground hover:bg-secondary/80":e==="secondary","hover:bg-accent hover:text-accent-foreground":e==="ghost","text-primary underline-offset-4 hover:underline":e==="link"},{"h-10 px-4 py-2":t==="default","h-9 rounded-md px-3":t==="sm","h-11 rounded-md px-8":t==="lg","h-10 w-10":t==="icon"},l),ref:i,...a}));b.displayName="Button";function ae({variant:l="dark",size:e="md",className:t}){let a={sm:"text-lg",md:"text-xl",lg:"text-2xl",xl:"text-3xl"},i={light:"text-white",dark:"text-gray-900"};return s("div",{className:V("flex items-center font-bold",a[e],i[l],t),children:o("div",{className:"flex items-center",children:[s("div",{className:"relative mr-2",children:s("div",{className:V("w-8 h-6 border-2 rounded-sm relative",l==="light"?"border-white":"border-blue-600"),children:s("div",{className:V("absolute inset-x-0 top-0 h-0 border-l-4 border-r-4 border-t-3",l==="light"?"border-l-transparent border-r-transparent border-t-white":"border-l-transparent border-r-transparent border-t-blue-600"),style:{left:"50%",transform:"translateX(-50%)",borderTopWidth:"12px",borderLeftWidth:"16px",borderRightWidth:"16px"}})})}),o("span",{className:"tracking-tight",children:[s("span",{className:l==="light"?"text-white":"text-blue-600",children:"x"}),s("span",{className:l==="light"?"text-white":"text-gray-900",children:"Mailer"})]})]})})}function z({user:l,showLogo:e=!1}){var t;return s("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex items-center space-x-4",children:[e&&s(ae,{variant:"dark",size:"md"}),s("h1",{className:"text-2xl font-semibold text-gray-900",children:"Email Autoresponder"})]}),o("div",{className:"flex items-center space-x-4",children:[l&&o("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s(qt,{className:"h-4 w-4"}),s("span",{children:((t=l.user_metadata)==null?void 0:t.full_name)||l.email})]}),s(L,{method:"post",action:"/logout",children:o(b,{variant:"outline",size:"sm",children:[s(Cn,{className:"h-4 w-4 mr-2"}),"Logout"]})})]})]})})}var j=te.forwardRef(({className:l,type:e,...t},a)=>s("input",{type:e,className:V("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:a,...t}));j.displayName="Input";var x=te.forwardRef(({className:l,...e},t)=>s("div",{ref:t,className:V("rounded-lg border bg-card text-card-foreground shadow-sm",l),...e}));x.displayName="Card";var C=te.forwardRef(({className:l,...e},t)=>s("div",{ref:t,className:V("flex flex-col space-y-1.5 p-6",l),...e}));C.displayName="CardHeader";var E=te.forwardRef(({className:l,...e},t)=>s("h3",{ref:t,className:V("text-2xl font-semibold leading-none tracking-tight",l),...e}));E.displayName="CardTitle";var k=te.forwardRef(({className:l,...e},t)=>s("p",{ref:t,className:V("text-sm text-muted-foreground",l),...e}));k.displayName="CardDescription";var v=te.forwardRef(({className:l,...e},t)=>s("div",{ref:t,className:V("p-6 pt-0",l),...e}));v.displayName="CardContent";var oo=te.forwardRef(({className:l,...e},t)=>s("div",{ref:t,className:V("flex items-center p-6 pt-0",l),...e}));oo.displayName="CardFooter";async function lo({request:l,params:e}){let t=await I(l),a=e.id;if(!a)throw new Response("Subscriber ID required",{status:400});let{data:i,error:r}=await w.from("subscribers").select("*").eq("id",a).eq("user_id",t.id).single();if(r||!i)throw console.error("Subscriber fetch error:",r),new Response("Subscriber not found",{status:404});let{data:n,error:c}=await w.from("list_subscribers").select("list_id, status").eq("subscriber_id",a);c&&console.error("Current lists fetch error:",c);let{data:d,error:p}=await w.from("lists").select("*").eq("user_id",t.id).eq("is_active",!0).order("name");if(p)return console.error("All lists fetch error:",p),h({user:t,subscriber:i,allLists:[],currentListIds:[],error:"Failed to load lists"});let m=n?.map(f=>f.list_id)||[];return h({user:t,subscriber:i,allLists:d||[],currentListIds:m,error:null})}async function co({request:l,params:e}){let t=await I(l),a=e.id,i=await l.formData();if(!a)return h({error:"Subscriber ID required"},{status:400});let{data:r,error:n}=await w.from("subscribers").select("*").eq("id",a).eq("user_id",t.id).single();if(n||!r)return console.error("Subscriber verification error:",n),h({error:"Subscriber not found or access denied"},{status:404});let c=i.get("email"),d=i.get("firstName"),p=i.get("lastName"),m=i.get("status"),f=i.getAll("lists");if(console.log("Form data received:",{email:c,firstName:d,lastName:p,status:m,selectedLists:f}),!c)return h({error:"Email is required"},{status:400});let{data:u,error:g}=await w.from("subscribers").select("id").eq("user_id",t.id).eq("email",c).neq("id",a);if(g)return console.error("Email check error:",g),h({error:"Failed to validate email"},{status:500});if(u&&u.length>0)return h({error:"Another subscriber with this email already exists"},{status:400});try{let y={email:c,first_name:d||"",last_name:p||"",status:m,updated_at:new Date().toISOString()};m==="subscribed"&&r.status!=="subscribed"?(y.subscribed_at=new Date().toISOString(),y.unsubscribed_at=null):m==="unsubscribed"&&r.status!=="unsubscribed"&&(y.unsubscribed_at=new Date().toISOString());let{error:_}=await w.from("subscribers").update(y).eq("id",a);if(_)return console.error("Subscriber update error:",_),h({error:"Failed to update subscriber: "+_.message},{status:500});let{data:D}=await w.from("list_subscribers").select("list_id").eq("subscriber_id",a),T=D?.map(B=>B.list_id)||[],re=T.filter(B=>!f.includes(B));if(re.length>0){let{error:B}=await w.from("list_subscribers").delete().eq("subscriber_id",a).in("list_id",re);B&&console.error("Remove subscriptions error:",B)}let ne=f.filter(B=>!T.includes(B));if(ne.length>0){let B=ne.map(X=>({subscriber_id:a,list_id:X,status:m==="subscribed"?"subscribed":"unsubscribed",subscribed_at:m==="subscribed"?new Date().toISOString():null,unsubscribed_at:m==="unsubscribed"?new Date().toISOString():null})),{error:P}=await w.from("list_subscribers").insert(B);if(P)return console.error("Add subscriptions error:",P),h({error:"Failed to update list subscriptions: "+P.message},{status:500})}let Le=f.filter(B=>T.includes(B));if(Le.length>0){let{error:B}=await w.from("list_subscribers").update({status:m==="subscribed"?"subscribed":"unsubscribed",subscribed_at:m==="subscribed"?new Date().toISOString():null,unsubscribed_at:m==="unsubscribed"?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("subscriber_id",a).in("list_id",Le);B&&console.error("Update subscriptions error:",B)}return F("/subscribers")}catch(y){return console.error("Action error:",y),h({error:"An unexpected error occurred"},{status:500})}}function po(){let{user:l,subscriber:e,allLists:t,currentListIds:a,error:i}=q(),r=$(),c=U().state==="submitting";return console.log("Loader data:",{subscriber:e,allLists:t,currentListIds:a}),o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-2xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/subscribers",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Subscribers"]})}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Edit Subscriber"}),s("p",{className:"text-gray-600 mt-2",children:"Update subscriber information and list memberships."})]})]}),i&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:o(v,{className:"p-4 flex items-center",children:[s(At,{className:"h-5 w-5 text-red-600 mr-2"}),s("p",{className:"text-red-800",children:i})]})}),r?.error&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:o(v,{className:"p-4 flex items-center",children:[s(At,{className:"h-5 w-5 text-red-600 mr-2"}),s("p",{className:"text-red-800",children:r.error})]})}),o(x,{children:[o(C,{children:[s(E,{children:"Subscriber Information"}),s(k,{children:"Update the subscriber's details and manage their list subscriptions."})]}),s(v,{children:o(L,{method:"post",className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s(j,{name:"email",type:"email",defaultValue:e.email,required:!0,className:"w-full"})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s(j,{name:"firstName",defaultValue:e.first_name||"",className:"w-full"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s(j,{name:"lastName",defaultValue:e.last_name||"",className:"w-full"})]})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),o("select",{name:"status",defaultValue:e.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s("option",{value:"subscribed",children:"Subscribed"}),s("option",{value:"unsubscribed",children:"Unsubscribed"}),s("option",{value:"pending",children:"Pending"})]})]}),t&&t.length>0?o("div",{children:[o("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["List Memberships (",t.length," lists available)"]}),s("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4 bg-gray-50",children:t.map(d=>{let p=a.includes(d.id);return o("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border",children:[s("input",{type:"checkbox",id:`list-${d.id}`,name:"lists",value:d.id,defaultChecked:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s("label",{htmlFor:`list-${d.id}`,className:"flex-1 text-sm text-gray-700 cursor-pointer",children:o("div",{className:"flex items-center",children:[s("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:d.color}}),o("div",{children:[s("div",{className:"font-medium",children:d.name}),d.description&&s("div",{className:"text-gray-500 text-xs",children:d.description})]})]})}),p&&s("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Current Member"})]},d.id)})}),s("p",{className:"text-xs text-gray-500 mt-2",children:"Select which lists this subscriber should be a member of."})]}):s(x,{className:"border-yellow-200 bg-yellow-50",children:o(v,{className:"p-4",children:[s("p",{className:"text-yellow-800 mb-2",children:"No lists available"}),s("p",{className:"text-yellow-700 text-sm",children:"Create some lists first to organize your subscribers."}),s(N,{to:"/lists/new",className:"inline-block mt-2",children:s(b,{size:"sm",variant:"outline",children:"Create Your First List"})})]})}),s(x,{className:"bg-gray-100",children:o(v,{className:"p-4",children:[s("h4",{className:"font-medium mb-2",children:"Debug Info:"}),s("pre",{className:"text-xs",children:JSON.stringify({subscriberId:e.id,currentListIds:a,totalLists:t?.length||0},null,2)})]})}),o("div",{className:"flex space-x-4",children:[o(b,{type:"submit",disabled:c,className:"flex-1",children:[s(Ai,{className:"h-4 w-4 mr-2"}),c?"Saving Changes...":"Save Changes"]}),s(N,{to:"/subscribers",className:"flex-1",children:s(b,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}var mo=Object.freeze(Object.defineProperty({__proto__:null,action:co,default:po,loader:lo},Symbol.toStringTag,{value:"Module"}));async function uo({request:l}){let e=await I(l),{data:t,error:a}=await w.from("subscribers").select(`
      *,
      list_subscribers(
        list_id,
        status,
        lists(name, color)
      )
    `).eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("Subscribers fetch error:",a),h({user:e,subscribers:[],error:"Failed to load subscribers"})):h({user:e,subscribers:t})}function ho(){let{user:l,subscribers:e,error:t}=q(),a=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),i=r=>{switch(r){case"subscribed":return"bg-green-100 text-green-800";case"unsubscribed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Subscribers"}),s("p",{className:"text-gray-600 mt-2",children:"Manage your email subscribers and their preferences."})]}),o("div",{className:"flex space-x-3",children:[s(N,{to:"/subscribers/import",children:o(b,{variant:"outline",children:[s(K,{className:"h-4 w-4 mr-2"}),"Import Subscribers"]})}),s(N,{to:"/subscribers/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"Add Subscriber"]})})]})]}),t&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:t})})}),s(x,{className:"mb-6",children:s(v,{className:"p-4",children:o("div",{className:"flex items-center space-x-4",children:[o("div",{className:"flex-1 relative",children:[s(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s(j,{placeholder:"Search subscribers by email or name...",className:"pl-10"})]}),s(b,{variant:"outline",children:"Filter"})]})})}),e.length===0?s(x,{children:o(v,{className:"text-center py-12",children:[s(M,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subscribers yet"}),s("p",{className:"text-gray-600 mb-6",children:"Start building your audience by adding your first subscriber."}),o("div",{className:"flex justify-center space-x-3",children:[s(N,{to:"/subscribers/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"Add Subscriber"]})}),s(N,{to:"/subscribers/import",children:s(b,{variant:"outline",children:"Import from CSV"})})]})]})}):o(x,{children:[o(C,{children:[o(E,{children:["All Subscribers (",e.length,")"]}),s(k,{children:"Manage and view all your email subscribers"})]}),s(v,{children:s("div",{className:"overflow-x-auto",children:o("table",{className:"w-full",children:[s("thead",{children:o("tr",{className:"border-b",children:[s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Subscriber"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Lists"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Subscribed"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),s("tbody",{children:e.map(r=>{var n,c;return o("tr",{className:"border-b hover:bg-gray-50",children:[s("td",{className:"py-3 px-4",children:o("div",{children:[o("div",{className:"font-medium text-gray-900",children:[r.first_name," ",r.last_name]}),s("div",{className:"text-sm text-gray-600",children:r.email})]})}),s("td",{className:"py-3 px-4",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${i(r.status)}`,children:r.status})}),s("td",{className:"py-3 px-4",children:o("div",{className:"flex flex-wrap gap-1",children:[(n=r.list_subscribers)==null?void 0:n.slice(0,3).map(d=>{var p,m;return o("span",{className:"inline-flex items-center px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800",children:[s("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:((p=d.lists)==null?void 0:p.color)||"#gray"}}),((m=d.lists)==null?void 0:m.name)||"Unknown"]},d.list_id)}),((c=r.list_subscribers)==null?void 0:c.length)>3&&o("span",{className:"text-xs text-gray-500",children:["+",r.list_subscribers.length-3," more"]})]})}),s("td",{className:"py-3 px-4 text-sm text-gray-600",children:a(r.created_at)}),s("td",{className:"py-3 px-4",children:o("div",{className:"flex space-x-2",children:[s(N,{to:`/subscribers/${r.id}`,children:s(b,{variant:"outline",size:"sm",children:"View"})}),s(N,{to:`/subscribers/${r.id}/edit`,children:s(b,{variant:"outline",size:"sm",children:"Edit"})})]})})]},r.id)})})]})})})]})]})})]})]})}var fo=Object.freeze(Object.defineProperty({__proto__:null,default:ho,loader:uo},Symbol.toStringTag,{value:"Module"}));async function go({request:l}){let e=await I(l),{data:t,error:a}=await w.from("email_apis").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw new Error("Failed to load email APIs");return h({user:e,emailApis:t})}async function xo({request:l}){let e=await I(l),t=await l.formData(),a=t.get("_action");if(a==="create"){let i=t.get("name"),r=t.get("provider"),n=t.get("apiKey");if(!i||!r||!n)return h({error:"All fields are required"},{status:400});let{error:c}=await w.from("email_apis").insert({user_id:e.id,name:i,provider:r,api_key:n,is_active:!0});return c?h({error:"Failed to create email API configuration"},{status:500}):h({success:!0})}if(a==="delete"){let i=t.get("apiId"),{error:r}=await w.from("email_apis").delete().eq("id",i).eq("user_id",e.id);return r?h({error:"Failed to delete email API configuration"},{status:500}):h({success:!0})}if(a==="toggle"){let i=t.get("apiId"),r=t.get("isActive")==="true",{error:n}=await w.from("email_apis").update({is_active:!r,updated_at:new Date().toISOString()}).eq("id",i).eq("user_id",e.id);return n?h({error:"Failed to update email API status"},{status:500}):h({success:!0})}return h({error:"Invalid action"},{status:400})}var kt=[{id:"sendgrid",name:"SendGrid",description:"Reliable email delivery service with excellent deliverability",setupUrl:"https://app.sendgrid.com/settings/api_keys",logo:"\u{1F4E7}"},{id:"mailgun",name:"Mailgun",description:"Powerful email API for developers",setupUrl:"https://app.mailgun.com/app/account/security/api_keys",logo:"\u{1F52B}"},{id:"postmark",name:"Postmark",description:"Fast and reliable transactional email service",setupUrl:"https://account.postmarkapp.com/api_tokens",logo:"\u{1F4EE}"},{id:"ses",name:"Amazon SES",description:"Cost-effective email service from AWS",setupUrl:"https://console.aws.amazon.com/ses/",logo:"\u2601\uFE0F"}];function vo(){let{user:l,emailApis:e}=q(),t=$(),i=U().state==="submitting";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Email APIs"}),s("p",{className:"text-gray-600 mt-2",children:"Configure email service providers to send your campaigns through their APIs."})]}),o(x,{className:"mb-8",children:[o(C,{children:[s(E,{children:"Available Email Providers"}),s(k,{children:"Choose from popular email service providers"})]}),s(v,{children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:kt.map(r=>s("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:o("div",{className:"flex items-start justify-between",children:[o("div",{className:"flex items-center",children:[s("span",{className:"text-2xl mr-3",children:r.logo}),o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:r.name}),s("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]})]}),s("a",{href:r.setupUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-500",children:s(En,{className:"h-4 w-4"})})]})},r.id))})})]}),o(x,{className:"mb-8",children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(K,{className:"h-5 w-5 mr-2"}),"Add Email API"]}),s(k,{children:"Configure a new email service provider"})]}),s(v,{children:o(L,{method:"post",className:"space-y-4",children:[s("input",{type:"hidden",name:"_action",value:"create"}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration Name"}),s(j,{name:"name",placeholder:"e.g., SendGrid Production",required:!0})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provider"}),o("select",{name:"provider",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s("option",{value:"",children:"Select Provider"}),kt.map(r=>s("option",{value:r.id,children:r.name},r.id))]})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),s(j,{name:"apiKey",type:"password",placeholder:"Your API key",required:!0})]})]}),t?.error&&s("div",{className:"text-red-600 text-sm",children:t.error}),s(b,{type:"submit",disabled:i,children:i?"Adding...":"Add Email API"})]})})]}),o("div",{className:"space-y-4",children:[s("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Email API Configurations"}),e.length===0?s(x,{children:o(v,{className:"text-center py-8",children:[s(Te,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:"No email APIs configured yet. Add one above to get started."})]})}):s("div",{className:"grid gap-4",children:e.map(r=>{var n;return s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50 mr-4",children:s(Te,{className:"h-6 w-6 text-blue-600"})}),o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:r.name}),s("p",{className:"text-sm text-gray-600",children:((n=kt.find(c=>c.id===r.provider))==null?void 0:n.name)||r.provider}),o("div",{className:"flex items-center mt-2",children:[s("span",{className:`px-2 py-1 text-xs rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:r.is_active?"Active":"Inactive"}),o("span",{className:"ml-2 text-xs text-gray-500",children:["API Key: ****",r.api_key.slice(-4)]})]})]})]}),o("div",{className:"flex space-x-2",children:[o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"toggle"}),s("input",{type:"hidden",name:"apiId",value:r.id}),s("input",{type:"hidden",name:"isActive",value:r.is_active}),s(b,{type:"submit",variant:"outline",size:"sm",children:r.is_active?"Deactivate":"Activate"})]}),o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"delete"}),s("input",{type:"hidden",name:"apiId",value:r.id}),s(b,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:s(Mt,{className:"h-4 w-4"})})]})]})]})})},r.id)})})]})]})})]})]})}var bo=Object.freeze(Object.defineProperty({__proto__:null,action:xo,default:vo,loader:go},Symbol.toStringTag,{value:"Module"}));async function yo({request:l}){let e=await I(l),{data:t,error:a}=await w.from("subscribers").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw new Error("Failed to load subscribers");let i={total:t.length,subscribed:t.filter(r=>r.status==="subscribed").length,unsubscribed:t.filter(r=>r.status==="unsubscribed").length};return h({user:e,subscribers:t,stats:i})}async function wo({request:l}){let e=await I(l),t=await l.formData(),a=t.get("_action");if(a==="add"){let i=t.get("email"),r=t.get("firstName"),n=t.get("lastName");if(t.get("tags"),!i)return h({error:"Email is required"},{status:400});let{error:c}=await w.from("subscribers").insert({user_id:e.id,email:i,first_name:r||null,last_name:n||null,status:"subscribed"});return c?c.code==="23505"?h({error:"Email already exists"},{status:400}):h({error:"Failed to add recipient"},{status:500}):h({success:!0})}if(a==="delete"){let i=t.get("subscriberId"),{error:r}=await w.from("subscribers").delete().eq("id",i).eq("user_id",e.id);return r?h({error:"Failed to delete recipient"},{status:500}):h({success:!0})}if(a==="toggle-subscription"){let i=t.get("subscriberId"),n=t.get("status")==="subscribed"?"unsubscribed":"subscribed",{error:c}=await w.from("subscribers").update({status:n,unsubscribed_at:n==="unsubscribed"?new Date().toISOString():null,updated_at:new Date().toISOString()}).eq("id",i).eq("user_id",e.id);return c?h({error:"Failed to update subscription"},{status:500}):h({success:!0})}return h({error:"Invalid action"},{status:400})}function No(){let{user:l,subscribers:e,stats:t}=q(),a=$(),r=U().state==="submitting";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Recipients"}),s("p",{className:"text-gray-600 mt-2",children:"Manage your email recipient lists and subscriptions."})]}),o("div",{className:"flex space-x-3",children:[o(b,{variant:"outline",children:[s(Ii,{className:"h-4 w-4 mr-2"}),"Import CSV"]}),o(b,{variant:"outline",children:[s(jn,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Recipients"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.total})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(M,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Subscribed"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.subscribed})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-red-50",children:s(M,{className:"h-6 w-6 text-red-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Unsubscribed"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.unsubscribed})]})]})})})]}),o(x,{className:"mb-8",children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(K,{className:"h-5 w-5 mr-2"}),"Add New Recipient"]}),s(k,{children:"Add individual recipients to your email list"})]}),s(v,{children:o(L,{method:"post",className:"space-y-4",children:[s("input",{type:"hidden",name:"_action",value:"add"}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s(j,{name:"email",type:"email",placeholder:"john@example.com",required:!0})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s(j,{name:"firstName",placeholder:"John"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s(j,{name:"lastName",placeholder:"Doe"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma-separated)"}),s(j,{name:"tags",placeholder:"newsletter, customer"})]})]}),a?.error&&s("div",{className:"text-red-600 text-sm",children:a.error}),s(b,{type:"submit",disabled:r,children:r?"Adding...":"Add Recipient"})]})})]}),o(x,{children:[o(C,{children:[s(E,{children:"All Recipients"}),s(k,{children:"Manage your email recipients and their subscription status"})]}),s(v,{children:e.length===0?o("div",{className:"text-center py-8",children:[s(M,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:"No recipients yet. Add some recipients to get started."})]}):s("div",{className:"overflow-x-auto",children:o("table",{className:"w-full",children:[s("thead",{children:o("tr",{className:"border-b",children:[s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Email"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Name"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Tags"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),s("tbody",{children:e.map(n=>o("tr",{className:"border-b hover:bg-gray-50",children:[s("td",{className:"py-3 px-4 text-sm text-gray-900",children:n.email}),s("td",{className:"py-3 px-4 text-sm text-gray-600",children:[n.first_name,n.last_name].filter(Boolean).join(" ")||"-"}),s("td",{className:"py-3 px-4 text-sm",children:s("span",{className:"text-gray-400",children:"-"})}),s("td",{className:"py-3 px-4 text-sm",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${n.status==="subscribed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.status==="subscribed"?"Subscribed":"Unsubscribed"})}),s("td",{className:"py-3 px-4 text-sm",children:o("div",{className:"flex space-x-2",children:[o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"toggle-subscription"}),s("input",{type:"hidden",name:"subscriberId",value:n.id}),s("input",{type:"hidden",name:"status",value:n.status}),s(b,{type:"submit",variant:"outline",size:"sm",children:n.status==="subscribed"?"Unsubscribe":"Subscribe"})]}),o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"delete"}),s("input",{type:"hidden",name:"subscriberId",value:n.id}),s(b,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:s(Mt,{className:"h-4 w-4"})})]})]})})]},n.id))})]})})})]})]})})]})]})}var _o=Object.freeze(Object.defineProperty({__proto__:null,action:wo,default:No,loader:yo},Symbol.toStringTag,{value:"Module"}));async function So({request:l}){let e=await I(l),[{count:t},{count:a},{data:i},{count:r}]=await Promise.all([w.from("subscribers").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","subscribed"),w.from("campaigns").select("*",{count:"exact",head:!0}).eq("user_id",e.id),w.from("campaigns").select("sent_count, total_recipients, status, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}),w.from("lists").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("is_active",!0)]),n=i?.reduce((p,m)=>p+(m.sent_count||0),0)||0,c=i?.filter(p=>p.total_recipients>0)||[],d=c.length>0?c.reduce((p,m)=>p+(m.sent_count||0)/m.total_recipients*100,0)/c.length:0;return h({user:e,analytics:{totalSubscribers:t||0,totalCampaigns:a||0,totalEmailsSent:n,averageDeliveryRate:Math.round(d),totalLists:r||0},campaigns:i||[]})}function Co(){let{user:l,analytics:e,campaigns:t}=q(),a=i=>new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"});return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),s("p",{className:"text-gray-600 mt-2",children:"Track your email marketing performance and subscriber growth."})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Subscribers"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalSubscribers})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(ie,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Campaigns Sent"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalCampaigns})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(Y,{className:"h-6 w-6 text-purple-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Emails Sent"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalEmailsSent})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-orange-50",children:s(Tt,{className:"h-6 w-6 text-orange-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Delivery Rate"}),o("p",{className:"text-2xl font-bold text-gray-900",children:[e.averageDeliveryRate,"%"]})]})]})})})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o(x,{children:[o(C,{children:[s(E,{children:"Recent Campaign Performance"}),s(k,{children:"Delivery rates for your recent campaigns"})]}),s(v,{children:t.length===0?o("div",{className:"text-center py-8",children:[s(le,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:"No campaign data yet"}),s("p",{className:"text-sm text-gray-500",children:"Send your first campaign to see analytics"})]}):s("div",{className:"space-y-4",children:t.slice(0,5).map((i,r)=>{let n=i.total_recipients>0?Math.round(i.sent_count/i.total_recipients*100):0;return s("div",{className:"flex items-center justify-between",children:o("div",{className:"flex-1",children:[o("div",{className:"flex items-center justify-between mb-1",children:[o("span",{className:"text-sm font-medium text-gray-900",children:["Campaign ",r+1]}),o("span",{className:"text-sm text-gray-600",children:[n,"%"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${n}%`}})}),o("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[o("span",{children:[i.sent_count||0," sent"]}),s("span",{children:a(i.created_at)})]})]})},r)})})})]}),o(x,{children:[o(C,{children:[s(E,{children:"Growth Overview"}),s(k,{children:"Your email marketing growth summary"})]}),s(v,{children:o("div",{className:"space-y-6",children:[o("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[o("div",{children:[s("p",{className:"text-sm font-medium text-blue-900",children:"Active Lists"}),s("p",{className:"text-2xl font-bold text-blue-900",children:e.totalLists})]}),s("div",{className:"p-2 bg-blue-100 rounded-lg",children:s(Y,{className:"h-6 w-6 text-blue-600"})})]}),o("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[o("div",{children:[s("p",{className:"text-sm font-medium text-green-900",children:"Subscriber Growth"}),o("p",{className:"text-2xl font-bold text-green-900",children:["+",e.totalSubscribers]})]}),s("div",{className:"p-2 bg-green-100 rounded-lg",children:s(Tt,{className:"h-6 w-6 text-green-600"})})]}),o("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[o("div",{children:[s("p",{className:"text-sm font-medium text-purple-900",children:"Campaign Success"}),o("p",{className:"text-2xl font-bold text-purple-900",children:[e.averageDeliveryRate,"%"]})]}),s("div",{className:"p-2 bg-purple-100 rounded-lg",children:s(le,{className:"h-6 w-6 text-purple-600"})})]})]})})]})]})]})})]})]})}var Eo=Object.freeze(Object.defineProperty({__proto__:null,default:Co,loader:So},Symbol.toStringTag,{value:"Module"}));async function jo({request:l}){let e=await I(l),{data:t,error:a}=await w.from("campaigns").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw new Error("Failed to load campaigns");return h({user:e,campaigns:t})}function ko(){let{user:l,campaigns:e}=q();return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Campaigns"}),s("p",{className:"text-gray-600 mt-2",children:"Manage your email campaigns and track their performance."})]}),s(N,{to:"/campaigns/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"New Campaign"]})})]}),e.length===0?s(x,{children:o(v,{className:"text-center py-12",children:[s(Y,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns yet"}),s("p",{className:"text-gray-600 mb-6",children:"Create your first email campaign to start reaching your audience."}),s(N,{to:"/campaigns/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})})]})}):s("div",{className:"grid gap-6",children:e.map(t=>o(x,{children:[s(C,{children:o("div",{className:"flex items-center justify-between",children:[o("div",{children:[s(E,{className:"text-xl",children:t.name}),s(k,{className:"mt-1",children:t.subject})]}),s("div",{className:"flex items-center space-x-2",children:s("span",{className:`px-3 py-1 text-sm rounded-full ${t.status==="sent"?"bg-green-100 text-green-800":t.status==="sending"?"bg-blue-100 text-blue-800":t.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status})})]})}),o(v,{children:[o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o("div",{className:"flex items-center text-sm text-gray-600",children:[s(M,{className:"h-4 w-4 mr-2"}),o("span",{children:[t.sent_count||0," / ",t.total_recipients||0," sent"]})]}),o("div",{className:"flex items-center text-sm text-gray-600",children:[s(Ce,{className:"h-4 w-4 mr-2"}),o("span",{children:["Created ",Se(t.created_at)]})]}),t.scheduled_at&&o("div",{className:"flex items-center text-sm text-gray-600",children:[s(Ce,{className:"h-4 w-4 mr-2"}),o("span",{children:["Scheduled ",Se(t.scheduled_at)]})]})]}),o("div",{className:"flex items-center justify-between",children:[s("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-4",children:s("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${t.total_recipients>0?(t.sent_count||0)/t.total_recipients*100:0}%`}})}),o("div",{className:"flex space-x-2",children:[s(N,{to:`/campaigns/${t.id}`,children:s(b,{variant:"outline",size:"sm",children:"View"})}),t.status==="draft"&&s(N,{to:`/campaigns/${t.id}/edit`,children:s(b,{size:"sm",children:"Edit"})})]})]})]})]},t.id))})]})})]})]})}var Ao=Object.freeze(Object.defineProperty({__proto__:null,default:ko,loader:jo},Symbol.toStringTag,{value:"Module"}));async function To({request:l}){let e=await I(l),[{count:t},{count:a},{count:i},{data:r}]=await Promise.all([w.from("subscribers").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","subscribed"),w.from("lists").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("is_active",!0),w.from("campaigns").select("*",{count:"exact",head:!0}).eq("user_id",e.id),w.from("campaigns").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5)]);return h({user:e,stats:{totalSubscribers:t||0,totalLists:a||0,totalCampaigns:i||0},recentCampaigns:r||[]})}function Io(){var l;let{user:e,stats:t,recentCampaigns:a}=q(),i=[{title:"Total Subscribers",value:t.totalSubscribers,icon:M,color:"bg-blue-50 text-blue-600",href:"/subscribers"},{title:"Active Lists",value:t.totalLists,icon:Y,color:"bg-green-50 text-green-600",href:"/lists"},{title:"Campaigns",value:t.totalCampaigns,icon:ie,color:"bg-purple-50 text-purple-600",href:"/campaigns"},{title:"Growth Rate",value:"+12%",icon:Tt,color:"bg-orange-50 text-orange-600",href:"/analytics"}];return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:e}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"mb-8",children:[o("h2",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(l=e.email)==null?void 0:l.split("@")[0],"!"]}),s("p",{className:"text-gray-600 mt-2",children:"Here's what's happening with your email campaigns today."})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:i.map(r=>s(N,{to:r.href,children:s(x,{className:"hover:shadow-md transition-shadow cursor-pointer",children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:`p-2 rounded-lg ${r.color}`,children:s(r.icon,{className:"h-6 w-6"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:r.title}),s("p",{className:"text-2xl font-bold text-gray-900",children:r.value})]})]})})})},r.title))}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[o(x,{children:[o(C,{children:[s(E,{children:"Quick Actions"}),s(k,{children:"Get started with common tasks"})]}),o(v,{className:"space-y-4",children:[s(N,{to:"/campaigns/new",children:o(b,{className:"w-full justify-start",children:[s(ie,{className:"h-4 w-4 mr-2"}),"Create New Campaign"]})}),s(N,{to:"/subscribers/import",children:o(b,{variant:"outline",className:"w-full justify-start",children:[s(M,{className:"h-4 w-4 mr-2"}),"Import Subscribers"]})}),s(N,{to:"/lists/new",children:o(b,{variant:"outline",className:"w-full justify-start",children:[s(K,{className:"h-4 w-4 mr-2"}),"Create New List"]})}),s(N,{to:"/analytics",children:o(b,{variant:"outline",className:"w-full justify-start",children:[s(le,{className:"h-4 w-4 mr-2"}),"View Analytics"]})})]})]}),o(x,{children:[o(C,{children:[s(E,{children:"Recent Campaigns"}),s(k,{children:"Your latest email campaigns"})]}),s(v,{children:a.length===0?o("div",{className:"text-center py-6",children:[s(ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600 mb-4",children:"No campaigns yet"}),s(N,{to:"/campaigns/new",children:s(b,{children:"Create Your First Campaign"})})]}):o("div",{className:"space-y-4",children:[a.map(r=>o("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:r.name}),s("p",{className:"text-sm text-gray-600",children:r.subject})]}),o("div",{className:"flex items-center space-x-2",children:[s("span",{className:`px-2 py-1 text-xs rounded-full ${r.status==="sent"?"bg-green-100 text-green-800":r.status==="sending"?"bg-blue-100 text-blue-800":r.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:r.status}),s(N,{to:`/campaigns/${r.id}`,children:s(b,{variant:"outline",size:"sm",children:"View"})})]})]},r.id)),s("div",{className:"text-center pt-4",children:s(N,{to:"/campaigns",children:s(b,{variant:"outline",children:"View All Campaigns"})})})]})})]})]}),t.totalSubscribers===0&&o(x,{className:"border-blue-200 bg-blue-50",children:[o(C,{children:[s(E,{className:"text-blue-900",children:"Getting Started"}),s(k,{className:"text-blue-700",children:"Welcome to xMailer! Here's how to get started with your email marketing."})]}),s(v,{children:o("div",{className:"space-y-4",children:[o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"1"}),o("div",{children:[s("h4",{className:"font-medium text-blue-900",children:"Configure SMTP Settings"}),s("p",{className:"text-sm text-blue-700",children:"Set up your email sending configuration"})]}),s(N,{to:"/settings/smtp",children:s(b,{size:"sm",children:"Configure"})})]}),o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"2"}),o("div",{children:[s("h4",{className:"font-medium text-blue-900",children:"Create Your First List"}),s("p",{className:"text-sm text-blue-700",children:"Organize your subscribers into targeted lists"})]}),s(N,{to:"/lists/new",children:s(b,{size:"sm",children:"Create List"})})]}),o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-medium",children:"3"}),o("div",{children:[s("h4",{className:"font-medium text-blue-900",children:"Import Subscribers"}),s("p",{className:"text-sm text-blue-700",children:"Add your email subscribers to start sending campaigns"})]}),s(N,{to:"/subscribers/import",children:s(b,{size:"sm",children:"Import"})})]})]})})]})]})})]})]})}var Lo=Object.freeze(Object.defineProperty({__proto__:null,default:Io,loader:To},Symbol.toStringTag,{value:"Module"}));async function Do({request:l}){let t=(await l.formData()).get("email");if(!t)return h({error:"Email is required"},{status:400});let{error:a}=await w.auth.resetPasswordForEmail(t,{redirectTo:`${new URL(l.url).origin}/reset-password`});return a?h({error:a.message},{status:400}):h({message:"Check your email for a password reset link.",email:t})}function Po(){let l=$(),t=U().state==="submitting";return s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o(x,{className:"w-full max-w-md",children:[o(C,{className:"text-center",children:[s("div",{className:"flex justify-center mb-6",children:s(ae,{variant:"dark",size:"lg"})}),s(E,{className:"text-2xl",children:"Reset Password"}),s(k,{children:"Enter your email address and we'll send you a link to reset your password."})]}),o(v,{children:[o(L,{method:"post",className:"space-y-4",children:[s("div",{children:s(j,{type:"email",name:"email",placeholder:"Email address",required:!0,className:"w-full",defaultValue:l?.email||""})}),l?.error&&s("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-md",children:l.error}),l?.message&&s("div",{className:"text-green-600 text-sm text-center bg-green-50 p-3 rounded-md",children:l.message}),s(b,{type:"submit",className:"w-full",disabled:t,children:t?"Sending...":"Send Reset Link"})]}),s("div",{className:"mt-6 text-center",children:o(N,{to:"/login",className:"inline-flex items-center text-blue-600 hover:text-blue-500 text-sm",children:[s(ee,{className:"h-4 w-4 mr-1"}),"Back to sign in"]})})]})]})})}var qo=Object.freeze(Object.defineProperty({__proto__:null,action:Do,default:Po},Symbol.toStringTag,{value:"Module"}));async function Mo({request:l}){let e=await I(l);return h({user:e})}function Bo(){let{user:l}=q();return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),s("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences."})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{title:"SMTP Configuration",description:"Configure your email sending settings and SMTP servers",icon:Pt,href:"/settings/smtp",color:"bg-blue-50 text-blue-600"},{title:"Profile Settings",description:"Update your personal information and account details",icon:qt,href:"/settings/profile",color:"bg-green-50 text-green-600"},{title:"Notifications",description:"Manage your notification preferences and alerts",icon:kn,href:"/settings/notifications",color:"bg-yellow-50 text-yellow-600"},{title:"Security",description:"Password, two-factor authentication, and security settings",icon:Li,href:"/settings/security",color:"bg-red-50 text-red-600"},{title:"Billing",description:"Manage your subscription and billing information",icon:An,href:"/settings/billing",color:"bg-purple-50 text-purple-600"}].map(t=>s(N,{to:t.href,children:s(x,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:s(C,{children:o("div",{className:"flex items-center space-x-4",children:[s("div",{className:`p-3 rounded-lg ${t.color}`,children:s(t.icon,{className:"h-6 w-6"})}),o("div",{children:[s(E,{className:"text-lg",children:t.title}),s(k,{className:"mt-1",children:t.description})]})]})})})},t.href))}),o(x,{className:"mt-8",children:[o(C,{children:[s(E,{children:"Account Information"}),s(k,{children:"Your current account details"})]}),s(v,{children:o("div",{className:"space-y-4",children:[o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Email"}),s("p",{className:"text-gray-900",children:l.email})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Account Created"}),s("p",{className:"text-gray-900",children:new Date(l.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})})]})]})})]})]})}var Ro=Object.freeze(Object.defineProperty({__proto__:null,default:Bo,loader:Mo},Symbol.toStringTag,{value:"Module"}));async function zo({request:l,params:e}){let t=await I(l),a=e.id;if(!a)throw new Response("Subscriber ID required",{status:400});let{data:i,error:r}=await w.from("subscribers").select(`
      *,
      list_subscribers(
        id,
        status,
        subscribed_at,
        unsubscribed_at,
        lists(id, name, color, description)
      )
    `).eq("id",a).eq("user_id",t.id).single();if(r||!i)throw new Response("Subscriber not found",{status:404});return h({user:t,subscriber:i})}function Oo(){let{user:l,subscriber:e}=q(),t=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=i=>{switch(i){case"subscribed":return"bg-green-100 text-green-800";case"unsubscribed":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{className:"flex items-center",children:[s(N,{to:"/subscribers",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Subscribers"]})}),o("div",{children:[o("h2",{className:"text-3xl font-bold text-gray-900",children:[e.first_name," ",e.last_name]}),s("p",{className:"text-gray-600 mt-2",children:e.email})]})]}),s(N,{to:`/subscribers/${e.id}/edit`,children:o(b,{children:[s(Ci,{className:"h-4 w-4 mr-2"}),"Edit Subscriber"]})})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o("div",{className:"lg:col-span-2 space-y-6",children:[o(x,{children:[s(C,{children:o(E,{className:"flex items-center",children:[s(qt,{className:"h-5 w-5 mr-2"}),"Subscriber Information"]})}),s(v,{children:o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Email Address"}),s("p",{className:"text-gray-900 font-medium",children:e.email})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),s("div",{className:"mt-1",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${a(e.status)}`,children:e.status})})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"First Name"}),s("p",{className:"text-gray-900",children:e.first_name||"Not provided"})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Last Name"}),s("p",{className:"text-gray-900",children:e.last_name||"Not provided"})]})]})})]}),o(x,{children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(ue,{className:"h-5 w-5 mr-2"}),"List Memberships"]}),s(k,{children:"Lists this subscriber is a member of"})]}),s(v,{children:e.list_subscribers&&e.list_subscribers.length>0?s("div",{className:"space-y-3",children:e.list_subscribers.map(i=>o("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i.lists.color}}),o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:i.lists.name}),i.lists.description&&s("p",{className:"text-sm text-gray-600",children:i.lists.description})]})]}),o("div",{className:"text-right",children:[s("span",{className:`px-2 py-1 text-xs rounded-full ${a(i.status)}`,children:i.status}),i.subscribed_at&&o("p",{className:"text-xs text-gray-500 mt-1",children:["Joined ",t(i.subscribed_at)]})]})]},i.id))}):o("div",{className:"text-center py-6",children:[s(ue,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:"Not subscribed to any lists"})]})})]})]}),o("div",{className:"space-y-6",children:[o(x,{children:[s(C,{children:o(E,{className:"flex items-center",children:[s(Ce,{className:"h-5 w-5 mr-2"}),"Activity Timeline"]})}),s(v,{children:o("div",{className:"space-y-4",children:[o("div",{className:"flex items-start space-x-3",children:[s("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2"}),o("div",{children:[s("p",{className:"text-sm font-medium text-gray-900",children:"Account Created"}),s("p",{className:"text-xs text-gray-500",children:t(e.created_at)})]})]}),e.subscribed_at&&o("div",{className:"flex items-start space-x-3",children:[s("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2"}),o("div",{children:[s("p",{className:"text-sm font-medium text-gray-900",children:"Subscribed"}),s("p",{className:"text-xs text-gray-500",children:t(e.subscribed_at)})]})]}),e.unsubscribed_at&&o("div",{className:"flex items-start space-x-3",children:[s("div",{className:"w-2 h-2 rounded-full bg-red-500 mt-2"}),o("div",{children:[s("p",{className:"text-sm font-medium text-gray-900",children:"Unsubscribed"}),s("p",{className:"text-xs text-gray-500",children:t(e.unsubscribed_at)})]})]}),o("div",{className:"flex items-start space-x-3",children:[s("div",{className:"w-2 h-2 rounded-full bg-gray-400 mt-2"}),o("div",{children:[s("p",{className:"text-sm font-medium text-gray-900",children:"Last Updated"}),s("p",{className:"text-xs text-gray-500",children:t(e.updated_at)})]})]})]})})]}),o(x,{children:[s(C,{children:s(E,{children:"Quick Actions"})}),s(v,{children:o("div",{className:"space-y-3",children:[s(N,{to:`/subscribers/${e.id}/edit`,className:"block",children:o(b,{variant:"outline",className:"w-full justify-start",children:[s(Ci,{className:"h-4 w-4 mr-2"}),"Edit Subscriber"]})}),o(b,{variant:"outline",className:"w-full justify-start",children:[s(Y,{className:"h-4 w-4 mr-2"}),"Send Email"]})]})})]})]})]})]})})]})]})}var Uo=Object.freeze(Object.defineProperty({__proto__:null,default:Oo,loader:zo},Symbol.toStringTag,{value:"Module"}));async function Ho({request:l}){let e=await I(l),{data:t,error:a}=await w.from("lists").select("*").eq("user_id",e.id).eq("is_active",!0).order("name");return a?(console.error("Lists fetch error:",a),h({user:e,lists:[],error:"Failed to load lists"})):h({user:e,lists:t})}async function Fo({request:l}){let e=await I(l),t=await l.formData(),a=t.get("email"),i=t.get("firstName"),r=t.get("lastName"),n=t.getAll("lists");if(!a)return h({error:"Email is required"},{status:400});let{data:c}=await w.from("subscribers").select("id").eq("user_id",e.id).eq("email",a).single();if(c)return h({error:"A subscriber with this email already exists"},{status:400});let{data:d,error:p}=await w.from("subscribers").insert({user_id:e.id,email:a,first_name:i||"",last_name:r||"",status:"subscribed",subscribed_at:new Date().toISOString()}).select("id").single();if(p)return console.error("Subscriber creation error:",p),h({error:"Failed to create subscriber"},{status:500});if(n.length>0){let m=n.map(u=>({subscriber_id:d.id,list_id:u,status:"subscribed",subscribed_at:new Date().toISOString()})),{error:f}=await w.from("list_subscribers").insert(m);f&&console.error("List subscription error:",f)}return F("/subscribers")}function $o(){let{user:l,lists:e,error:t}=q(),a=$(),r=U().state==="submitting";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-2xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/subscribers",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Subscribers"]})}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Add New Subscriber"}),s("p",{className:"text-gray-600 mt-2",children:"Add a new subscriber to your mailing lists."})]})]}),t&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:t})})}),a?.error&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:a.error})})}),o(x,{children:[o(C,{children:[s(E,{children:"Subscriber Information"}),s(k,{children:"Enter the subscriber's details and select which lists they should join."})]}),s(v,{children:o(L,{method:"post",className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),s(j,{name:"email",type:"email",placeholder:"subscriber@example.com",required:!0,className:"w-full"})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),s(j,{name:"firstName",placeholder:"John",className:"w-full"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),s(j,{name:"lastName",placeholder:"Doe",className:"w-full"})]})]}),e.length>0&&o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Subscribe to Lists"}),s("div",{className:"space-y-2 max-h-48 overflow-y-auto border rounded-lg p-3",children:e.map(n=>o("div",{className:"flex items-center space-x-2",children:[s("input",{type:"checkbox",id:`list-${n.id}`,name:"lists",value:n.id,className:"rounded border-gray-300"}),o("label",{htmlFor:`list-${n.id}`,className:"text-sm text-gray-700 flex items-center",children:[s("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:n.color}}),n.name,n.description&&o("span",{className:"text-gray-500 ml-2",children:["- ",n.description]})]})]},n.id))}),s("p",{className:"text-xs text-gray-500 mt-2",children:"Select which lists this subscriber should be added to."})]}),e.length===0&&s(x,{className:"border-yellow-200 bg-yellow-50",children:o(v,{className:"p-4",children:[s("p",{className:"text-yellow-800 mb-2",children:"You don't have any lists yet."}),s("p",{className:"text-yellow-700 text-sm",children:"The subscriber will be added to your general subscriber list. You can create lists later and organize your subscribers."})]})}),o("div",{className:"flex space-x-4",children:[o(b,{type:"submit",disabled:r,className:"flex-1",children:[s(Di,{className:"h-4 w-4 mr-2"}),r?"Adding Subscriber...":"Add Subscriber"]}),s(N,{to:"/subscribers",className:"flex-1",children:s(b,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}var Vo=Object.freeze(Object.defineProperty({__proto__:null,action:Fo,default:$o,loader:Ho},Symbol.toStringTag,{value:"Module"}));async function Yo(){return h({mockListData:{"ac70fb2e-53c2-46bb-9b29-50e4b695bdc9":{id:"ac70fb2e-53c2-46bb-9b29-50e4b695bdc9",name:"Newsletter Subscribers",description:"General newsletter subscribers who signed up for weekly updates",color:"#3B82F6",subscribed_members:1200,total_members:1250,is_active:!0,created_at:"2024-01-15T10:00:00.000Z",members:[{id:"1",email:"john.doe@example.com",first_name:"John",last_name:"Doe",subscribed:!0,added_at:"2024-01-15T10:00:00.000Z"},{id:"2",email:"jane.smith@example.com",first_name:"Jane",last_name:"Smith",subscribed:!0,added_at:"2024-01-16T09:30:00.000Z"},{id:"3",email:"bob.wilson@example.com",first_name:"Bob",last_name:"Wilson",subscribed:!1,added_at:"2024-01-17T14:15:00.000Z"},{id:"4",email:"alice.brown@example.com",first_name:"Alice",last_name:"Brown",subscribed:!0,added_at:"2024-01-18T11:45:00.000Z"},{id:"5",email:"charlie.davis@example.com",first_name:"Charlie",last_name:"Davis",subscribed:!0,added_at:"2024-01-19T16:20:00.000Z"}]}}})}function Ko(){let{mockListData:l}=q(),t=bn().id||"ac70fb2e-53c2-46bb-9b29-50e4b695bdc9",a=l[t]||l["ac70fb2e-53c2-46bb-9b29-50e4b695bdc9"];return o("div",{className:"min-h-screen bg-gray-50",children:[s("header",{className:"bg-white shadow-sm border-b",children:s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s("div",{className:"flex items-center justify-between h-16",children:o("div",{className:"flex items-center space-x-4",children:[s(N,{to:"/demo",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Demo"]})}),s("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm rounded-full",children:"Demo Mode"})]})})})}),o("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{className:"flex items-center",children:[s("div",{className:"w-6 h-6 rounded-full mr-3",style:{backgroundColor:a.color}}),o("div",{children:[s("h1",{className:"text-3xl font-bold text-gray-900",children:a.name}),a.description&&s("p",{className:"text-gray-600 mt-2",children:a.description})]})]}),s("span",{className:`px-3 py-1 text-sm rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.is_active?"Active":"Inactive"})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),s("p",{className:"text-2xl font-bold text-gray-900",children:a.total_members})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(Y,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Subscribed"}),s("p",{className:"text-2xl font-bold text-gray-900",children:a.subscribed_members})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(Ce,{className:"h-6 w-6 text-purple-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Created"}),s("p",{className:"text-2xl font-bold text-gray-900",children:new Date(a.created_at).toLocaleDateString()})]})]})})})]}),o(x,{children:[o(C,{children:[o(E,{children:["List Members (",a.members.length,")"]}),s(k,{children:"Sample members in this list - in the real app, you can add, remove, and manage recipients"})]}),s(v,{children:s("div",{className:"overflow-x-auto",children:o("table",{className:"w-full",children:[s("thead",{children:o("tr",{className:"border-b",children:[s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Email"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Name"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Added"})]})}),s("tbody",{children:a.members.map(i=>o("tr",{className:"border-b hover:bg-gray-50",children:[s("td",{className:"py-3 px-4 text-sm text-gray-900",children:i.email}),s("td",{className:"py-3 px-4 text-sm text-gray-600",children:[i.first_name,i.last_name].filter(Boolean).join(" ")||"-"}),s("td",{className:"py-3 px-4 text-sm",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${i.subscribed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:i.subscribed?"Subscribed":"Unsubscribed"})}),s("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(i.added_at).toLocaleDateString()})]},i.id))})]})})})]}),s("div",{className:"mt-8",children:s(x,{className:"border-blue-200 bg-blue-50",children:o(v,{className:"p-6",children:[s("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Demo Mode Information"}),s("p",{className:"text-blue-800 text-sm mb-4",children:"This is a preview of your list detail page with sample data. In the full version, you can:"}),o("ul",{className:"text-blue-800 text-sm space-y-1 list-disc list-inside",children:[s("li",{children:"Add and remove recipients from lists"}),s("li",{children:"Import recipients from CSV files"}),s("li",{children:"Create targeted email campaigns using these lists"}),s("li",{children:"Track subscriber engagement and statistics"}),s("li",{children:"Manage subscription preferences"})]}),o("div",{className:"mt-4",children:[s(N,{to:"/demo",children:s(b,{variant:"outline",className:"mr-4",children:"\u2190 Back to Dashboard"})}),s(b,{onClick:()=>window.open("/setup-demo.md","_blank"),children:"View Setup Guide"})]})]})})})]})]})}var Go=Object.freeze(Object.defineProperty({__proto__:null,default:Ko,loader:Yo},Symbol.toStringTag,{value:"Module"}));async function Qo({request:l}){let t=new URL(l.url).searchParams.get("code");return t?h({code:t}):F("/login?error=Invalid reset link")}async function Xo({request:l}){let e=await l.formData(),t=e.get("password"),a=e.get("confirmPassword"),i=e.get("code");if(!t||!a||!i)return h({error:"All fields are required"},{status:400});if(t!==a)return h({error:"Passwords do not match"},{status:400});if(t.length<6)return h({error:"Password must be at least 6 characters"},{status:400});let{data:r,error:n}=await w.auth.exchangeCodeForSession(i);if(n||!r.session)return h({error:"Invalid or expired reset link"},{status:400});let{data:c,error:d}=await w.auth.updateUser({password:t});return d?h({error:d.message},{status:400}):Ie(r.session.access_token,r.session.refresh_token,"/dashboard?message=Password updated successfully")}function Jo(){let[l,e]=ce(!1),[t,a]=ce(!1),i=$(),r=U(),[n]=yn(),c=r.state==="submitting",d=n.get("code");return s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o(x,{className:"w-full max-w-md",children:[o(C,{className:"text-center",children:[s("div",{className:"flex justify-center mb-6",children:s(ae,{variant:"dark",size:"lg"})}),s(E,{className:"text-2xl",children:"Set New Password"}),s(k,{children:"Enter your new password below."})]}),s(v,{children:o(L,{method:"post",className:"space-y-4",children:[s("input",{type:"hidden",name:"code",value:d||""}),o("div",{className:"relative",children:[s(j,{type:l?"text":"password",name:"password",placeholder:"New password",required:!0,className:"w-full pr-10",minLength:6}),s("button",{type:"button",onClick:()=>e(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s(It,{className:"h-4 w-4"}):s(Lt,{className:"h-4 w-4"})})]}),o("div",{className:"relative",children:[s(j,{type:t?"text":"password",name:"confirmPassword",placeholder:"Confirm new password",required:!0,className:"w-full pr-10",minLength:6}),s("button",{type:"button",onClick:()=>a(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?s(It,{className:"h-4 w-4"}):s(Lt,{className:"h-4 w-4"})})]}),i?.error&&s("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-md",children:i.error}),s(b,{type:"submit",className:"w-full",disabled:c,children:c?"Updating...":"Update Password"})]})})]})})}var Wo=Object.freeze(Object.defineProperty({__proto__:null,action:Xo,default:Jo,loader:Qo},Symbol.toStringTag,{value:"Module"}));async function Zo({request:l}){var e;let t=new URL(l.url),a=t.searchParams.get("code"),i=t.searchParams.get("next")||"/dashboard";if(a){let{data:r,error:n}=await w.auth.exchangeCodeForSession(a);if(n)return console.error("Auth callback error:",n),new Response("Authentication failed",{status:400});if(r.session&&r.user){let{error:c}=await w.from("profiles").upsert({id:r.user.id,email:r.user.email,full_name:((e=r.user.user_metadata)==null?void 0:e.full_name)||null,updated_at:new Date().toISOString()});return c&&console.error("Profile creation error:",c),Ie(r.session.access_token,r.session.refresh_token,i)}}return new Response(null,{status:302,headers:{Location:"/login?error=Authentication failed"}})}var el=Object.freeze(Object.defineProperty({__proto__:null,loader:Zo},Symbol.toStringTag,{value:"Module"}));async function tl({request:l}){return(await de(l.headers.get("Cookie"))).has("userId")?F("/dashboard"):h({})}async function sl({request:l}){let e=await l.formData(),t=e.get("email"),a=e.get("password"),i=e.get("fullName");if(!t||!a||!i)return h({error:"All fields are required"},{status:400});if(a.length<6)return h({error:"Password must be at least 6 characters"},{status:400});let{data:r,error:n}=await w.auth.signUp({email:t,password:a,options:{data:{full_name:i}}});if(n)return h({error:n.message},{status:400});if(!r.user)return h({error:"Registration failed"},{status:400});let{error:c}=await w.from("profiles").insert({id:r.user.id,email:r.user.email,full_name:i});c&&console.error("Profile creation error:",c);let d=await de(l.headers.get("Cookie"));return d.set("userId",r.user.id),d.set("userEmail",r.user.email),F("/dashboard",{headers:{"Set-Cookie":await Bt(d)}})}function il(){let l=$(),t=U().state==="submitting";return s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:o("div",{className:"w-full max-w-md",children:[o("div",{className:"text-center mb-8",children:[s(ae,{size:"xl",className:"justify-center mb-4"}),s("h1",{className:"text-2xl font-bold text-gray-900",children:"Create your account"}),s("p",{className:"text-gray-600 mt-2",children:"Start your email marketing journey with xMailer"})]}),o(x,{children:[o(C,{children:[s(E,{children:"Sign Up"}),s(k,{children:"Create your xMailer account to get started"})]}),o(v,{children:[o(L,{method:"post",className:"space-y-4",children:[o("div",{children:[s("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),s(j,{id:"fullName",name:"fullName",type:"text",required:!0,placeholder:"Enter your full name",className:"w-full"})]}),o("div",{children:[s("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s(j,{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email",className:"w-full"})]}),o("div",{children:[s("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s(j,{id:"password",name:"password",type:"password",required:!0,placeholder:"Create a password (min. 6 characters)",className:"w-full"})]}),l?.error&&s("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:l.error}),s(b,{type:"submit",disabled:t,className:"w-full",children:t?"Creating account...":"Create Account"})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s(N,{to:"/auth/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Sign in"})]})})]})]})]})})}var al=Object.freeze(Object.defineProperty({__proto__:null,action:sl,default:il,loader:tl},Symbol.toStringTag,{value:"Module"}));async function rl({request:l,params:e}){let t=await I(l),a=e.id;if(!a)throw new Response("Campaign not found",{status:404});let{data:i,error:r}=await w.from("campaigns").select("*").eq("id",a).eq("user_id",t.id).single();if(r||!i)throw new Response("Campaign not found",{status:404});let c=new URL(l.url).searchParams.get("sending")==="true";return h({user:t,campaign:i,sending:c})}async function nl({request:l,params:e}){let t=await I(l),a=e.id;return(await l.formData()).get("_action")==="send_now"?(await w.from("campaigns").update({status:"sending",updated_at:new Date().toISOString()}).eq("id",a).eq("user_id",t.id),Oi(a).catch(console.error),h({success:"Campaign sending started"})):h({error:"Invalid action"},{status:400})}function ol(){let{user:l,campaign:e,sending:t}=q(),a=U(),[i,r]=ce(!1);Mi(()=>{if(e.status==="sending"||t){let p=setInterval(()=>{r(!0),window.location.reload()},3e3);return()=>clearInterval(p)}},[e.status,t]);let n=e.total_recipients>0?Math.round(e.sent_count/e.total_recipients*100):0,c={draft:"bg-gray-100 text-gray-800",sending:"bg-blue-100 text-blue-800",sent:"bg-green-100 text-green-800",scheduled:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",partially_sent:"bg-orange-100 text-orange-800"}[e.status]||"bg-gray-100 text-gray-800",d=["draft","scheduled"].includes(e.status);return["sending"].includes(e.status),o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/campaigns",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})}),o("div",{className:"flex-1",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:e.name}),s("p",{className:"text-gray-600 mt-2",children:e.subject})]}),o("div",{className:"flex items-center space-x-3",children:[o("span",{className:`px-3 py-1 text-sm rounded-full ${c}`,children:[e.status.replace("_"," "),i&&s(Tn,{className:"inline h-3 w-3 ml-1 animate-spin"})]}),d&&s(L,{method:"post",children:o(b,{type:"submit",name:"_action",value:"send_now",className:"bg-green-600 hover:bg-green-700",disabled:a.state==="submitting",children:[s(In,{className:"h-4 w-4 mr-2"}),a.state==="submitting"?"Starting...":"Send Now"]})}),e.status==="draft"&&s(N,{to:`/campaigns/${e.id}/edit`,children:s(b,{variant:"outline",children:"Edit Campaign"})})]})]}),(e.status==="sending"||t)&&s(x,{className:"mb-8 border-blue-200 bg-blue-50",children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"animate-pulse",children:s(Y,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("h3",{className:"text-lg font-medium text-blue-900",children:"Campaign is sending..."}),o("p",{className:"text-blue-700",children:[e.sent_count," of ",e.total_recipients," emails sent"]})]})]})})}),o("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(Y,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Emails Sent"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.sent_count})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(M,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Recipients"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.total_recipients})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(le,{className:"h-6 w-6 text-purple-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Delivery Rate"}),o("p",{className:"text-2xl font-bold text-gray-900",children:[n,"%"]})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-orange-50",children:s(Pi,{className:"h-6 w-6 text-orange-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),s("p",{className:"text-lg font-bold text-gray-900 capitalize",children:e.status.replace("_"," ")})]})]})})})]}),e.total_recipients>0&&s(x,{className:"mb-8",children:o(v,{className:"p-6",children:[o("div",{className:"flex items-center justify-between mb-2",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:"Sending Progress"}),o("span",{className:"text-sm text-gray-600",children:[e.sent_count," of ",e.total_recipients," sent"]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s("div",{className:`h-3 rounded-full transition-all duration-300 ${e.status==="sending"?"bg-blue-600":e.status==="sent"?"bg-green-600":e.status==="failed"?"bg-red-600":"bg-gray-400"}`,style:{width:`${n}%`}})})]})}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o(x,{children:[s(C,{children:s(E,{children:"Campaign Information"})}),o(v,{className:"space-y-4",children:[o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Campaign Name"}),s("p",{className:"text-gray-900",children:e.name})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Subject Line"}),s("p",{className:"text-gray-900",children:e.subject})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Created"}),s("p",{className:"text-gray-900",children:Se(e.created_at)})]}),e.scheduled_at&&o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Scheduled For"}),s("p",{className:"text-gray-900",children:Se(e.scheduled_at)})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),s("p",{className:"text-gray-900",children:Se(e.updated_at)})]}),o("div",{children:[s("label",{className:"text-sm font-medium text-gray-600",children:"Targeting"}),s("p",{className:"text-gray-900",children:e.target_all_subscribers?"All Subscribers":"Selected Lists"})]})]})]}),o(x,{children:[s(C,{children:s(E,{children:"Email Content Preview"})}),s(v,{children:s("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto",children:s("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.html_content||"No content available"}})})})]})]})]})})]})]})}var ll=Object.freeze(Object.defineProperty({__proto__:null,action:nl,default:ol,loader:rl},Symbol.toStringTag,{value:"Module"})),zt=te.forwardRef(({className:l,...e},t)=>s("textarea",{className:V("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",l),ref:t,...e}));zt.displayName="Textarea";async function cl({request:l}){let e=await I(l),{data:t,error:a}=await w.from("lists_with_counts").select("*").eq("user_id",e.id).eq("is_active",!0).order("name");return a?(console.error("Lists fetch error:",a),h({user:e,lists:[],error:"Failed to load lists"})):h({user:e,lists:t})}async function dl({request:l}){let e=await I(l),t=await l.formData(),a=t.get("_action"),i=t.get("name"),r=t.get("subject"),n=t.get("content"),c=t.get("targetAllSubscribers")==="true",d=t.getAll("includeLists"),p=t.getAll("excludeLists"),m=t.get("scheduledDate"),f=t.get("scheduledTime");if(!i||!r||!n)return h({error:"Campaign name, subject, and content are required"},{status:400});if(!c&&d.length===0)return h({error:'Please select at least one list to target or enable "Target All Subscribers"'},{status:400});let u=null;if(a==="schedule"){if(!m||!f)return h({error:"Please select both date and time for scheduling"},{status:400});let T=new Date(`${m}T${f}`);if(T<=new Date)return h({error:"Scheduled time must be in the future"},{status:400});u=T.toISOString()}let g=0;if(c){let{count:T}=await w.from("subscribers").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","subscribed");g=T||0}else{let{data:T}=await w.from("lists_with_counts").select("subscribed_members").in("id",d);g=T?.reduce((re,ne)=>re+(ne.subscribed_members||0),0)||0}let y={user_id:e.id,name:i,subject:r,html_content:n,target_all_subscribers:c,include_lists:d.length>0?d:null,exclude_lists:p.length>0?p:null,status:a==="save"?"draft":a==="send"?"sending":"scheduled",scheduled_at:u,sent_count:0,total_recipients:g,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:_,error:D}=await w.from("campaigns").insert(y).select("id").single();return D?(console.error("Campaign creation error:",D),h({error:"Failed to create campaign"},{status:500})):a==="send"?F(`/campaigns/${_.id}?sending=true`):a==="save"?h({success:"Campaign saved as draft",campaignId:_.id}):h({success:`Campaign scheduled for ${new Date(u).toLocaleString()}`,campaignId:_.id})}function pl(){let{user:l,lists:e,error:t}=q(),a=$(),r=U().state==="submitting",n=new Date,c=new Date(n);c.setDate(c.getDate()+1);let d=c.toISOString().split("T")[0],p="09:00";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/campaigns",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Create New Campaign"}),s("p",{className:"text-gray-600 mt-2",children:"Design and send your email campaign to your audience."})]})]}),t&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:t})})}),o(L,{method:"post",className:"space-y-8",children:[o(x,{children:[o(C,{children:[s(E,{children:"Campaign Details"}),s(k,{children:"Basic information about your email campaign"})]}),o(v,{className:"space-y-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name *"}),s(j,{name:"name",placeholder:"e.g., Weekly Newsletter - January 2024",required:!0,className:"w-full"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Subject *"}),s(j,{name:"subject",placeholder:"e.g., Your Weekly Update from xMailer",required:!0,className:"w-full"})]})]})]}),o(x,{children:[o(C,{children:[s(E,{children:"Email Content"}),s(k,{children:"Write your email content (HTML supported)"})]}),o(v,{children:[s(zt,{name:"content",placeholder:"Write your email content here. HTML is supported for formatting.",required:!0,className:"w-full min-h-[300px]"}),s("p",{className:"text-xs text-gray-500 mt-2",children:"HTML tags are supported for formatting your email content."})]})]}),o(x,{children:[o(C,{children:[s(E,{children:"Audience Targeting"}),s(k,{children:"Choose who will receive this campaign"})]}),o(v,{className:"space-y-6",children:[o("div",{className:"flex items-center space-x-2",children:[s("input",{type:"checkbox",id:"targetAllSubscribers",name:"targetAllSubscribers",value:"true",className:"rounded border-gray-300"}),s("label",{htmlFor:"targetAllSubscribers",className:"text-sm font-medium text-gray-700",children:"Target all subscribers"})]}),e.length>0&&o(pn,{children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Include Lists"}),s("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:e.map(m=>o("div",{className:"flex items-center space-x-2",children:[s("input",{type:"checkbox",id:`include-${m.id}`,name:"includeLists",value:m.id,className:"rounded border-gray-300"}),o("label",{htmlFor:`include-${m.id}`,className:"text-sm text-gray-700 flex items-center",children:[s("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:m.color}}),m.name," (",m.subscribed_members||0," subscribers)"]})]},m.id))})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exclude Lists (Optional)"}),s("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:e.map(m=>o("div",{className:"flex items-center space-x-2",children:[s("input",{type:"checkbox",id:`exclude-${m.id}`,name:"excludeLists",value:m.id,className:"rounded border-gray-300"}),o("label",{htmlFor:`exclude-${m.id}`,className:"text-sm text-gray-700 flex items-center",children:[s("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:m.color}}),m.name]})]},m.id))})]})]}),e.length===0&&o("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[s("p",{className:"text-gray-600 mb-4",children:"You don't have any active lists yet."}),s(N,{to:"/lists",children:s(b,{variant:"outline",children:"Create Your First List"})})]})]})]}),o(x,{children:[o(C,{children:[s(E,{children:"Scheduling Options"}),s(k,{children:"Choose when to send your campaign"})]}),o(v,{className:"space-y-4",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule Date"}),s(j,{type:"date",name:"scheduledDate",defaultValue:d,min:d,className:"w-full"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule Time"}),s(j,{type:"time",name:"scheduledTime",defaultValue:p,className:"w-full"})]})]}),s("p",{className:"text-xs text-gray-500",children:"Leave date and time fields for immediate sending, or set them for scheduled delivery."})]})]}),a?.error&&s(x,{className:"border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:a.error})})}),a?.success&&s(x,{className:"border-green-200 bg-green-50",children:o(v,{className:"p-4",children:[s("p",{className:"text-green-800",children:a.success}),a.campaignId&&s("div",{className:"mt-2",children:s(N,{to:`/campaigns/${a.campaignId}`,children:s(b,{variant:"outline",size:"sm",children:"View Campaign"})})})]})}),o("div",{className:"flex flex-wrap gap-4",children:[o(b,{type:"submit",name:"_action",value:"save",variant:"outline",disabled:r,children:[s(Ai,{className:"h-4 w-4 mr-2"}),r?"Saving...":"Save as Draft"]}),o(b,{type:"submit",name:"_action",value:"send",disabled:r,className:"bg-green-600 hover:bg-green-700",children:[s(Te,{className:"h-4 w-4 mr-2"}),r?"Sending...":"Send Now"]}),o(b,{type:"submit",name:"_action",value:"schedule",disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:[s(Pi,{className:"h-4 w-4 mr-2"}),r?"Scheduling...":"Schedule Campaign"]})]})]})]})})]})]})}var ml=Object.freeze(Object.defineProperty({__proto__:null,action:dl,default:pl,loader:cl},Symbol.toStringTag,{value:"Module"}));async function ul({request:l}){let e={host:process.env.SMTP_HOST||"",port:parseInt(process.env.SMTP_PORT||"587"),user:process.env.SMTP_USER||"",fromEmail:process.env.FROM_EMAIL||""};return h({smtpSettings:e})}async function hl({request:l}){let e=await l.formData(),t=e.get("_action"),a=e.get("host"),i=parseInt(e.get("port")),r=e.get("user"),n=e.get("pass"),c=e.get("fromEmail");if(!a||!i||!r||!n)return h({success:!1,error:"All SMTP fields are required"});let d={host:a,port:i,auth:{user:r,pass:n}};if(t==="test")try{let p=await to(d);return h({success:p.success,message:p.success?a==="smtp.postmarkapp.com"?"Postmark API connection successful!":"SMTP connection successful!":`Connection failed: ${p.error}`,error:p.error})}catch(p){return h({success:!1,error:p instanceof Error?p.message:"Unknown error occurred"})}if(t==="send-test"){let p=e.get("testEmail");if(!p)return h({success:!1,error:"Test email address is required"});if(!c)return h({success:!1,error:"From email address is required"});try{let m=await so(d,c,p);return h({success:m.success,message:m.success?`Test email sent successfully! ${m.messageId?`Message ID: ${m.messageId}`:""}`:`Failed to send test email: ${m.error}`,error:m.error})}catch(m){return h({success:!1,error:m instanceof Error?m.message:"Unknown error occurred"})}}return t==="save"?h({success:!0,message:"SMTP settings saved successfully!"}):h({success:!1,error:"Invalid action"})}function fl(){var l,e;let{smtpSettings:t}=q(),a=$(),i=U(),r=i.state==="submitting",n=(l=i.formData)==null?void 0:l.get("_action");return o("div",{className:"max-w-2xl mx-auto p-6",children:[s("h1",{className:"text-2xl font-bold mb-6",children:"SMTP Settings"}),o(L,{method:"post",className:"space-y-4",children:[o("div",{children:[s("label",{htmlFor:"host",className:"block text-sm font-medium mb-1",children:"SMTP Host"}),s("input",{type:"text",id:"host",name:"host",defaultValue:t.host,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"smtp.postmarkapp.com",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"For Postmark: smtp.postmarkapp.com (will use API for better reliability)"})]}),o("div",{children:[s("label",{htmlFor:"port",className:"block text-sm font-medium mb-1",children:"SMTP Port"}),s("input",{type:"number",id:"port",name:"port",defaultValue:t.port,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"587",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Use 587 for TLS or 465 for SSL"})]}),o("div",{children:[s("label",{htmlFor:"user",className:"block text-sm font-medium mb-1",children:"Username / API Token"}),s("input",{type:"text",id:"user",name:"user",defaultValue:t.user,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your-server-api-token",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"For Postmark: Use your Server API Token"})]}),o("div",{children:[s("label",{htmlFor:"pass",className:"block text-sm font-medium mb-1",children:"Password / API Token"}),s("input",{type:"password",id:"pass",name:"pass",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"your-server-api-token",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"For Postmark: Use the same Server API Token as username"})]}),o("div",{children:[s("label",{htmlFor:"fromEmail",className:"block text-sm font-medium mb-1",children:"From Email Address"}),s("input",{type:"email",id:"fromEmail",name:"fromEmail",defaultValue:t.fromEmail,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"noreply@yourdomain.com",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Must be a verified sender in Postmark"})]}),o("div",{children:[s("label",{htmlFor:"testEmail",className:"block text-sm font-medium mb-1",children:"Test Email Address"}),s("input",{type:"email",id:"testEmail",name:"testEmail",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"test@example.com"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Email address to send test email to"})]}),o("div",{className:"flex gap-4 flex-wrap",children:[s("button",{type:"submit",name:"_action",value:"test",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",disabled:r,children:r&&n==="test"?"Testing...":"Test Connection"}),s("button",{type:"submit",name:"_action",value:"send-test",className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",disabled:r,children:r&&n==="send-test"?"Sending...":"Send Test Email"}),s("button",{type:"submit",name:"_action",value:"save",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",disabled:r,children:r&&n==="save"?"Saving...":"Save Settings"})]})]}),a&&o("div",{className:`mt-4 p-4 rounded-md ${a.success?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[s("div",{className:"font-medium",children:a.success?"Success!":"Error!"}),s("div",{className:"mt-1",children:a.message||a.error})]}),o("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[s("h3",{className:"font-medium text-blue-900 mb-2",children:"Email Provider Configuration:"}),o("div",{className:"text-sm text-blue-800 space-y-3",children:[o("div",{children:[s("strong",{children:"Postmark (Recommended):"}),o("ul",{className:"ml-4 mt-1 space-y-1",children:[s("li",{children:"\u2022 Host: smtp.postmarkapp.com"}),s("li",{children:"\u2022 Port: 587"}),s("li",{children:"\u2022 Username & Password: Your Server API Token"}),s("li",{children:"\u2022 Uses API for better reliability in WebContainer"})]})]}),o("div",{children:[s("strong",{children:"Gmail:"}),o("ul",{className:"ml-4 mt-1 space-y-1",children:[s("li",{children:"\u2022 Host: smtp.gmail.com"}),s("li",{children:"\u2022 Port: 587"}),s("li",{children:"\u2022 Username: Your Gmail address"}),s("li",{children:"\u2022 Password: App-specific password (not your regular password)"})]})]})]})]}),a&&!a.success&&((e=a.error)==null?void 0:e.includes("timeout"))&&o("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[s("div",{className:"font-medium text-yellow-800",children:"Network Timeout Notice"}),s("div",{className:"mt-1 text-sm text-yellow-700",children:"SMTP connections may be restricted in this environment. For Postmark users, the system will automatically use the API instead of SMTP for better reliability."})]})]})}var gl=Object.freeze(Object.defineProperty({__proto__:null,action:hl,default:fl,loader:ul},Symbol.toStringTag,{value:"Module"}));async function xl({request:l}){let e=await I(l),{data:t,error:a}=await w.from("lists_with_counts").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("Lists fetch error:",a),h({user:e,lists:[],error:"Failed to load lists"})):h({user:e,lists:t})}function vl(){let{user:l,lists:e,error:t}=q(),a=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"flex items-center justify-between mb-8",children:[o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Lists"}),s("p",{className:"text-gray-600 mt-2",children:"Organize your subscribers into targeted lists."})]}),s(N,{to:"/lists/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"Create List"]})})]}),t&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:t})})}),e.length===0?s(x,{children:o(v,{className:"text-center py-12",children:[s(ue,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No lists yet"}),s("p",{className:"text-gray-600 mb-6",children:"Create your first list to start organizing your subscribers."}),s(N,{to:"/lists/new",children:o(b,{children:[s(K,{className:"h-4 w-4 mr-2"}),"Create Your First List"]})})]})}):s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>o(x,{className:"hover:shadow-lg transition-shadow",children:[o(C,{children:[o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i.color}}),s(E,{className:"text-lg",children:i.name})]}),s(b,{variant:"ghost",size:"sm",children:s(Ln,{className:"h-4 w-4"})})]}),i.description&&s(k,{children:i.description})]}),s(v,{children:o("div",{className:"space-y-4",children:[o("div",{className:"flex items-center justify-between text-sm",children:[o("div",{className:"flex items-center text-gray-600",children:[s(M,{className:"h-4 w-4 mr-2"}),o("span",{children:[i.subscribed_members||0," subscribers"]})]}),o("div",{className:"flex items-center text-gray-600",children:[s(Ce,{className:"h-4 w-4 mr-2"}),s("span",{children:a(i.created_at)})]})]}),o("div",{className:"flex space-x-2",children:[s(N,{to:`/lists/${i.id}`,className:"flex-1",children:s(b,{variant:"outline",size:"sm",className:"w-full",children:"View"})}),s(N,{to:`/lists/${i.id}/edit`,className:"flex-1",children:s(b,{variant:"outline",size:"sm",className:"w-full",children:"Edit"})})]})]})})]},i.id))})]})})]})]})}var bl=Object.freeze(Object.defineProperty({__proto__:null,default:vl,loader:xl},Symbol.toStringTag,{value:"Module"}));async function yl({request:l}){let e=await I(l),{data:t,error:a}=await w.from("lists").select("id, name, color").eq("user_id",e.id).eq("is_active",!0).order("name");return a?(console.error("Lists fetch error:",a),h({user:e,lists:[]})):h({user:e,lists:t})}async function wl({request:l}){var e;let t=await I(l),a=await l.formData(),i=a.get("csvData"),r=a.get("listId"),n=a.get("createNewList")==="on",c=a.get("newListName");if(!i)return h({error:"CSV data is required"},{status:400});try{let d=i.trim().split(`
`);if(d.length<2)return h({error:"CSV must have at least a header row and one data row"},{status:400});let p=d[0].split(",").map(P=>P.trim().toLowerCase()),m=p.findIndex(P=>P.includes("email")),f=p.findIndex(P=>P.includes("first")&&P.includes("name")),u=p.findIndex(P=>P.includes("last")&&P.includes("name"));if(m===-1)return h({error:"CSV must contain an email column"},{status:400});let g=r;if(n&&c){let{data:P,error:X}=await w.from("lists").insert({user_id:t.id,name:c,description:`Imported from CSV on ${new Date().toLocaleDateString()}`,color:"#3B82F6",is_active:!0}).select("id").single();if(X)return h({error:"Failed to create new list"},{status:500});g=P.id}if(!g)return h({error:"Please select a list or create a new one"},{status:400});let y=[],_=[],D=[];for(let P=1;P<d.length;P++){let X=d[P].split(",").map(Fi=>Fi.trim().replace(/"/g,"")),he=(e=X[m])==null?void 0:e.toLowerCase();if(!he||!he.includes("@")){_.push(`Row ${P+1}: Invalid email address`);continue}let Ui=f!==-1?X[f]:null,Hi=u!==-1?X[u]:null;y.push({email:he,first_name:Ui||null,last_name:Hi||null,user_id:t.id,subscribed:!0})}if(y.length===0)return h({error:"No valid recipients found in CSV"},{status:400});let{data:T,error:re}=await w.from("recipients").upsert(y,{onConflict:"user_id,email",ignoreDuplicates:!0}).select("id, email");if(re)return console.error("Recipient insert error:",re),h({error:"Failed to import recipients"},{status:500});if(T&&T.length>0){let P=T.map(he=>({list_id:g,recipient_id:he.id})),{error:X}=await w.from("list_memberships").upsert(P,{onConflict:"list_id,recipient_id",ignoreDuplicates:!0});if(X)return console.error("Membership insert error:",X),h({error:"Recipients imported but failed to add to list"},{status:500})}let ne=T?.length||0,B=y.length-ne;return h({success:`Successfully imported ${ne} recipients${B>0?` (${B} duplicates skipped)`:""}`,imported:ne,duplicates:B,errors:_.length>0?_:null})}catch(d){return console.error("CSV import error:",d),h({error:"Failed to process CSV file"},{status:500})}}function Nl(){let{user:l,lists:e}=q(),t=$(),i=U().state==="submitting",[r,n]=ce(""),[c,d]=ce(!1);return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-4xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/lists",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Import Recipients from CSV"}),s("p",{className:"text-gray-600 mt-2",children:"Upload a CSV file to bulk import recipients into your lists."})]})]}),o(x,{className:"mb-8",children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(Dn,{className:"h-5 w-5 mr-2"}),"CSV Format Requirements"]}),s(k,{children:"Your CSV file should follow this format"})]}),o(v,{children:[s("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:o("code",{className:"text-sm",children:["email,first_name,last_name",s("br",{}),"john@example.com,John,Doe",s("br",{}),"jane@example.com,Jane,Smith",s("br",{}),"bob@example.com,Bob,Johnson"]})}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[o("div",{children:[s("h4",{className:"font-medium text-gray-900 mb-2",children:"Required Columns:"}),s("ul",{className:"space-y-1 text-gray-600",children:o("li",{children:["\u2022 ",s("strong",{children:"email"})," - Must be a valid email address"]})})]}),o("div",{children:[s("h4",{className:"font-medium text-gray-900 mb-2",children:"Optional Columns:"}),o("ul",{className:"space-y-1 text-gray-600",children:[o("li",{children:["\u2022 ",s("strong",{children:"first_name"})," - Recipient's first name"]}),o("li",{children:["\u2022 ",s("strong",{children:"last_name"})," - Recipient's last name"]})]})]})]})]})]}),o(x,{children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(Ii,{className:"h-5 w-5 mr-2"}),"Upload CSV File"]}),s(k,{children:"Select your CSV file and choose the target list"})]}),s(v,{children:o(L,{method:"post",className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV File"}),s("input",{type:"file",accept:".csv",onChange:m=>{var f;let u=(f=m.target.files)==null?void 0:f[0];if(u&&u.type==="text/csv"){let g=new FileReader;g.onload=y=>{var _;n((_=y.target)==null?void 0:_.result)},g.readAsText(u)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a CSV file with your recipient data"})]}),r&&o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV Preview (first 5 lines)"}),o("div",{className:"bg-gray-50 p-4 rounded-lg text-sm font-mono",children:[r.split(`
`).slice(0,5).map((m,f)=>s("div",{className:f===0?"font-bold":"",children:m},f)),r.split(`
`).length>5&&o("div",{className:"text-gray-500 mt-2",children:["... and ",r.split(`
`).length-5," more rows"]})]})]}),s("input",{type:"hidden",name:"csvData",value:r}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target List"}),o("div",{className:"space-y-3",children:[o("div",{className:"flex items-center",children:[s("input",{type:"checkbox",id:"createNewList",name:"createNewList",checked:c,onChange:m=>d(m.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s("label",{htmlFor:"createNewList",className:"ml-2 text-sm text-gray-700",children:"Create new list"})]}),c?s(j,{name:"newListName",placeholder:"Enter new list name",required:c,className:"w-full"}):o("select",{name:"listId",required:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s("option",{value:"",children:"Select existing list"}),e.map(m=>s("option",{value:m.id,children:m.name},m.id))]})]})]}),t?.error&&s("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:o("div",{className:"flex",children:[s(At,{className:"h-5 w-5 text-red-400"}),o("div",{className:"ml-3",children:[s("h3",{className:"text-sm font-medium text-red-800",children:"Import Failed"}),s("p",{className:"text-sm text-red-700 mt-1",children:t.error})]})]})}),t?.success&&s("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:o("div",{className:"flex",children:[s(qi,{className:"h-5 w-5 text-green-400"}),o("div",{className:"ml-3",children:[s("h3",{className:"text-sm font-medium text-green-800",children:"Import Successful"}),s("p",{className:"text-sm text-green-700 mt-1",children:t.success}),t.errors&&t.errors.length>0&&o("div",{className:"mt-3",children:[s("h4",{className:"text-sm font-medium text-orange-800",children:"Warnings:"}),s("ul",{className:"text-sm text-orange-700 mt-1 list-disc list-inside",children:t.errors.map((m,f)=>s("li",{children:m},f))})]})]})]})}),o("div",{className:"flex space-x-4",children:[s(b,{type:"submit",disabled:i||!r,className:"flex-1",children:i?"Importing...":"Import Recipients"}),s(N,{to:"/lists",className:"flex-1",children:s(b,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}var _l=Object.freeze(Object.defineProperty({__proto__:null,action:wl,default:Nl,loader:yl},Symbol.toStringTag,{value:"Module"}));async function Sl({request:l}){let e=await I(l),{data:t,error:a}=await w.from("smtp_configs").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});return a?(console.error("SMTP configs fetch error:",a),h({user:e,smtpConfigs:[],error:"Failed to load SMTP configurations"})):h({user:e,smtpConfigs:t})}async function Cl({request:l}){let e=await I(l),t=await l.formData(),a=t.get("_action");if(a==="create"){let i=t.get("name"),r=t.get("host"),n=parseInt(t.get("port")),c=t.get("username"),d=t.get("password"),p=t.get("secure")==="on";if(!i||!r||!n||!c||!d)return h({error:"All fields are required"},{status:400});if(n<1||n>65535)return h({error:"Port must be between 1 and 65535"},{status:400});let{error:m}=await w.from("smtp_configs").insert({user_id:e.id,name:i,host:r,port:n,username:c,password:d,secure:p,is_active:!0});return m?(console.error("SMTP config creation error:",m),h({error:"Failed to create SMTP configuration"},{status:500})):h({success:"SMTP configuration added successfully"})}if(a==="delete"){let i=t.get("configId");if(!i)return h({error:"Configuration ID is required"},{status:400});let{error:r}=await w.from("smtp_configs").delete().eq("id",i).eq("user_id",e.id);return r?(console.error("SMTP config deletion error:",r),h({error:"Failed to delete SMTP configuration"},{status:500})):h({success:"SMTP configuration deleted successfully"})}if(a==="toggle"){let i=t.get("configId"),r=t.get("isActive")==="true";if(!i)return h({error:"Configuration ID is required"},{status:400});let{error:n}=await w.from("smtp_configs").update({is_active:!r,updated_at:new Date().toISOString()}).eq("id",i).eq("user_id",e.id);return n?(console.error("SMTP config toggle error:",n),h({error:"Failed to update SMTP configuration"},{status:500})):h({success:`SMTP configuration ${r?"deactivated":"activated"} successfully`})}return h({error:"Invalid action"},{status:400})}var El=[{name:"Gmail",host:"smtp.gmail.com",port:587,secure:!0,instructions:"Use your Gmail address and App Password (not regular password)"},{name:"Outlook/Hotmail",host:"smtp-mail.outlook.com",port:587,secure:!0,instructions:"Use your Outlook email and password"},{name:"Yahoo Mail",host:"smtp.mail.yahoo.com",port:587,secure:!0,instructions:"Use your Yahoo email and App Password"},{name:"Custom SMTP",host:"mail.yourdomain.com",port:587,secure:!0,instructions:"Contact your hosting provider for SMTP details"}];function jl(){let{user:l,smtpConfigs:e,error:t}=q(),a=$(),r=U().state==="submitting";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-6xl mx-auto",children:[o("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"SMTP Configuration"}),s("p",{className:"text-gray-600 mt-2",children:"Configure your SMTP servers to send emails through your own mail servers."})]}),t&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:t})})}),o(x,{className:"mb-8",children:[o(C,{children:[s(E,{children:"Popular SMTP Providers"}),s(k,{children:"Quick setup guides for common email providers"})]}),s(v,{children:s("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:El.map((n,c)=>o("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[s("h4",{className:"font-medium text-gray-900 mb-2",children:n.name}),o("div",{className:"text-sm text-gray-600 space-y-1",children:[o("p",{children:[s("strong",{children:"Host:"})," ",n.host]}),o("p",{children:[s("strong",{children:"Port:"})," ",n.port]}),o("p",{children:[s("strong",{children:"Security:"})," ",n.secure?"SSL/TLS":"None"]}),s("p",{className:"text-xs mt-2 text-blue-600",children:n.instructions})]})]},c))})})]}),o(x,{className:"mb-8",children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(K,{className:"h-5 w-5 mr-2"}),"Add SMTP Configuration"]}),s(k,{children:"Connect your SMTP server to send emails"})]}),s(v,{children:o(L,{method:"post",className:"space-y-6",children:[s("input",{type:"hidden",name:"_action",value:"create"}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration Name *"}),s(j,{name:"name",placeholder:"e.g., Gmail SMTP",required:!0,className:"w-full"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"A friendly name to identify this configuration"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host *"}),s(j,{name:"host",placeholder:"e.g., smtp.gmail.com",required:!0,className:"w-full"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Your SMTP server hostname"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port *"}),s(j,{name:"port",type:"number",placeholder:"587",min:"1",max:"65535",defaultValue:"587",required:!0,className:"w-full"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Common ports: 587 (TLS), 465 (SSL), 25 (unsecured)"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username *"}),s(j,{name:"username",placeholder:"your-email@gmail.com",required:!0,className:"w-full"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"Usually your email address"})]}),o("div",{className:"md:col-span-2",children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),s(j,{name:"password",type:"password",placeholder:"Your password or app password",required:!0,className:"w-full"}),s("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]}),s("div",{className:"md:col-span-2",children:o("div",{className:"flex items-center",children:[s("input",{type:"checkbox",name:"secure",id:"secure",defaultChecked:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s("label",{htmlFor:"secure",className:"ml-2 text-sm text-gray-700",children:"Use SSL/TLS encryption (recommended)"})]})})]}),a?.error&&s("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:a.error}),a?.success&&s("div",{className:"text-green-600 text-sm bg-green-50 p-3 rounded-md",children:a.success}),s(b,{type:"submit",disabled:r,className:"w-full md:w-auto",children:r?"Adding...":"Add SMTP Configuration"})]})})]}),o("div",{className:"space-y-4",children:[o("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s(Dt,{className:"h-5 w-5 mr-2"}),"Your SMTP Configurations"]}),e.length===0?s(x,{children:o(v,{className:"text-center py-12",children:[s(Pt,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),s("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No SMTP configurations yet"}),s("p",{className:"text-gray-600 mb-6",children:"Add your first SMTP configuration above to start sending emails."})]})}):s("div",{className:"grid gap-6",children:e.map(n=>s(x,{className:"hover:shadow-md transition-shadow",children:s(v,{className:"p-6",children:o("div",{className:"flex items-start justify-between",children:[o("div",{className:"flex items-start space-x-4",children:[s("div",{className:`p-3 rounded-lg ${n.is_active?"bg-green-50":"bg-gray-50"}`,children:n.is_active?s(qi,{className:"h-6 w-6 text-green-600"}):s(Pn,{className:"h-6 w-6 text-gray-400"})}),o("div",{className:"flex-1",children:[s("h4",{className:"font-semibold text-gray-900 text-lg",children:n.name}),o("div",{className:"mt-2 space-y-1 text-sm text-gray-600",children:[o("p",{children:[s("strong",{children:"Host:"})," ",n.host,":",n.port]}),o("p",{children:[s("strong",{children:"Username:"})," ",n.username]}),o("p",{children:[s("strong",{children:"Security:"})," ",n.secure?"SSL/TLS Enabled":"No Encryption"]}),o("p",{children:[s("strong",{children:"Created:"})," ",new Date(n.created_at).toLocaleDateString()]})]}),o("div",{className:"flex items-center mt-3 space-x-3",children:[s("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${n.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.is_active?"Active":"Inactive"}),n.secure&&s("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:"Encrypted"})]})]})]}),o("div",{className:"flex space-x-2",children:[o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"toggle"}),s("input",{type:"hidden",name:"configId",value:n.id}),s("input",{type:"hidden",name:"isActive",value:n.is_active}),s(b,{type:"submit",variant:"outline",size:"sm",disabled:r,children:n.is_active?"Deactivate":"Activate"})]}),o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"delete"}),s("input",{type:"hidden",name:"configId",value:n.id}),s(b,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:border-red-300",disabled:r,onClick:c=>{confirm("Are you sure you want to delete this SMTP configuration?")||c.preventDefault()},children:s(Mt,{className:"h-4 w-4"})})]})]})]})})},n.id))})]})]})})]})]})}var kl=Object.freeze(Object.defineProperty({__proto__:null,action:Cl,default:jl,loader:Sl},Symbol.toStringTag,{value:"Module"}));async function Al({request:l}){return(await de(l.headers.get("Cookie"))).has("userId")?F("/dashboard"):h({})}async function Tl({request:l}){let e=await l.formData(),t=e.get("email"),a=e.get("password");if(!t||!a)return h({error:"Email and password are required"},{status:400});let{data:i,error:r}=await w.auth.signInWithPassword({email:t,password:a});if(r)return h({error:r.message},{status:400});if(!i.user)return h({error:"Authentication failed"},{status:400});let n=await de(l.headers.get("Cookie"));return n.set("userId",i.user.id),n.set("userEmail",i.user.email),F("/dashboard",{headers:{"Set-Cookie":await Bt(n)}})}function Il(){let l=$(),t=U().state==="submitting";return s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:o("div",{className:"w-full max-w-md",children:[o("div",{className:"text-center mb-8",children:[s(ae,{size:"xl",className:"justify-center mb-4"}),s("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome back"}),s("p",{className:"text-gray-600 mt-2",children:"Sign in to your xMailer account"})]}),o(x,{children:[o(C,{children:[s(E,{children:"Sign In"}),s(k,{children:"Enter your email and password to access your account"})]}),o(v,{children:[o(L,{method:"post",className:"space-y-4",children:[o("div",{children:[s("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s(j,{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email",className:"w-full"})]}),o("div",{children:[s("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s(j,{id:"password",name:"password",type:"password",required:!0,placeholder:"Enter your password",className:"w-full"})]}),l?.error&&s("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:l.error}),s(b,{type:"submit",disabled:t,className:"w-full",children:t?"Signing in...":"Sign In"})]}),s("div",{className:"mt-6 text-center",children:o("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",s(N,{to:"/auth/register",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Sign up"})]})})]})]})]})})}var Ll=Object.freeze(Object.defineProperty({__proto__:null,action:Tl,default:Il,loader:Al},Symbol.toStringTag,{value:"Module"}));async function Dl({request:l}){let e=await I(l),[{count:t},{count:a},{count:i},{data:r}]=await Promise.all([w.from("subscribers").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("status","subscribed"),w.from("lists").select("*",{count:"exact",head:!0}).eq("user_id",e.id).eq("is_active",!0),w.from("campaigns").select("*",{count:"exact",head:!0}).eq("user_id",e.id),w.from("campaigns").select("id, name, status, sent_count, total_recipients, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(5)]);return h({user:e,stats:{totalSubscribers:t||0,totalLists:a||0,totalCampaigns:i||0},recentCampaigns:r||[]})}function Pl(){let{user:l,stats:e,recentCampaigns:t}=q(),a=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-7xl mx-auto",children:[o("div",{className:"mb-8",children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's what's happening with your email campaigns."})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Subscribers"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalSubscribers})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(Y,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Active Lists"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalLists})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(ie,{className:"h-6 w-6 text-purple-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e.totalCampaigns})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-orange-50",children:s(le,{className:"h-6 w-6 text-orange-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Emails Sent"}),s("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((i,r)=>i+(r.sent_count||0),0)})]})]})})})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o(x,{children:[o(C,{children:[s(E,{children:"Recent Campaigns"}),s(k,{children:"Your latest email campaigns and their status"})]}),s(v,{children:t.length===0?o("div",{className:"text-center py-6",children:[s(ie,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:"No campaigns yet"}),s("p",{className:"text-sm text-gray-500",children:"Create your first campaign to get started"})]}):s("div",{className:"space-y-4",children:t.map(i=>o("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:i.name}),o("p",{className:"text-sm text-gray-600",children:[i.sent_count||0," / ",i.total_recipients||0," sent"]})]}),o("div",{className:"text-right",children:[s("span",{className:`px-2 py-1 text-xs rounded-full ${i.status==="sent"?"bg-green-100 text-green-800":i.status==="sending"?"bg-blue-100 text-blue-800":i.status==="scheduled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.status}),s("p",{className:"text-xs text-gray-500 mt-1",children:a(i.created_at)})]})]},i.id))})})]}),o(x,{children:[o(C,{children:[s(E,{children:"Quick Actions"}),s(k,{children:"Common tasks to get you started"})]}),s(v,{children:o("div",{className:"space-y-4",children:[o("a",{href:"/subscribers/new",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-5 w-5 text-blue-600"})}),o("div",{className:"ml-3",children:[s("h4",{className:"font-medium text-gray-900",children:"Add Subscribers"}),s("p",{className:"text-sm text-gray-600",children:"Import or add new subscribers"})]})]}),o("a",{href:"/lists/new",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(Y,{className:"h-5 w-5 text-green-600"})}),o("div",{className:"ml-3",children:[s("h4",{className:"font-medium text-gray-900",children:"Create List"}),s("p",{className:"text-sm text-gray-600",children:"Organize your subscribers"})]})]}),o("a",{href:"/campaigns/new",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(ie,{className:"h-5 w-5 text-purple-600"})}),o("div",{className:"ml-3",children:[s("h4",{className:"font-medium text-gray-900",children:"New Campaign"}),s("p",{className:"text-sm text-gray-600",children:"Create and send emails"})]})]}),o("a",{href:"/settings/smtp",className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s("div",{className:"p-2 rounded-lg bg-orange-50",children:s(le,{className:"h-5 w-5 text-orange-600"})}),o("div",{className:"ml-3",children:[s("h4",{className:"font-medium text-gray-900",children:"Setup SMTP"}),s("p",{className:"text-sm text-gray-600",children:"Configure email sending"})]})]})]})})]})]})]})})]})]})}var ql=Object.freeze(Object.defineProperty({__proto__:null,default:Pl,loader:Dl},Symbol.toStringTag,{value:"Module"}));async function Ml({request:l,params:e}){try{let t=await I(l),a=e.id;if(!a)throw new Response("List not found",{status:404});let{data:i,error:r}=await w.from("lists_with_counts").select("*").eq("id",a).eq("user_id",t.id).single();if(r)return console.error("List fetch error:",r),h({user:t,list:null,members:[],availableRecipients:[],error:"Database not configured. Please set up your Supabase database."});if(!i)throw new Response("List not found",{status:404});let{data:n,error:c}=await w.from("list_memberships").select(`
        id,
        added_at,
        subscribers (
          id,
          email,
          first_name,
          last_name,
          status,
          created_at
        )
      `).eq("list_id",a).order("added_at",{ascending:!1});if(c)return console.error("Members fetch error:",c),h({user:t,list:i,members:[],availableRecipients:[],error:"Failed to load list members"});let d=n||[],p=d.map(u=>{var g;return(g=u.subscribers)==null?void 0:g.id}).filter(Boolean),{data:m,error:f}=await w.from("subscribers").select("id, email, first_name, last_name, status").eq("user_id",t.id).not("id","in",`(${p.join(",")||"null"})`).eq("status","subscribed").order("email");return h({user:t,list:i,members:d,availableRecipients:m||[],error:f?"Failed to load available recipients":null})}catch(t){if(console.error("Loader error:",t),t instanceof Response)throw t;return h({user:null,list:null,members:[],availableRecipients:[],error:"Unable to connect to database. Please check your configuration."})}}async function Bl({request:l,params:e}){let t=await I(l),a=e.id,i=await l.formData(),r=i.get("_action");if(!a)return h({error:"List ID is required"},{status:400});if(r==="add-recipient"){let n=i.get("subscriberId");if(!n)return h({error:"Subscriber ID is required"},{status:400});let{error:c}=await w.from("list_memberships").insert({list_id:a,subscriber_id:n});return c?c.code==="23505"?h({error:"Recipient is already in this list"},{status:400}):(console.error("Add recipient error:",c),h({error:"Failed to add recipient to list"},{status:500})):h({success:"Recipient added to list successfully"})}if(r==="remove-recipient"){let n=i.get("membershipId");if(!n)return h({error:"Membership ID is required"},{status:400});let{error:c}=await w.from("list_memberships").delete().eq("id",n).eq("list_id",a);return c?(console.error("Remove recipient error:",c),h({error:"Failed to remove recipient from list"},{status:500})):h({success:"Recipient removed from list successfully"})}if(r==="add-by-email"){let n=i.get("email"),c=i.get("firstName"),d=i.get("lastName");if(!n)return h({error:"Email is required"},{status:400});let{data:p,error:m}=await w.from("subscribers").upsert({user_id:t.id,email:n.toLowerCase(),first_name:c||null,last_name:d||null,status:"subscribed"},{onConflict:"user_id,email"}).select("id").single();if(m)return console.error("Subscriber upsert error:",m),h({error:"Failed to create subscriber"},{status:500});let{error:f}=await w.from("list_memberships").insert({list_id:a,subscriber_id:p.id});return f?f.code==="23505"?h({error:"Recipient is already in this list"},{status:400}):(console.error("Add membership error:",f),h({error:"Failed to add recipient to list"},{status:500})):h({success:"Recipient added to list successfully"})}return h({error:"Invalid action"},{status:400})}function Rl(){let{user:l,list:e,members:t,availableRecipients:a,error:i}=q(),r=$(),c=U().state==="submitting",[d,p]=ce(""),m=t||[],f=a||[];if(i&&!e)return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l||{id:"",email:"",full_name:"Guest"}}),s("main",{className:"flex-1 overflow-y-auto p-6",children:s("div",{className:"max-w-4xl mx-auto",children:s(x,{className:"border-red-200 bg-red-50",children:o(v,{className:"p-8 text-center",children:[s("h2",{className:"text-2xl font-bold text-red-900 mb-4",children:"Database Configuration Required"}),s("p",{className:"text-red-800 mb-6",children:i}),o("div",{className:"space-y-4",children:[s("p",{className:"text-sm text-red-700",children:"To access this functionality, you need to set up your Supabase database."}),o("div",{className:"flex justify-center space-x-4",children:[s(N,{to:"/demo",children:s(b,{variant:"outline",children:"View Demo Version"})}),s(b,{onClick:()=>window.open("/setup-demo.md","_blank"),children:"Setup Guide"})]})]})]})})})})]})]});let u=m.filter(g=>{var y;if(!g||!g.subscribers)return!1;let _=g.subscribers,D=`${_.first_name||""} ${_.last_name||""}`.trim(),T=d.toLowerCase();return((y=_.email)==null?void 0:y.toLowerCase().includes(T))||D.toLowerCase().includes(T)});return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-6xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/lists",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),s("div",{className:"flex-1",children:o("div",{className:"flex items-center",children:[s("div",{className:"w-6 h-6 rounded-full mr-3",style:{backgroundColor:e?.color||"#3B82F6"}}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:e?.name||"List"}),e?.description&&s("p",{className:"text-gray-600 mt-2",children:e.description})]})]})}),s("div",{className:"flex items-center space-x-3",children:s("span",{className:`px-3 py-1 text-sm rounded-full ${e?.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e?.is_active?"Active":"Inactive"})})]}),i&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:i})})}),o("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-blue-50",children:s(M,{className:"h-6 w-6 text-blue-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Total Members"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e?.total_members||0})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-green-50",children:s(M,{className:"h-6 w-6 text-green-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Subscribed"}),s("p",{className:"text-2xl font-bold text-gray-900",children:e?.subscribed_members||0})]})]})})}),s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:"p-2 rounded-lg bg-purple-50",children:s(M,{className:"h-6 w-6 text-purple-600"})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:"Available to Add"}),s("p",{className:"text-2xl font-bold text-gray-900",children:f.length})]})]})})})]}),o("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s("div",{className:"lg:col-span-1",children:o(x,{children:[o(C,{children:[o(E,{className:"flex items-center",children:[s(K,{className:"h-5 w-5 mr-2"}),"Add Recipients"]}),s(k,{children:"Add new recipients to this list"})]}),o(v,{className:"space-y-6",children:[o("div",{children:[s("h4",{className:"font-medium text-gray-900 mb-3",children:"Add New Recipient"}),o(L,{method:"post",className:"space-y-3",children:[s("input",{type:"hidden",name:"_action",value:"add-by-email"}),s(j,{name:"email",type:"email",placeholder:"Email address",required:!0}),o("div",{className:"grid grid-cols-2 gap-2",children:[s(j,{name:"firstName",placeholder:"First name"}),s(j,{name:"lastName",placeholder:"Last name"})]}),s(b,{type:"submit",size:"sm",className:"w-full",disabled:c,children:c?"Adding...":"Add Recipient"})]})]}),f.length>0&&o("div",{children:[s("h4",{className:"font-medium text-gray-900 mb-3",children:"Add Existing Recipients"}),o("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[f.slice(0,10).map(g=>o("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[o("div",{className:"flex-1 min-w-0",children:[s("p",{className:"text-sm font-medium text-gray-900 truncate",children:g.email}),(g.first_name||g.last_name)&&s("p",{className:"text-xs text-gray-500",children:[g.first_name,g.last_name].filter(Boolean).join(" ")})]}),o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"add-recipient"}),s("input",{type:"hidden",name:"subscriberId",value:g.id}),s(b,{type:"submit",size:"sm",variant:"outline",disabled:c,children:s(Di,{className:"h-3 w-3"})})]})]},g.id)),f.length>10&&o("p",{className:"text-xs text-gray-500 text-center",children:["And ",f.length-10," more recipients..."]})]})]}),r?.error&&s("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:r.error}),r?.success&&s("div",{className:"text-green-600 text-sm bg-green-50 p-3 rounded-md",children:r.success})]})]})}),s("div",{className:"lg:col-span-2",children:o(x,{children:[o(C,{children:[s(E,{children:"List Members"}),s(k,{children:"Manage recipients in this list"})]}),o(v,{children:[s("div",{className:"mb-4",children:o("div",{className:"relative",children:[s(Ti,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s(j,{placeholder:"Search members...",value:d,onChange:g=>p(g.target.value),className:"pl-10"})]})}),u.length===0?o("div",{className:"text-center py-8",children:[s(M,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s("p",{className:"text-gray-600",children:d?"No members match your search.":"No members in this list yet."})]}):s("div",{className:"overflow-x-auto",children:o("table",{className:"w-full",children:[s("thead",{children:o("tr",{className:"border-b",children:[s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Email"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Name"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Added"}),s("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),s("tbody",{children:u.map(g=>{let y=g.subscribers;return o("tr",{className:"border-b hover:bg-gray-50",children:[s("td",{className:"py-3 px-4 text-sm text-gray-900",children:y.email}),s("td",{className:"py-3 px-4 text-sm text-gray-600",children:[y.first_name,y.last_name].filter(Boolean).join(" ")||"-"}),s("td",{className:"py-3 px-4 text-sm",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${y.status==="subscribed"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.status==="subscribed"?"Subscribed":"Unsubscribed"})}),s("td",{className:"py-3 px-4 text-sm text-gray-500",children:new Date(g.added_at).toLocaleDateString()}),s("td",{className:"py-3 px-4 text-sm",children:o(L,{method:"post",className:"inline",children:[s("input",{type:"hidden",name:"_action",value:"remove-recipient"}),s("input",{type:"hidden",name:"membershipId",value:g.id}),s(b,{type:"submit",variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",disabled:c,onClick:_=>{confirm("Remove this recipient from the list?")||_.preventDefault()},children:s(qn,{className:"h-4 w-4"})})]})})]},g.id)})})]})})]})]})})]})]})})]})]})}var zl=Object.freeze(Object.defineProperty({__proto__:null,action:Bl,default:Rl,loader:Ml},Symbol.toStringTag,{value:"Module"}));async function Ol({request:l}){let e=await I(l);return h({user:e})}async function Ul({request:l}){let e=await I(l),t=await l.formData(),a=t.get("name"),i=t.get("description"),r=t.get("color");if(!a)return h({error:"List name is required"},{status:400});let{data:n}=await w.from("lists").select("id").eq("user_id",e.id).eq("name",a).single();if(n)return h({error:"A list with this name already exists"},{status:400});let{error:c}=await w.from("lists").insert({user_id:e.id,name:a,description:i||"",color:r||"#3B82F6",is_active:!0});return c?(console.error("List creation error:",c),h({error:"Failed to create list"},{status:500})):F("/lists")}var Hl=[{name:"Blue",value:"#3B82F6"},{name:"Green",value:"#10B981"},{name:"Purple",value:"#8B5CF6"},{name:"Red",value:"#EF4444"},{name:"Orange",value:"#F59E0B"},{name:"Pink",value:"#EC4899"},{name:"Indigo",value:"#6366F1"},{name:"Teal",value:"#14B8A6"}];function Fl(){let{user:l}=q(),e=$(),a=U().state==="submitting";return o("div",{className:"flex h-screen bg-gray-50",children:[s(R,{}),o("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s(z,{user:l}),s("main",{className:"flex-1 overflow-y-auto p-6",children:o("div",{className:"max-w-2xl mx-auto",children:[o("div",{className:"flex items-center mb-8",children:[s(N,{to:"/lists",className:"mr-4",children:o(b,{variant:"outline",size:"sm",children:[s(ee,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),o("div",{children:[s("h2",{className:"text-3xl font-bold text-gray-900",children:"Create New List"}),s("p",{className:"text-gray-600 mt-2",children:"Create a new list to organize your subscribers."})]})]}),e?.error&&s(x,{className:"mb-6 border-red-200 bg-red-50",children:s(v,{className:"p-4",children:s("p",{className:"text-red-800",children:e.error})})}),o(x,{children:[o(C,{children:[s(E,{children:"List Information"}),s(k,{children:"Enter the details for your new subscriber list."})]}),s(v,{children:o(L,{method:"post",className:"space-y-6",children:[o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"List Name *"}),s(j,{name:"name",placeholder:"e.g., Newsletter Subscribers, VIP Customers",required:!0,className:"w-full"})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s(zt,{name:"description",placeholder:"Describe what this list is for...",className:"w-full",rows:3})]}),o("div",{children:[s("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"List Color"}),s("div",{className:"grid grid-cols-4 gap-3",children:Hl.map(i=>o("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s("input",{type:"radio",name:"color",value:i.value,defaultChecked:i.value==="#3B82F6",className:"sr-only"}),s("div",{className:"w-8 h-8 rounded-full border-2 border-gray-300 flex items-center justify-center",style:{backgroundColor:i.value},children:s("div",{className:"w-4 h-4 rounded-full bg-white opacity-0 peer-checked:opacity-100"})}),s("span",{className:"text-sm text-gray-700",children:i.name})]},i.value))})]}),o("div",{className:"flex space-x-4",children:[o(b,{type:"submit",disabled:a,className:"flex-1",children:[s(ue,{className:"h-4 w-4 mr-2"}),a?"Creating List...":"Create List"]}),s(N,{to:"/lists",className:"flex-1",children:s(b,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}var $l=Object.freeze(Object.defineProperty({__proto__:null,action:Ul,default:Fl,loader:Ol},Symbol.toStringTag,{value:"Module"})),Vl=()=>[{title:"xMailer - Professional Email Marketing Platform"},{name:"description",content:"Transform your email marketing with xMailer. Create stunning campaigns, manage recipients, and track performance with our powerful platform."}];function Yl(){return o("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[s("header",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-50",children:s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o("div",{className:"flex justify-between items-center py-4",children:[s(ae,{size:"lg"}),o("div",{className:"flex items-center space-x-4",children:[s(N,{to:"/auth/login",children:s(b,{variant:"outline",children:"Sign In"})}),s(N,{to:"/auth/register",children:s(b,{children:"Get Started"})})]})]})})}),s("section",{className:"relative py-20 px-4 sm:px-6 lg:px-8",children:s("div",{className:"max-w-7xl mx-auto",children:o("div",{className:"text-center",children:[o("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:["Email Marketing",s("span",{className:"block text-blue-600",children:"Made Simple"})]}),s("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto",children:"Create stunning email campaigns, manage your audience, and track performance with xMailer's powerful yet intuitive email marketing platform."}),o("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s(N,{to:"/auth/register",children:s(b,{size:"lg",className:"w-full sm:w-auto",children:"Start Free Trial"})}),s(N,{to:"/demo",children:s(b,{variant:"outline",size:"lg",className:"w-full sm:w-auto",children:"View Demo"})})]})]})})}),s("section",{className:"py-20 bg-white",children:o("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o("div",{className:"text-center mb-16",children:[s("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Everything You Need for Email Success"}),s("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"From campaign creation to performance tracking, xMailer provides all the tools you need to grow your business through email marketing."})]}),o("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Y,{className:"h-8 w-8 text-blue-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Campaign Builder"}),s("p",{className:"text-gray-600",children:"Create beautiful, responsive email campaigns with our intuitive drag-and-drop editor."})]}),o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(M,{className:"h-8 w-8 text-green-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Audience Management"}),s("p",{className:"text-gray-600",children:"Organize your contacts into targeted lists and segments for personalized messaging."})]}),o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(le,{className:"h-8 w-8 text-purple-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Analytics & Reporting"}),s("p",{className:"text-gray-600",children:"Track opens, clicks, and conversions with detailed analytics and insights."})]}),o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Te,{className:"h-8 w-8 text-yellow-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Automation"}),s("p",{className:"text-gray-600",children:"Set up automated email sequences and workflows to nurture your leads."})]}),o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Li,{className:"h-8 w-8 text-red-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Deliverability"}),s("p",{className:"text-gray-600",children:"Ensure your emails reach the inbox with our advanced deliverability features."})]}),o("div",{className:"text-center p-6",children:[s("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s(Mn,{className:"h-8 w-8 text-indigo-600"})}),s("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Global Reach"}),s("p",{className:"text-gray-600",children:"Send emails worldwide with our reliable infrastructure and global delivery network."})]})]})]})}),s("section",{className:"py-20 bg-blue-600",children:o("div",{className:"max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[s("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Transform Your Email Marketing?"}),s("p",{className:"text-xl text-blue-100 mb-8",children:"Join thousands of businesses already using xMailer to grow their audience and increase revenue."}),o("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s(N,{to:"/auth/register",children:s(b,{size:"lg",variant:"outline",className:"w-full sm:w-auto bg-white text-blue-600 hover:bg-gray-50",children:"Start Your Free Trial"})}),s(N,{to:"/demo",children:s(b,{size:"lg",variant:"outline",className:"w-full sm:w-auto border-white text-white hover:bg-white hover:text-blue-600",children:"View Demo"})})]})]})}),s("footer",{className:"bg-gray-900 text-white py-12",children:o("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o("div",{className:"col-span-1 md:col-span-2",children:[s(ae,{variant:"light",size:"lg",className:"mb-4"}),s("p",{className:"text-gray-400 mb-4 max-w-md",children:"xMailer is the professional email marketing platform that helps businesses create, send, and track email campaigns with ease."})]}),o("div",{children:[s("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),o("ul",{className:"space-y-2 text-gray-400",children:[s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Templates"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Integrations"})})]})]}),o("div",{children:[s("h3",{className:"text-lg font-semibold mb-4",children:"Support"}),o("ul",{className:"space-y-2 text-gray-400",children:[s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Help Center"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact Us"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"API Docs"})}),s("li",{children:s("a",{href:"#",className:"hover:text-white transition-colors",children:"Status"})})]})]})]}),s("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:s("p",{children:"\xA9 2024 xMailer. All rights reserved."})})]})})]})}var Kl=Object.freeze(Object.defineProperty({__proto__:null,default:Yl,meta:Vl},Symbol.toStringTag,{value:"Module"}));async function Gl({request:l}){return Wn(l)}async function Ql(){return new Response("Method not allowed",{status:405})}var Xl=Object.freeze(Object.defineProperty({__proto__:null,action:Gl,loader:Ql},Symbol.toStringTag,{value:"Module"}));async function Jl({request:l}){return await Jn(l)?F("/dashboard"):h({env:{SUPABASE_URL:"https://wiowklgoaeeotfwjaoyq.supabase.co",SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indpb3drbGdvYWVlb3Rmd2phb3lxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQzMjgwNTksImV4cCI6MjA2OTkwNDA1OX0.QE03BLTkuxvn-b9VTtZKEljzYF-ByGl8eHRVhQzrysA"}})}async function Wl({request:l}){var e,t;let a=await l.formData(),i=a.get("email"),r=a.get("password"),n=a.get("_action");if(!i||!r)return h({error:"Email and password are required"},{status:400});if(n==="login"){let{data:c,error:d}=await w.auth.signInWithPassword({email:i,password:r});if(d)return h({error:d.message},{status:400});if(!c.session)return h({error:"Failed to create session"},{status:400});let{error:p}=await w.from("profiles").upsert({id:c.user.id,email:c.user.email,full_name:((e=c.user.user_metadata)==null?void 0:e.full_name)||null,updated_at:new Date().toISOString()});return p&&console.error("Profile creation error:",p),Ie(c.session.access_token,c.session.refresh_token,"/dashboard")}if(n==="signup"){let{data:c,error:d}=await w.auth.signUp({email:i,password:r,options:{emailRedirectTo:`${new URL(l.url).origin}/auth/callback`}});if(d)return h({error:d.message},{status:400});if(c.user&&!c.session)return h({message:"Check your email for a verification link before signing in.",showResend:!0,email:i});if(c.session){let{error:p}=await w.from("profiles").insert({id:c.user.id,email:c.user.email,full_name:((t=c.user.user_metadata)==null?void 0:t.full_name)||null});return p&&console.error("Profile creation error:",p),Ie(c.session.access_token,c.session.refresh_token,"/dashboard")}}if(n==="resend"){let{error:c}=await w.auth.resend({type:"signup",email:i,options:{emailRedirectTo:`${new URL(l.url).origin}/auth/callback`}});return c?h({error:c.message},{status:400}):h({message:"Verification email sent! Check your inbox."})}return h({error:"Invalid action"},{status:400})}function Zl(){let[l,e]=ce(!1),[t,a]=ce(!1),i=$(),{env:r}=q(),c=U().state==="submitting";return Mi(()=>{typeof window<"u"&&(window.ENV=r)},[r]),s("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:o(x,{className:"w-full max-w-md",children:[o(C,{className:"text-center",children:[s("div",{className:"flex justify-center mb-6",children:s(ae,{variant:"dark",size:"lg"})}),s(E,{className:"text-2xl",children:l?"Create Account":"Welcome Back"}),s(k,{children:l?"Sign up to start sending bulk emails":"Sign in to your email autoresponder account"})]}),o(v,{children:[o(L,{method:"post",className:"space-y-4",children:[s("div",{children:s(j,{type:"email",name:"email",placeholder:"Email address",required:!0,className:"w-full",defaultValue:i?.email||""})}),o("div",{className:"relative",children:[s(j,{type:t?"text":"password",name:"password",placeholder:"Password",required:!0,className:"w-full pr-10",minLength:6}),s("button",{type:"button",onClick:()=>a(!t),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:t?s(It,{className:"h-4 w-4"}):s(Lt,{className:"h-4 w-4"})})]}),i?.error&&s("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-md",children:i.error}),i?.message&&o("div",{className:"text-green-600 text-sm text-center bg-green-50 p-3 rounded-md",children:[i.message,i.showResend&&s("div",{className:"mt-2",children:s(b,{type:"submit",name:"_action",value:"resend",variant:"outline",size:"sm",disabled:c,children:"Resend verification email"})})]}),s(b,{type:"submit",name:"_action",value:l?"signup":"login",className:"w-full",disabled:c,children:c?"Processing...":l?"Create Account":"Sign In"})]}),s("div",{className:"mt-6 text-center",children:s("button",{type:"button",onClick:()=>e(!l),className:"text-blue-600 hover:text-blue-500 text-sm",children:l?"Already have an account? Sign in":"Don't have an account? Sign up"})}),!l&&s("div",{className:"mt-4 text-center",children:s("a",{href:"/forgot-password",className:"text-sm text-gray-600 hover:text-gray-800",children:"Forgot your password?"})})]})]})})}var ec=Object.freeze(Object.defineProperty({__proto__:null,action:Wl,default:Zl,loader:Jl},Symbol.toStringTag,{value:"Module"}));async function tc(){let l={stats:{totalCampaigns:5,totalRecipients:1250,totalSent:4890,totalLists:8},recentCampaigns:[{id:"1",name:"Welcome Series",subject:"Welcome to our newsletter!",status:"sent",sent_count:1200,total_recipients:1200},{id:"2",name:"Product Launch",subject:"Introducing our latest product",status:"sending",sent_count:450,total_recipients:800}],lists:[{id:"ac70fb2e-53c2-46bb-9b29-50e4b695bdc9",name:"Newsletter Subscribers",description:"General newsletter subscribers",color:"#3B82F6",subscribed_members:1200,total_members:1250,created_at:new Date().toISOString()},{id:"2",name:"Product Updates",description:"Users interested in product updates",color:"#10B981",subscribed_members:890,total_members:920,created_at:new Date().toISOString()}]};return h(l)}function sc(){let{stats:l,recentCampaigns:e,lists:t}=q(),a=[{title:"Total Campaigns",value:l.totalCampaigns,icon:Y,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Recipients",value:l.totalRecipients,icon:M,color:"text-green-600",bgColor:"bg-green-50"},{title:"Emails Sent",value:l.totalSent,icon:ie,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Lists",value:l.totalLists,icon:ue,color:"text-orange-600",bgColor:"bg-orange-50"}];return o("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[s("header",{className:"bg-white shadow-sm border-b",children:s("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o("div",{className:"flex items-center justify-between h-16",children:[s(ae,{size:"lg"}),o("div",{className:"flex items-center space-x-4",children:[s("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 text-sm rounded-full",children:"Demo Mode"}),s(N,{to:"/",children:s(b,{variant:"outline",children:"Setup Project"})})]})]})})}),o("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o("div",{className:"text-center mb-12",children:[s("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to xMailer"}),s("p",{className:"text-xl text-gray-600 mb-8",children:"Professional Email Marketing Platform - Demo Mode"}),s("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-2xl mx-auto",children:o("p",{className:"text-blue-800 text-sm",children:[s("strong",{children:"Demo Mode:"})," This is a preview of your xMailer dashboard with sample data. To access full functionality, set up your Supabase database using the setup guide above."]})})]}),s("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:a.map(i=>s(x,{children:s(v,{className:"p-6",children:o("div",{className:"flex items-center",children:[s("div",{className:`p-2 rounded-lg ${i.bgColor}`,children:s(i.icon,{className:`h-6 w-6 ${i.color}`})}),o("div",{className:"ml-4",children:[s("p",{className:"text-sm font-medium text-gray-600",children:i.title}),s("p",{className:"text-2xl font-bold text-gray-900",children:i.value.toLocaleString()})]})]})})},i.title))}),o("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o(x,{children:[o(C,{children:[s(E,{children:"Recent Campaigns"}),s(k,{children:"Your latest email campaigns and their status"})]}),s(v,{children:s("div",{className:"space-y-4",children:e.map(i=>o("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:i.name}),s("p",{className:"text-sm text-gray-600",children:i.subject})]}),o("div",{className:"text-right",children:[s("div",{className:"flex items-center space-x-2",children:s("span",{className:`px-2 py-1 text-xs rounded-full ${i.status==="sent"?"bg-green-100 text-green-800":i.status==="sending"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:i.status})}),o("p",{className:"text-sm text-gray-600 mt-1",children:[i.sent_count," / ",i.total_recipients," sent"]})]})]},i.id))})})]}),o(x,{children:[o(C,{children:[s(E,{children:"Your Lists"}),s(k,{children:"Organized subscriber lists for targeted campaigns"})]}),s(v,{children:s("div",{className:"space-y-4",children:t.map(i=>o("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:[o("div",{className:"flex items-center justify-between",children:[o("div",{className:"flex items-center space-x-3",children:[s("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:i.color}}),o("div",{children:[s("h4",{className:"font-medium text-gray-900",children:i.name}),i.description&&s("p",{className:"text-sm text-gray-600",children:i.description})]})]}),s(N,{to:`/demo/lists/${i.id}`,className:"text-blue-600 hover:text-blue-700",children:s(Bn,{className:"h-5 w-5"})})]}),o("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-600",children:[o("span",{children:[i.subscribed_members," subscribers"]}),s("span",{children:new Date(i.created_at).toLocaleDateString()})]})]},i.id))})})]})]}),s("div",{className:"mt-12 text-center",children:s(x,{className:"max-w-2xl mx-auto",children:o(v,{className:"p-8",children:[s("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ready to set up your real xMailer project?"}),s("p",{className:"text-gray-600 mb-6",children:"Follow the setup guide to connect your Supabase database and start sending real campaigns."}),o("div",{className:"flex justify-center space-x-4",children:[s(N,{to:"/setup-demo.md",children:s(b,{children:"View Setup Guide"})}),s(b,{variant:"outline",onClick:()=>window.open("https://supabase.com","_blank"),children:"Get Supabase Account"})]})]})})})]})]})}var ic=Object.freeze(Object.defineProperty({__proto__:null,default:sc,loader:tc},Symbol.toStringTag,{value:"Module"})),ac={entry:{module:"/assets/entry.client-Bt-fpvCY.js",imports:["/assets/components-B71KIw6b.js"],css:[]},routes:{root:{id:"root",parentId:void 0,path:"",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/root-DN-UagvU.js",imports:["/assets/components-B71KIw6b.js"],css:["/assets/root-CmWX8CUY.css"]},"routes/api.campaigns.$id.send":{id:"routes/api.campaigns.$id.send",parentId:"root",path:"api/campaigns/:id/send",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/api.campaigns._id.send-l0sNRNKZ.js",imports:[],css:[]},"routes/subscribers.$id.edit":{id:"routes/subscribers.$id.edit",parentId:"routes/subscribers.$id",path:"edit",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/subscribers._id.edit-DUMTsM1x.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/alert-circle-UJB4NVXK.js","/assets/save-CqtvPiWF.js","/assets/users-TLTQjisN.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/subscribers._index":{id:"routes/subscribers._index",parentId:"root",path:"subscribers",index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/subscribers._index-D4jiNODF.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/card-D6xvUs-C.js","/assets/input-gR889RM_.js","/assets/plus-DNHlCd_Y.js","/assets/search-D3iH17Gw.js","/assets/users-TLTQjisN.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/email-apis._index":{id:"routes/email-apis._index",parentId:"root",path:"email-apis",index:!0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/email-apis._index-BFG-PXaP.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/plus-DNHlCd_Y.js","/assets/zap-CrcmDB4d.js","/assets/trash-2-DSCc9uhn.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/recipients._index":{id:"routes/recipients._index",parentId:"root",path:"recipients",index:!0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/recipients._index-MTEo9wNF.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/upload-DFgZRpj7.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/users-TLTQjisN.js","/assets/plus-DNHlCd_Y.js","/assets/trash-2-DSCc9uhn.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/analytics._index":{id:"routes/analytics._index",parentId:"root",path:"analytics",index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/analytics._index-lsRFf7te.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/card-D6xvUs-C.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/trending-up-dDfgd3P0.js","/assets/bar-chart-3-CLxhACnx.js","/assets/button-CpX_ak2_.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/campaigns._index":{id:"routes/campaigns._index",parentId:"root",path:"campaigns",index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/campaigns._index-DBvflDae.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/card-D6xvUs-C.js","/assets/plus-DNHlCd_Y.js","/assets/users-TLTQjisN.js","/assets/calendar-DagQcv_q.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/dashboard._index":{id:"routes/dashboard._index",parentId:"routes/dashboard",path:void 0,index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/dashboard._index-DdxH3sNH.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/card-D6xvUs-C.js","/assets/button-CpX_ak2_.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/trending-up-dDfgd3P0.js","/assets/plus-DNHlCd_Y.js","/assets/bar-chart-3-CLxhACnx.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/forgot-password":{id:"routes/forgot-password",parentId:"root",path:"forgot-password",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/forgot-password-Cp_EDHiF.js",imports:["/assets/components-B71KIw6b.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/logo-CCAmY4eY.js","/assets/arrow-left-CfikeANU.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]},"routes/settings._index":{id:"routes/settings._index",parentId:"root",path:"settings",index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/settings._index-e811WeO2.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/card-D6xvUs-C.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/shield-CXIIqWp3.js","/assets/button-CpX_ak2_.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/subscribers.$id":{id:"routes/subscribers.$id",parentId:"root",path:"subscribers/:id",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/subscribers._id-5bcx9vP5.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/calendar-DagQcv_q.js","/assets/users-TLTQjisN.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/subscribers.new":{id:"routes/subscribers.new",parentId:"root",path:"subscribers/new",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/subscribers.new-CAushjfj.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/user-plus-Dcuvb96f.js","/assets/users-TLTQjisN.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/demo.lists.$id":{id:"routes/demo.lists.$id",parentId:"routes/demo",path:"lists/:id",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/demo.lists._id-jIFcj2IX.js",imports:["/assets/components-B71KIw6b.js","/assets/card-D6xvUs-C.js","/assets/button-CpX_ak2_.js","/assets/arrow-left-CfikeANU.js","/assets/users-TLTQjisN.js","/assets/calendar-DagQcv_q.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]},"routes/reset-password":{id:"routes/reset-password",parentId:"root",path:"reset-password",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/reset-password-CvIvDhJ5.js",imports:["/assets/components-B71KIw6b.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/logo-CCAmY4eY.js","/assets/eye-Cm4B-ATZ.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]},"routes/auth.callback":{id:"routes/auth.callback",parentId:"root",path:"auth/callback",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/auth.callback-l0sNRNKZ.js",imports:[],css:[]},"routes/auth.register":{id:"routes/auth.register",parentId:"root",path:"auth/register",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/auth.register-F0uRwBvR.js",imports:["/assets/components-B71KIw6b.js","/assets/logo-CCAmY4eY.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js"],css:[]},"routes/campaigns.$id":{id:"routes/campaigns.$id",parentId:"root",path:"campaigns/:id",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/campaigns._id-yLAGx7Mr.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/users-TLTQjisN.js","/assets/bar-chart-3-CLxhACnx.js","/assets/clock-BgQUbWRG.js","/assets/send-Du1D2yV1.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/campaigns.new":{id:"routes/campaigns.new",parentId:"root",path:"campaigns/new",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/campaigns.new-DAtejzZl.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/textarea-CF-GwTTr.js","/assets/arrow-left-CfikeANU.js","/assets/save-CqtvPiWF.js","/assets/zap-CrcmDB4d.js","/assets/clock-BgQUbWRG.js","/assets/users-TLTQjisN.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/settings.smtp":{id:"routes/settings.smtp",parentId:"root",path:"settings/smtp",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/settings.smtp-DhkvQ7Xj.js",imports:["/assets/components-B71KIw6b.js"],css:[]},"routes/lists._index":{id:"routes/lists._index",parentId:"root",path:"lists",index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/lists._index-BA4R-bIl.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/card-D6xvUs-C.js","/assets/plus-DNHlCd_Y.js","/assets/send-Du1D2yV1.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/users-TLTQjisN.js","/assets/calendar-DagQcv_q.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/lists.import":{id:"routes/lists.import",parentId:"root",path:"lists/import",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/lists.import-C-HLKfGu.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/upload-DFgZRpj7.js","/assets/alert-circle-UJB4NVXK.js","/assets/check-circle-BhPuD76u.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/smtp._index":{id:"routes/smtp._index",parentId:"root",path:"smtp",index:!0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/smtp._index-D4oPIeHh.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/plus-DNHlCd_Y.js","/assets/check-circle-BhPuD76u.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/trash-2-DSCc9uhn.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/auth.login":{id:"routes/auth.login",parentId:"root",path:"auth/login",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/auth.login-ttkWu4zO.js",imports:["/assets/components-B71KIw6b.js","/assets/logo-CCAmY4eY.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js"],css:[]},"routes/dashboard":{id:"routes/dashboard",parentId:"root",path:"dashboard",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/dashboard-BMKJR4m4.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/card-D6xvUs-C.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/button-CpX_ak2_.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/lists.$id":{id:"routes/lists.$id",parentId:"root",path:"lists/:id",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/lists._id-ClRAtdnU.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/users-TLTQjisN.js","/assets/plus-DNHlCd_Y.js","/assets/user-plus-Dcuvb96f.js","/assets/search-D3iH17Gw.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/send-Du1D2yV1.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/lists.new":{id:"routes/lists.new",parentId:"root",path:"lists/new",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/lists.new-yW5ZdO62.js",imports:["/assets/components-B71KIw6b.js","/assets/header-BHzBVBdg.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/textarea-CF-GwTTr.js","/assets/card-D6xvUs-C.js","/assets/arrow-left-CfikeANU.js","/assets/send-Du1D2yV1.js","/assets/users-TLTQjisN.js","/assets/createLucideIcon-DDdTbUiS.js","/assets/bar-chart-3-CLxhACnx.js","/assets/logo-CCAmY4eY.js"],css:[]},"routes/_index":{id:"routes/_index",parentId:"root",path:void 0,index:!0,caseSensitive:void 0,hasAction:!1,hasLoader:!1,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/_index-Cx0jGigm.js",imports:["/assets/components-B71KIw6b.js","/assets/logo-CCAmY4eY.js","/assets/button-CpX_ak2_.js","/assets/users-TLTQjisN.js","/assets/bar-chart-3-CLxhACnx.js","/assets/zap-CrcmDB4d.js","/assets/shield-CXIIqWp3.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]},"routes/logout":{id:"routes/logout",parentId:"root",path:"logout",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/logout-l0sNRNKZ.js",imports:[],css:[]},"routes/login":{id:"routes/login",parentId:"root",path:"login",index:void 0,caseSensitive:void 0,hasAction:!0,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/login-DgijDlov.js",imports:["/assets/components-B71KIw6b.js","/assets/button-CpX_ak2_.js","/assets/input-gR889RM_.js","/assets/card-D6xvUs-C.js","/assets/logo-CCAmY4eY.js","/assets/eye-Cm4B-ATZ.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]},"routes/demo":{id:"routes/demo",parentId:"root",path:"demo",index:void 0,caseSensitive:void 0,hasAction:!1,hasLoader:!0,hasClientAction:!1,hasClientLoader:!1,hasErrorBoundary:!1,module:"/assets/demo-DgM5ZLQ4.js",imports:["/assets/components-B71KIw6b.js","/assets/card-D6xvUs-C.js","/assets/button-CpX_ak2_.js","/assets/logo-CCAmY4eY.js","/assets/users-TLTQjisN.js","/assets/send-Du1D2yV1.js","/assets/createLucideIcon-DDdTbUiS.js"],css:[]}},url:"/assets/manifest-877d37c7.js",version:"877d37c7"},rc="production",nc="build/client",oc="/",lc={v3_fetcherPersist:!0,v3_relativeSplatPath:!0,v3_throwAbortReason:!0,v3_routeConfig:!1,v3_singleFetch:!1,v3_lazyRouteDiscovery:!1,unstable_optimizeDeps:!1},cc=!1,dc="/",pc={module:Un},mc={root:{id:"root",parentId:void 0,path:"",index:void 0,caseSensitive:void 0,module:Vn},"routes/api.campaigns.$id.send":{id:"routes/api.campaigns.$id.send",parentId:"root",path:"api/campaigns/:id/send",index:void 0,caseSensitive:void 0,module:ao},"routes/subscribers.$id.edit":{id:"routes/subscribers.$id.edit",parentId:"routes/subscribers.$id",path:"edit",index:void 0,caseSensitive:void 0,module:mo},"routes/subscribers._index":{id:"routes/subscribers._index",parentId:"root",path:"subscribers",index:!0,caseSensitive:void 0,module:fo},"routes/email-apis._index":{id:"routes/email-apis._index",parentId:"root",path:"email-apis",index:!0,caseSensitive:void 0,module:bo},"routes/recipients._index":{id:"routes/recipients._index",parentId:"root",path:"recipients",index:!0,caseSensitive:void 0,module:_o},"routes/analytics._index":{id:"routes/analytics._index",parentId:"root",path:"analytics",index:!0,caseSensitive:void 0,module:Eo},"routes/campaigns._index":{id:"routes/campaigns._index",parentId:"root",path:"campaigns",index:!0,caseSensitive:void 0,module:Ao},"routes/dashboard._index":{id:"routes/dashboard._index",parentId:"routes/dashboard",path:void 0,index:!0,caseSensitive:void 0,module:Lo},"routes/forgot-password":{id:"routes/forgot-password",parentId:"root",path:"forgot-password",index:void 0,caseSensitive:void 0,module:qo},"routes/settings._index":{id:"routes/settings._index",parentId:"root",path:"settings",index:!0,caseSensitive:void 0,module:Ro},"routes/subscribers.$id":{id:"routes/subscribers.$id",parentId:"root",path:"subscribers/:id",index:void 0,caseSensitive:void 0,module:Uo},"routes/subscribers.new":{id:"routes/subscribers.new",parentId:"root",path:"subscribers/new",index:void 0,caseSensitive:void 0,module:Vo},"routes/demo.lists.$id":{id:"routes/demo.lists.$id",parentId:"routes/demo",path:"lists/:id",index:void 0,caseSensitive:void 0,module:Go},"routes/reset-password":{id:"routes/reset-password",parentId:"root",path:"reset-password",index:void 0,caseSensitive:void 0,module:Wo},"routes/auth.callback":{id:"routes/auth.callback",parentId:"root",path:"auth/callback",index:void 0,caseSensitive:void 0,module:el},"routes/auth.register":{id:"routes/auth.register",parentId:"root",path:"auth/register",index:void 0,caseSensitive:void 0,module:al},"routes/campaigns.$id":{id:"routes/campaigns.$id",parentId:"root",path:"campaigns/:id",index:void 0,caseSensitive:void 0,module:ll},"routes/campaigns.new":{id:"routes/campaigns.new",parentId:"root",path:"campaigns/new",index:void 0,caseSensitive:void 0,module:ml},"routes/settings.smtp":{id:"routes/settings.smtp",parentId:"root",path:"settings/smtp",index:void 0,caseSensitive:void 0,module:gl},"routes/lists._index":{id:"routes/lists._index",parentId:"root",path:"lists",index:!0,caseSensitive:void 0,module:bl},"routes/lists.import":{id:"routes/lists.import",parentId:"root",path:"lists/import",index:void 0,caseSensitive:void 0,module:_l},"routes/smtp._index":{id:"routes/smtp._index",parentId:"root",path:"smtp",index:!0,caseSensitive:void 0,module:kl},"routes/auth.login":{id:"routes/auth.login",parentId:"root",path:"auth/login",index:void 0,caseSensitive:void 0,module:Ll},"routes/dashboard":{id:"routes/dashboard",parentId:"root",path:"dashboard",index:void 0,caseSensitive:void 0,module:ql},"routes/lists.$id":{id:"routes/lists.$id",parentId:"root",path:"lists/:id",index:void 0,caseSensitive:void 0,module:zl},"routes/lists.new":{id:"routes/lists.new",parentId:"root",path:"lists/new",index:void 0,caseSensitive:void 0,module:$l},"routes/_index":{id:"routes/_index",parentId:"root",path:void 0,index:!0,caseSensitive:void 0,module:Kl},"routes/logout":{id:"routes/logout",parentId:"root",path:"logout",index:void 0,caseSensitive:void 0,module:Xl},"routes/login":{id:"routes/login",parentId:"root",path:"login",index:void 0,caseSensitive:void 0,module:ec},"routes/demo":{id:"routes/demo",parentId:"root",path:"demo",index:void 0,caseSensitive:void 0,module:ic}};var hc=uc(Ot,"production"),od=hc;export{od as default};
