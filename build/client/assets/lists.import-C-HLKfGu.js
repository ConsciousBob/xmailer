import{u as w,a as S,b as k,r as o,j as e,L as x,F as L}from"./components-B71KIw6b.js";import{S as F,H as V}from"./header-BHzBVBdg.js";import{B as i}from"./button-CpX_ak2_.js";import{I}from"./input-gR889RM_.js";import{C as h,b as j,c as p,d as u,a as f}from"./card-D6xvUs-C.js";import{A as R}from"./arrow-left-CfikeANU.js";import{c as A}from"./createLucideIcon-DDdTbUiS.js";import{U}from"./upload-DFgZRpj7.js";import{A as q}from"./alert-circle-UJB4NVXK.js";import{C as T}from"./check-circle-BhPuD76u.js";import"./users-TLTQjisN.js";import"./send-Du1D2yV1.js";import"./bar-chart-3-CLxhACnx.js";import"./logo-CCAmY4eY.js";const B=A("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);function X(){const{user:g,lists:N}=w(),s=S(),n=k().state==="submitting",[a,b]=o.useState(""),[r,y]=o.useState(!1),v=l=>{var c;const t=(c=l.target.files)==null?void 0:c[0];if(t&&t.type==="text/csv"){const m=new FileReader;m.onload=C=>{var d;b((d=C.target)==null?void 0:d.result)},m.readAsText(t)}};return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(F,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(V,{user:g}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(x,{to:"/lists",className:"mr-4",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Back to Lists"]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Import Recipients from CSV"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Upload a CSV file to bulk import recipients into your lists."})]})]}),e.jsxs(h,{className:"mb-8",children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center",children:[e.jsx(B,{className:"h-5 w-5 mr-2"}),"CSV Format Requirements"]}),e.jsx(u,{children:"Your CSV file should follow this format"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("code",{className:"text-sm",children:["email,first_name,last_name",e.jsx("br",{}),"john@example.com,John,Doe",e.jsx("br",{}),"jane@example.com,Jane,Smith",e.jsx("br",{}),"bob@example.com,Bob,Johnson"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Required Columns:"}),e.jsx("ul",{className:"space-y-1 text-gray-600",children:e.jsxs("li",{children:["• ",e.jsx("strong",{children:"email"})," - Must be a valid email address"]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Optional Columns:"}),e.jsxs("ul",{className:"space-y-1 text-gray-600",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"first_name"})," - Recipient's first name"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"last_name"})," - Recipient's last name"]})]})]})]})]})]}),e.jsxs(h,{children:[e.jsxs(j,{children:[e.jsxs(p,{className:"flex items-center",children:[e.jsx(U,{className:"h-5 w-5 mr-2"}),"Upload CSV File"]}),e.jsx(u,{children:"Select your CSV file and choose the target list"})]}),e.jsx(f,{children:e.jsxs(L,{method:"post",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV File"}),e.jsx("input",{type:"file",accept:".csv",onChange:v,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a CSV file with your recipient data"})]}),a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CSV Preview (first 5 lines)"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm font-mono",children:[a.split(`
`).slice(0,5).map((l,t)=>e.jsx("div",{className:t===0?"font-bold":"",children:l},t)),a.split(`
`).length>5&&e.jsxs("div",{className:"text-gray-500 mt-2",children:["... and ",a.split(`
`).length-5," more rows"]})]})]}),e.jsx("input",{type:"hidden",name:"csvData",value:a}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Target List"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"createNewList",name:"createNewList",checked:r,onChange:l=>y(l.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"createNewList",className:"ml-2 text-sm text-gray-700",children:"Create new list"})]}),r?e.jsx(I,{name:"newListName",placeholder:"Enter new list name",required:r,className:"w-full"}):e.jsxs("select",{name:"listId",required:!r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select existing list"}),N.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]})]}),(s==null?void 0:s.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(q,{className:"h-5 w-5 text-red-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Import Failed"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:s.error})]})]})}),(s==null?void 0:s.success)&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(T,{className:"h-5 w-5 text-green-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Import Successful"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:s.success}),s.errors&&s.errors.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-800",children:"Warnings:"}),e.jsx("ul",{className:"text-sm text-orange-700 mt-1 list-disc list-inside",children:s.errors.map((l,t)=>e.jsx("li",{children:l},t))})]})]})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(i,{type:"submit",disabled:n||!a,className:"flex-1",children:n?"Importing...":"Import Recipients"}),e.jsx(x,{to:"/lists",className:"flex-1",children:e.jsx(i,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}export{X as default};
