import{u as j,a as f,b as p,j as e,L as n,F as N}from"./components-B71KIw6b.js";import{S as g,H as v}from"./header-BHzBVBdg.js";import{B as c}from"./button-CpX_ak2_.js";import{I as m}from"./input-gR889RM_.js";import{C as l,a as i,b as y,c as w,d as C}from"./card-D6xvUs-C.js";import{A as S}from"./arrow-left-CfikeANU.js";import{A as b}from"./alert-circle-UJB4NVXK.js";import{S as k}from"./save-CqtvPiWF.js";import"./users-TLTQjisN.js";import"./createLucideIcon-DDdTbUiS.js";import"./send-Du1D2yV1.js";import"./bar-chart-3-CLxhACnx.js";import"./logo-CCAmY4eY.js";function q(){const{user:h,subscriber:r,allLists:a,currentListIds:d,error:o}=j(),t=f(),x=p().state==="submitting";return console.log("Loader data:",{subscriber:r,allLists:a,currentListIds:d}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(g,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(v,{user:h}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(n,{to:"/subscribers",className:"mr-4",children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Back to Subscribers"]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Edit Subscriber"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Update subscriber information and list memberships."})]})]}),o&&e.jsx(l,{className:"mb-6 border-red-200 bg-red-50",children:e.jsxs(i,{className:"p-4 flex items-center",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:o})]})}),(t==null?void 0:t.error)&&e.jsx(l,{className:"mb-6 border-red-200 bg-red-50",children:e.jsxs(i,{className:"p-4 flex items-center",children:[e.jsx(b,{className:"h-5 w-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800",children:t.error})]})}),e.jsxs(l,{children:[e.jsxs(y,{children:[e.jsx(w,{children:"Subscriber Information"}),e.jsx(C,{children:"Update the subscriber's details and manage their list subscriptions."})]}),e.jsx(i,{children:e.jsxs(N,{method:"post",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx(m,{name:"email",type:"email",defaultValue:r.email,required:!0,className:"w-full"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx(m,{name:"firstName",defaultValue:r.first_name||"",className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx(m,{name:"lastName",defaultValue:r.last_name||"",className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{name:"status",defaultValue:r.status,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"subscribed",children:"Subscribed"}),e.jsx("option",{value:"unsubscribed",children:"Unsubscribed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),a&&a.length>0?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["List Memberships (",a.length," lists available)"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border rounded-lg p-4 bg-gray-50",children:a.map(s=>{const u=d.includes(s.id);return e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-white rounded border",children:[e.jsx("input",{type:"checkbox",id:`list-${s.id}`,name:"lists",value:s.id,defaultChecked:u,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:`list-${s.id}`,className:"flex-1 text-sm text-gray-700 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-3",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-gray-500 text-xs",children:s.description})]})]})}),u&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Current Member"})]},s.id)})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select which lists this subscriber should be a member of."})]}):e.jsx(l,{className:"border-yellow-200 bg-yellow-50",children:e.jsxs(i,{className:"p-4",children:[e.jsx("p",{className:"text-yellow-800 mb-2",children:"No lists available"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Create some lists first to organize your subscribers."}),e.jsx(n,{to:"/lists/new",className:"inline-block mt-2",children:e.jsx(c,{size:"sm",variant:"outline",children:"Create Your First List"})})]})}),e.jsx(l,{className:"bg-gray-100",children:e.jsxs(i,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Debug Info:"}),e.jsx("pre",{className:"text-xs",children:JSON.stringify({subscriberId:r.id,currentListIds:d,totalLists:(a==null?void 0:a.length)||0},null,2)})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs(c,{type:"submit",disabled:x,className:"flex-1",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),x?"Saving Changes...":"Save Changes"]}),e.jsx(n,{to:"/subscribers",className:"flex-1",children:e.jsx(c,{variant:"outline",className:"w-full",children:"Cancel"})})]})]})})]})]})})]})]})}export{q as default};
