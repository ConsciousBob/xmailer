import{u as v,b as y,r as d,j as e,L as m,F as w}from"./components-B71KIw6b.js";import{S as _,H as C}from"./header-BHzBVBdg.js";import{B as r,f as i}from"./button-CpX_ak2_.js";import{C as a,a as t,b as x,c as o}from"./card-D6xvUs-C.js";import{A as S}from"./arrow-left-CfikeANU.js";import{c as g}from"./createLucideIcon-DDdTbUiS.js";import{M as h,U as L}from"./users-TLTQjisN.js";import{B as k}from"./bar-chart-3-CLxhACnx.js";import{C as M}from"./clock-BgQUbWRG.js";import"./send-Du1D2yV1.js";import"./logo-CCAmY4eY.js";const R=g("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),E=g("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function q(){const{user:j,campaign:s,sending:l}=v(),n=y(),[u,p]=d.useState(!1);d.useEffect(()=>{if(s.status==="sending"||l){const b=setInterval(()=>{p(!0),window.location.reload()},3e3);return()=>clearInterval(b)}},[s.status,l]);const c=s.total_recipients>0?Math.round(s.sent_count/s.total_recipients*100):0,N={draft:"bg-gray-100 text-gray-800",sending:"bg-blue-100 text-blue-800",sent:"bg-green-100 text-green-800",scheduled:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",partially_sent:"bg-orange-100 text-orange-800"}[s.status]||"bg-gray-100 text-gray-800",f=["draft","scheduled"].includes(s.status);return["sending"].includes(s.status),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(_,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(C,{user:j}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(m,{to:"/campaigns",className:"mr-4",children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Back to Campaigns"]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600 mt-2",children:s.subject})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`px-3 py-1 text-sm rounded-full ${N}`,children:[s.status.replace("_"," "),u&&e.jsx(E,{className:"inline h-3 w-3 ml-1 animate-spin"})]}),f&&e.jsx(w,{method:"post",children:e.jsxs(r,{type:"submit",name:"_action",value:"send_now",className:"bg-green-600 hover:bg-green-700",disabled:n.state==="submitting",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),n.state==="submitting"?"Starting...":"Send Now"]})}),s.status==="draft"&&e.jsx(m,{to:`/campaigns/${s.id}/edit`,children:e.jsx(r,{variant:"outline",children:"Edit Campaign"})})]})]}),(s.status==="sending"||l)&&e.jsx(a,{className:"mb-8 border-blue-200 bg-blue-50",children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-pulse",children:e.jsx(h,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Campaign is sending..."}),e.jsxs("p",{className:"text-blue-700",children:[s.sent_count," of ",s.total_recipients," emails sent"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(a,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:e.jsx(h,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Emails Sent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.sent_count})]})]})})}),e.jsx(a,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50",children:e.jsx(L,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Recipients"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.total_recipients})]})]})})}),e.jsx(a,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50",children:e.jsx(k,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivery Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[c,"%"]})]})]})})}),e.jsx(a,{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:e.jsx(M,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 capitalize",children:s.status.replace("_"," ")})]})]})})})]}),s.total_recipients>0&&e.jsx(a,{className:"mb-8",children:e.jsxs(t,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sending Progress"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.sent_count," of ",s.total_recipients," sent"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${s.status==="sending"?"bg-blue-600":s.status==="sent"?"bg-green-600":s.status==="failed"?"bg-red-600":"bg-gray-400"}`,style:{width:`${c}%`}})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(a,{children:[e.jsx(x,{children:e.jsx(o,{children:"Campaign Information"})}),e.jsxs(t,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Campaign Name"}),e.jsx("p",{className:"text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Subject Line"}),e.jsx("p",{className:"text-gray-900",children:s.subject})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created"}),e.jsx("p",{className:"text-gray-900",children:i(s.created_at)})]}),s.scheduled_at&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Scheduled For"}),e.jsx("p",{className:"text-gray-900",children:i(s.scheduled_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),e.jsx("p",{className:"text-gray-900",children:i(s.updated_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Targeting"}),e.jsx("p",{className:"text-gray-900",children:s.target_all_subscribers?"All Subscribers":"Selected Lists"})]})]})]}),e.jsxs(a,{children:[e.jsx(x,{children:e.jsx(o,{children:"Email Content Preview"})}),e.jsx(t,{children:e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto",children:e.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.html_content||"No content available"}})})})]})]})]})})]})]})}export{q as default};
